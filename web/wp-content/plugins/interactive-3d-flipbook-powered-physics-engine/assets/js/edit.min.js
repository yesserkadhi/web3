!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var installedModules={};__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.i=function(value){return value},__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=151)}([function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_$=window.jQuery,_React=window.React,_ReactDOM=window.ReactDOM,_tr=function(s){return FB3D_ADMIN_LOCALE.dictionary[s]||s};window.iberezansky=_extends({},window.iberezansky,{tr:function(s){return FB3D_ADMIN_LOCALE.dictionary[s]||s}}),exports.$=_$,exports.React=_React,exports.ReactDOM=_ReactDOM,exports.tr=_tr},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _$=window.jQuery,_html2canvas=window.html2canvas,_THREE=window.THREE,_React=window.React,_ReactDOM=window.ReactDOM,_PDFJS=window.pdfjsLib,_tr=function(s){return(window.iberezansky||{}).tr&&window.iberezansky.tr(s)||s};exports.$=_$,exports.html2canvas=_html2canvas,exports.THREE=_THREE,exports.React=_React,exports.ReactDOM=_ReactDOM,exports.PDFJS=_PDFJS,exports.tr=_tr},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _libs=__webpack_require__(1),Component=function(_React$Component){function Component(){return _classCallCheck(this,Component),_possibleConstructorReturn(this,_React$Component.apply(this,arguments))}return _inherits(Component,_React$Component),Component.spaceIfUndefined=function(value){return void 0===value?"":value},Component.preventDefault=function(e){e.preventDefault()},Component.prototype.tabClass=function(name){var disabled=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(this.props.activeTab===name?"active ":"")+(disabled?"disabled ":"")},Component.prototype.switchTab=function(e){e.preventDefault();for(var el=e.target;el&&void 0===(0,_libs.$)(el).attr("data");)el=el.parentNode;el&&!(0,_libs.$)(el.parentNode).hasClass("disabled")&&this.setActiveTab((0,_libs.$)(el).attr("data"))},Component}(_libs.React.Component);exports.default=Component},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;exports.READ_POST="READ_POST",exports.UPDATE_POST="UPDATE_POST",exports.RECEIVED_POST="RECEIVED_POST",exports.SET_DEF_PROPS="SET_DEF_PROPS",exports.READ_POST_PAGES="READ_POST_PAGES",exports.ADD_POST_PAGES="ADD_POST_PAGES",exports.REMOVE_POST_PAGES="REMOVE_POST_PAGES",exports.UPDATE_POST_PAGE="UPDATE_POST_PAGE",exports.RECEIVED_POST_PAGES="RECEIVED_POST_PAGES",exports.VISIBLE_POST_PAGES="VISIBLE_POST_PAGES",exports.ITEMS_POST_PAGES="ITEMS_POST_PAGES",exports.ORDER_IMPORTING="ORDER_IMPORTING",exports.READ_MEDIA_IMAGE="READ_MEDIA_IMAGE",exports.RECEIVED_MEDIA_IMAGE="RECEIVED_MEDIA_IMAGE",exports.ADD_RENDERED_THUMBNAIL="ADD_RENDERED_THUMBNAIL",exports.UPDATE_EDIT="UPDATE_EDIT"},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _libs=__webpack_require__(1),_Component2=__webpack_require__(2),_Component3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_Component2),Prop=function(_Component){function Prop(){return _classCallCheck(this,Prop),_possibleConstructorReturn(this,_Component.apply(this,arguments))}return _inherits(Prop,_Component),Prop.prototype.renderContent=function(){return null},Prop.normalize=function(value){return void 0===value||"auto"===value?"auto":value},Prop.prototype.render=function(){var _props=this.props,name=_props.name,label=_props.label,description=_props.description;return _libs.React.createElement("div",{className:"form-group"},_libs.React.createElement("div",{className:"prop-caption"},_libs.React.createElement("label",{htmlFor:name},label),description?_libs.React.createElement("div",{className:"description"},description):""),this.renderContent())},Prop}(_Component3.default);exports.default=Prop},function(module,exports,__webpack_require__){"use strict";function hasValidRef(config){return void 0!==config.ref}function hasValidKey(config){return void 0!==config.key}var _assign=__webpack_require__(9),ReactCurrentOwner=__webpack_require__(38),hasOwnProperty=(__webpack_require__(16),__webpack_require__(41),Object.prototype.hasOwnProperty),REACT_ELEMENT_TYPE=__webpack_require__(39),RESERVED_PROPS={key:!0,ref:!0,__self:!0,__source:!0},ReactElement=function(type,key,ref,self,source,owner,props){var element={$$typeof:REACT_ELEMENT_TYPE,type:type,key:key,ref:ref,props:props,_owner:owner};return element};ReactElement.createElement=function(type,config,children){var propName,props={},key=null,ref=null;if(null!=config){hasValidRef(config)&&(ref=config.ref),hasValidKey(config)&&(key=""+config.key),void 0===config.__self?null:config.__self,void 0===config.__source?null:config.__source;for(propName in config)hasOwnProperty.call(config,propName)&&!RESERVED_PROPS.hasOwnProperty(propName)&&(props[propName]=config[propName])}var childrenLength=arguments.length-2;if(1===childrenLength)props.children=children;else if(childrenLength>1){for(var childArray=Array(childrenLength),i=0;i<childrenLength;i++)childArray[i]=arguments[i+2];props.children=childArray}if(type&&type.defaultProps){var defaultProps=type.defaultProps;for(propName in defaultProps)void 0===props[propName]&&(props[propName]=defaultProps[propName])}return ReactElement(type,key,ref,0,0,ReactCurrentOwner.current,props)},ReactElement.createFactory=function(type){var factory=ReactElement.createElement.bind(null,type);return factory.type=type,factory},ReactElement.cloneAndReplaceKey=function(oldElement,newKey){return ReactElement(oldElement.type,newKey,oldElement.ref,oldElement._self,oldElement._source,oldElement._owner,oldElement.props)},ReactElement.cloneElement=function(element,config,children){var propName,props=_assign({},element.props),key=element.key,ref=element.ref,owner=(element._self,element._source,element._owner);if(null!=config){hasValidRef(config)&&(ref=config.ref,owner=ReactCurrentOwner.current),hasValidKey(config)&&(key=""+config.key);var defaultProps;element.type&&element.type.defaultProps&&(defaultProps=element.type.defaultProps);for(propName in config)hasOwnProperty.call(config,propName)&&!RESERVED_PROPS.hasOwnProperty(propName)&&(void 0===config[propName]&&void 0!==defaultProps?props[propName]=defaultProps[propName]:props[propName]=config[propName])}var childrenLength=arguments.length-2;if(1===childrenLength)props.children=children;else if(childrenLength>1){for(var childArray=Array(childrenLength),i=0;i<childrenLength;i++)childArray[i]=arguments[i+2];props.children=childArray}return ReactElement(element.type,key,ref,0,0,owner,props)},ReactElement.isValidElement=function(object){return"object"==typeof object&&null!==object&&object.$$typeof===REACT_ELEMENT_TYPE},module.exports=ReactElement},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;exports.OK=0,exports.ERROR=1,exports.NOT_FOUND=3},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_libs=__webpack_require__(1),_Component2=__webpack_require__(2),_Component3=_interopRequireDefault(_Component2),_PropFactory=__webpack_require__(97),_PropFactory2=_interopRequireDefault(_PropFactory),_Prop=__webpack_require__(4),_Prop2=_interopRequireDefault(_Prop),Props=function(_Component){function Props(){return _classCallCheck(this,Props),_possibleConstructorReturn(this,_Component.apply(this,arguments))}return _inherits(Props,_Component),Props.prototype.getDivClassName=function(){return"props"},Props.prototype.getFullName=function(name){return"3dfb-post-props-"+name},Props.prototype.getLabel=function(name){return name},Props.prototype.getFieldNames=function(){return Object.keys(this.props.defs)},Props.prototype.setProperty=function(name,value){},Props.setValue=function(value){this.self.setProperty(this.name,value)},Props.prototype.render=function(){var _this2=this,_props=this.props,props=_props.props,defs=_props.defs,info=_props.info,post=_props.post,showAdvanced=_props.showAdvanced;return _libs.React.createElement("div",{className:this.getDivClassName()},this.getFieldNames().map(function(name,key){var content=null;return"object"!==_typeof(props[name])&&(info[name]&&info[name].display&&"none"===info[name].display||(content=_libs.React.createElement("div",{className:showAdvanced||!info[name]||!0!==info[name].advanced?"":"hidden"},_PropFactory2.default.createProp(_extends({},info[name],{post:post,name:_this2.getFullName(name),value:_Prop2.default.normalize(props[name]),defValue:defs[name],setValue:Props.setValue.bind({self:_this2,name:name}),label:_this2.getLabel(name)}),key)))),content}))},Props}(_Component3.default);exports.default=Props},function(module,exports,__webpack_require__){"use strict";function invariant(condition,format,a,b,c,d,e,f){if(validateFormat(format),!condition){var error;if(void 0===format)error=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var args=[a,b,c,d,e,f],argIndex=0;error=new Error(format.replace(/%s/g,function(){return args[argIndex++]})),error.name="Invariant Violation"}throw error.framesToPop=1,error}}var validateFormat=function(format){};module.exports=invariant},function(module,exports,__webpack_require__){"use strict";function toObject(val){if(null===val||void 0===val)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(val)}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;module.exports=function(){try{if(!Object.assign)return!1;var test1=new String("abc");if(test1[5]="de","5"===Object.getOwnPropertyNames(test1)[0])return!1;for(var test2={},i=0;i<10;i++)test2["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(test2).map(function(n){return test2[n]}).join(""))return!1;var test3={};return"abcdefghijklmnopqrst".split("").forEach(function(letter){test3[letter]=letter}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},test3)).join("")}catch(err){return!1}}()?Object.assign:function(target,source){for(var from,symbols,to=toObject(target),s=1;s<arguments.length;s++){from=Object(arguments[s]);for(var key in from)hasOwnProperty.call(from,key)&&(to[key]=from[key]);if(getOwnPropertySymbols){symbols=getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++)propIsEnumerable.call(from,symbols[i])&&(to[symbols[i]]=from[symbols[i]])}}return to}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var BaseMathUtils=function(){function BaseMathUtils(){_classCallCheck(this,BaseMathUtils)}return BaseMathUtils.sum1=function(ka,a,kb,b){return[ka*a[0]+kb*b[0]]},BaseMathUtils.sum2=function(ka,a,kb,b){return[ka*a[0]+kb*b[0],ka*a[1]+kb*b[1]]},BaseMathUtils.sum3=function(ka,a,kb,b){return[ka*a[0]+kb*b[0],ka*a[1]+kb*b[1],ka*a[2]+kb*b[2]]},BaseMathUtils.sum4=function(ka,a,kb,b){return[ka*a[0]+kb*b[0],ka*a[1]+kb*b[1],ka*a[2]+kb*b[2],ka*a[3]+kb*b[3]]},BaseMathUtils.rk4=function(dy,t,dt,y){var sum=arguments.length>4&&void 0!==arguments[4]?arguments[4]:BaseMathUtils.sum[y.length-1],k1=dy(t,y),k2=dy(t+dt/2,sum(1,y,dt/2,k1)),k3=dy(t+dt/2,sum(1,y,dt/2,k2)),k4=dy(t+dt,sum(1,y,dt,k3));return sum(1,y,dt/6,sum(1,sum(1,k1,2,k2),1,sum(2,k3,1,k4)))},BaseMathUtils.extrapolateLinear=function(x,y,xi){return y[0]+(y[1]-y[0])/(x[1]-x[0])*(xi-x[0])},BaseMathUtils.interpolateLinear=function(x,y,xi){return x[0]>x[1]&&(x=x.reverse(),y=y.reverse()),xi<x[0]?y[0]:xi>x[1]?y[1]:BaseMathUtils.extrapolateLinear(x,y,xi)},BaseMathUtils.calcScale=function(srcW,srcH,dstW,dstH){return dstW/srcW},BaseMathUtils.mulM=function(a,b){for(var r=[],i=0;i<a.length;++i){r.push([]);for(var j=0;j<b[0].length;++j){r[i][j]=0;for(var k=0;k<b.length;++k)r[i][j]+=a[i][k]*b[k][j]}}return r},BaseMathUtils.transM=function(m){for(var r=[],i=0;i<m.length;++i)for(var j=0;j<m[0].length;++j)r[j]||(r[j]=[]),r[j][i]=m[i][j];return r},BaseMathUtils.mat=function(data){for(var s=0,_iterator=data,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}s+=_ref}return s/data.length},BaseMathUtils.disp=function(data){for(var M=BaseMathUtils.mat(data),s=0,_iterator2=data,_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[Symbol.iterator]();;){var _ref2;if(_isArray2){if(_i2>=_iterator2.length)break;_ref2=_iterator2[_i2++]}else{if(_i2=_iterator2.next(),_i2.done)break;_ref2=_i2.value}var x=_ref2;s+=(x-M)*(x-M)}return s/data.length},BaseMathUtils.predict1=function(data,num){var r=[],l=data.length;if(BaseMathUtils.disp(data)<l&&l>1){for(var am=[],bm=[],i=0;i<l;++i)am.push([i,1]),bm.push([data[i]]);for(var ta=BaseMathUtils.transM(am),a=BaseMathUtils.mulM(ta,am),b=BaseMathUtils.mulM(ta,bm),d=a[0][0]*a[1][1]-a[1][0]*a[0][1],p=[-(a[0][1]*b[1][0]-b[0][0]*a[1][1])/d,(a[0][0]*b[1][0]-a[1][0]*b[0][0])/d],_i3=0;_i3<num;++_i3){var v=Math.round(p[0]*(_i3+l)+p[1]);-1===r.indexOf(v)&&r.push(v)}}return r},BaseMathUtils.predict=function(data,num){for(var r=[],l=data.length,sgns=0,i=0;i<l-1;++i)sgns+=Math.sign(data[i+1]-data[i]);sgns=Math.abs(sgns)<=(l-1)%2?-1:Math.sign(sgns);for(var _i4=0,cur=data[l-1];_i4<num&&cur>0;++_i4)cur+=sgns,r.push(cur);return r},BaseMathUtils.getUnique=function(){return Math.ceil(1e9*Math.random())},BaseMathUtils.setSplinePoints=function(spline,ps){spline.points.length!==ps.x.length&&console.warn("setSplinePoints: bad points");for(var i=0;i<spline.points.length;++i)spline.points[i].set(ps.x[i],ps.y[i],ps.z?ps.z[i]:0)},BaseMathUtils.mapl2L=function(ls,len,n,f){for(var dL=len/(n-1),L=0,i=0,d=ls[0];i<ls.length-1&&L<len+.1*dL;++i,d+=ls[i])Math.abs(L-d)<Math.abs(L-d-ls[i+1])&&(f(i,L),L+=dL);L<len+.1*dL&&console.warn("mapl2L: ls is not enought")},BaseMathUtils.det2=function(a,b,c,d){return a*d-b*c},BaseMathUtils.solve2Lin=function(a1,b1,a2,b2){var res=void 0,d=BaseMathUtils.det2(a1[0],a1[1],a2[0],a2[1]);if(Math.abs(d)>BaseMathUtils.eps){res={x:BaseMathUtils.det2(b1,a1[1],b2,a2[1])/d,y:BaseMathUtils.det2(a1[0],b1,a2[0],b2)/d}}return res},BaseMathUtils.isInsidePoly=function(ps,p){for(var done=!1,ct=void 0,i=0;i<ps.length;++i)if(BaseMathUtils.v2dist(p,ps[i])<BaseMathUtils.eps){ct=1,done=!0;break}for(;!done;){done=!0,ct=0;for(var np={x:p.x+Math.random()-.5,y:p.y+Math.random()-.5},rn={x:np.x-p.x,y:np.y-p.y},a1=[rn.y,-rn.x],b1=p.x*rn.y-p.y*rn.x,_i5=0;_i5<ps.length;++_i5){var p0=ps[_i5],p1=ps[(_i5+1)%ps.length],n={x:p1.x-p0.x,y:p1.y-p0.y},a2=[n.y,-n.x],b2=p0.x*n.y-p0.y*n.x,ip=BaseMathUtils.solve2Lin(a1,b1,a2,b2);if(ip){if(BaseMathUtils.v2dist(ip,p0)<BaseMathUtils.eps||BaseMathUtils.v2dist(ip,p1)<BaseMathUtils.eps){done=!1;break}if(ip.x>Math.min(p0.x,p1.x)-BaseMathUtils.eps&&ip.x<Math.max(p0.x,p1.x)+BaseMathUtils.eps&&ip.y>Math.min(p0.y,p1.y)-BaseMathUtils.eps&&ip.y<Math.max(p0.y,p1.y)+BaseMathUtils.eps){if(BaseMathUtils.v2dist(ip,p)<BaseMathUtils.eps){ct=1;break}var tn={x:ip.x-p.x,y:ip.y-p.y};ct+=tn.x*rn.x+tn.y*rn.y>0}}}}return ct%2},BaseMathUtils.isInsideConvPoly=function(ps,p){for(var sg=[0,0],i=0;i<ps.length;++i){var p0=ps[i],p1=ps[(i+1)%ps.length],a={x:p0.x-p.x,y:p0.y-p.y},b={x:p1.x-p.x,y:p1.y-p.y};++sg[(a.x*b.y-a.y*b.x<0)+0]}return~sg.indexOf(ps.length)},BaseMathUtils.v2len=function(v2){return Math.sqrt(v2.x*v2.x+v2.y*v2.y)},BaseMathUtils.v2dist=function(v21,v22){return BaseMathUtils.v2len({x:v22.x-v21.x,y:v22.y-v21.y})},BaseMathUtils.computeSquare=function(ps){for(var a=[],p=0,i=0;i<ps.length;++i)a.push(BaseMathUtils.v2dist(ps[i],ps[(i+1)%ps.length])),p+=.5*a[i];return Math.sqrt(p*(p-a[0])*(p-a[1])*(p-a[2]))},BaseMathUtils.computeInterpCoefs=function(tri,p){for(var s=BaseMathUtils.computeSquare(tri),coefs=[],l=tri.length,i=0;i<l;++i)coefs[i]=BaseMathUtils.computeSquare([p,tri[(i+1)%l],tri[(i+2)%l]])/s;return coefs},BaseMathUtils}();BaseMathUtils.sum=[BaseMathUtils.sum1,BaseMathUtils.sum2,BaseMathUtils.sum3,BaseMathUtils.sum4],BaseMathUtils.eps=1e-4,exports.default=BaseMathUtils},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0,exports.default=void 0;var _GraphUtils=__webpack_require__(25),_GraphUtils2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_GraphUtils),ImageBase=function(){function ImageBase(context,width,height,color){_classCallCheck(this,ImageBase),this.renderPause=!1,this.context=context,this.wnd=context.wnd,this.doc=context.doc,this.element=context.element||context.doc.body,this.c=context.renderCanvas||ImageBase.renderCanvas,this.ctx=context.renderCanvasCtx||ImageBase.renderCanvasCtx,this.resW=this.width=width,this.resH=this.height=height,this.color=color}return ImageBase.prototype.setRenderCanvas=function(c,ctx){this.c=c,this.ctx=ctx},ImageBase.prototype.setResolution=function(res){var k=res.width/this.resW;this.resW=res.width,this.resH=k*this.resH},ImageBase.prototype.dispose=function(){},ImageBase.prototype.renderBlankPage=function(){this.ctx.beginPath(),this.ctx.fillStyle=_GraphUtils2.default.color2Rgba(this.color,1),this.ctx.rect(0,0,this.c.width,this.c.height),this.ctx.fill()},ImageBase.prototype.setRenderPause=function(renderPause){this.renderPause=renderPause,!renderPause&&this.continueRender&&(this.continueRender(),delete this.continueRender)},ImageBase.prototype.cancelRender=function(){this.renderTask&&this.renderTask.cancel&&(this.renderTask.cancel(),delete this.renderTask)},ImageBase.prototype.renderImage=function(image){this.pushCtx(),this.ctx.clearRect(0,0,this.c.width,this.c.height),this.ctx.drawImage(image,0,0),this.popCtx()},ImageBase.prototype.normToConv=function(p){return{x:p.x*this.c.width,y:(1-p.y)*this.c.height}},ImageBase.prototype.renderHit=function(poly){var ctx=this.ctx;ctx.fillStyle="rgba(255,255,0,0.4)",ctx.beginPath();var p=this.normToConv(poly[0]);ctx.moveTo(p.x,p.y);for(var i=1;i<poly.length;++i)p=this.normToConv(poly[i]),ctx.lineTo(p.x,p.y);ctx.closePath(),ctx.fill()},ImageBase.prototype.pushCtx=function(){return Math.abs(this.resW-this.c.width)>=1&&(this.c.width=Math.ceil(this.resW)),Math.abs(this.resH-this.c.height)>=1&&(this.c.height=Math.ceil(this.resH)),this.ctx.save(),this.ctx.scale(this.c.width/this.width,this.c.height/this.height),this.ctx},ImageBase.prototype.popCtx=function(){this.ctx.restore()},ImageBase.prototype.renderNotFoundPage=function(){this.renderBlankPage()},ImageBase.prototype.finishRender=function(){var canceled=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.onChange&&this.onChange(this.c,canceled)},ImageBase.prototype.finishLoad=function(){this.onLoad?this.onLoad():this.startRender()},ImageBase.prototype.getSimulatedDoc=function(){},ImageBase}();ImageBase.renderCanvas=_GraphUtils2.default.createCanvas(),ImageBase.renderCanvasCtx=ImageBase.renderCanvas.getContext("2d"),exports.default=ImageBase},function(module,exports,__webpack_require__){"use strict";function reactProdInvariant(code){for(var argCount=arguments.length-1,message="Minified React error #"+code+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+code,argIdx=0;argIdx<argCount;argIdx++)message+="&args[]="+encodeURIComponent(arguments[argIdx+1]);message+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var error=new Error(message);throw error.name="Invariant Violation",error.framesToPop=1,error}module.exports=reactProdInvariant},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0,exports.default=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_libs=__webpack_require__(0),_PdfPage=__webpack_require__(69),_PdfPage2=_interopRequireDefault(_PdfPage),_ImagePage=__webpack_require__(61),_ImagePage2=_interopRequireDefault(_ImagePage),_HtmlPage=__webpack_require__(60),_HtmlPage2=_interopRequireDefault(_HtmlPage),_AutoThumbnail=__webpack_require__(19),_AutoThumbnail2=_interopRequireDefault(_AutoThumbnail),_MediaImageThumbnail=__webpack_require__(62),_MediaImageThumbnail2=_interopRequireDefault(_MediaImageThumbnail),Factory=function(){function Factory(){_classCallCheck(this,Factory)}return Factory.createPage=function(props){var key=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,Class=Factory.Pages[props.page.page_source_type];return Class?_libs.React.createElement(Class,_extends({key:key},props)):null},Factory.createThumbnail=function(props){var key=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,Class=Factory.Thumbnails[props.type];return Class?_libs.React.createElement(Class,_extends({key:key},props)):null},Factory}();Factory.Pages={pdf:_PdfPage2.default,html:_HtmlPage2.default,image:_ImagePage2.default},Factory.Thumbnails={auto:_AutoThumbnail2.default,mediaImage:_MediaImageThumbnail2.default},exports.default=Factory},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0,exports.default=void 0;var _Cache=__webpack_require__(84),_Cache2=_interopRequireDefault(_Cache),_BlankImage=__webpack_require__(82),_BlankImage2=_interopRequireDefault(_BlankImage),_StaticImage=__webpack_require__(99),_StaticImage2=_interopRequireDefault(_StaticImage),_PdfImage=__webpack_require__(96),_PdfImage2=_interopRequireDefault(_PdfImage),_InteractiveImage=__webpack_require__(94),_InteractiveImage2=_interopRequireDefault(_InteractiveImage),ImageFactory=function(){function ImageFactory(context,cache){_classCallCheck(this,ImageFactory),this.context=context,this.cache=cache||new _Cache2.default}return ImageFactory.prototype.build=function(info){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,widthTexels=arguments.length>2&&void 0!==arguments[2]?arguments[2]:210,heightTexels=arguments.length>3&&void 0!==arguments[3]?arguments[3]:297,color=arguments.length>4&&void 0!==arguments[4]?arguments[4]:16777215,injector=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,image=void 0;switch(info.type){case"html":image=new _InteractiveImage2.default(this.context,widthTexels,heightTexels,color,info.src,this.cache,injector);break;case"image":image=new _StaticImage2.default(this.context,widthTexels,heightTexels,color,info.src);break;case"pdf":image=new _PdfImage2.default(this.context,widthTexels,heightTexels,color,info.src,n);break;case"blank":default:image=new _BlankImage2.default(this.context,widthTexels,heightTexels,color)}return image},ImageFactory}();exports.default=ImageFactory},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var Utils=function(){function Utils(){_classCallCheck(this,Utils)}return Utils.normalizeUrl=function(url){function split(s){return s.replace(/\\/g,"/").split("/")}var base=split(window.location.href);return url=split(url),base[2]===url[2]&&(url[0]=base[0]),url.join("/")},Utils._escapeHTMLclb=function(c){return Utils._escapeHTMLchars[c]||c},Utils.escapeHTML=function(s){return s.replace(/[&<>]/g,Utils._escapeHTMLclb)},Utils.extends=function(der,base){for(var name in base)der.hasOwnProperty(name)||(der[name]=base[name])},Utils.defaultCmp=function(a,b){return a-b},Utils.lowerBound=function(a,x,cmp){cmp=cmp||Utils.defaultCmp;for(var l=0,h=a.length-1;h-l>1;){var mid=Math.floor((l+h)/2);cmp(x,a[mid])<0?h=mid:l=mid}return cmp(x,a[h])>=0?h:l},Utils}();Utils.MOBILE_DIAG=11,Utils._escapeHTMLchars={"&":"&amp;","<":"&lt;",">":"&gt;"},exports.default=Utils},function(module,exports,__webpack_require__){"use strict";var emptyFunction=__webpack_require__(27),warning=emptyFunction;module.exports=warning},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.__esModule=!0,exports.connect=exports.Provider=void 0;var _Provider=__webpack_require__(129),_Provider2=_interopRequireDefault(_Provider),_connect=__webpack_require__(130),_connect2=_interopRequireDefault(_connect);exports.Provider=_Provider2.default,exports.connect=_connect2.default},function(module,exports){var g;g=function(){return this}();try{g=g||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(g=window)}module.exports=g},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _libs=__webpack_require__(0),_Component2=__webpack_require__(2),_Component3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_Component2),AutoThumbnail=function(_Component){function AutoThumbnail(){return _classCallCheck(this,AutoThumbnail),_possibleConstructorReturn(this,_Component.apply(this,arguments))}return _inherits(AutoThumbnail,_Component),AutoThumbnail.getKey=function(page){return{srcId:page.bookId,type:page.page_source_type,src:page.page_source_data.post_ID,page:page.page_source_data.number}},AutoThumbnail.prototype.update=function(props){var page=props.page,getThumbnail=props.getThumbnail,thumb=page?getThumbnail(AutoThumbnail.getKey(page)):void 0;this.src=thumb?thumb.element:FB3D_ADMIN_LOCALE.images+"page-thumbnail.png"},AutoThumbnail.prototype.componentWillReceiveProps=function(props){this.update(props)},AutoThumbnail.prototype.componentDidMount=function(){this.update(this.props)},AutoThumbnail.prototype.render=function(){var res=null;return this.props.hidden||(this.src||this.update(this.props),res=_libs.React.createElement("div",null,_libs.React.createElement("img",{src:this.src||""}),this.props.name?_libs.React.createElement("input",{type:"hidden",name:this.props.name,value:this.src?this.src.split("base64,")[1]:""}):null)),res},AutoThumbnail}(_Component3.default);exports.default=AutoThumbnail},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _libs=__webpack_require__(0),_Page2=__webpack_require__(21),_Page3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_Page2),MediaPage=function(_Page){function MediaPage(){return _classCallCheck(this,MediaPage),_possibleConstructorReturn(this,_Page.apply(this,arguments))}return _inherits(MediaPage,_Page),MediaPage.prototype.renderMediaDerivative=function(){return null},MediaPage.prototype.renderDerivative=function(){var page=this.props.page,N=page.page_number;return _libs.React.createElement("div",null,_libs.React.createElement("div",{className:"hidden"},_libs.React.createElement("input",{type:"hidden",name:"3dfb-pages-"+N+"-page_source_data-post_ID",value:page.page_source_data.post_ID})),_libs.React.createElement("div",{className:"page-guid"},_libs.React.createElement("div",{className:"form-group"},_libs.React.createElement("label",{htmlFor:"3dfb-page-data-guid-"+N},"URL"),_libs.React.createElement("input",{readOnly:!0,type:"text",className:"form-control",name:"3dfb-pages-"+N+"-page_source_data-guid",value:page.page_source_data.guid,id:"3dfb-page-data-guid-"+N}))),this.renderMediaDerivative())},MediaPage}(_Page3.default);exports.default=MediaPage},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_libs=__webpack_require__(0),_Component2=__webpack_require__(2),_Component3=_interopRequireDefault(_Component2),_Factory=__webpack_require__(13),_Factory2=_interopRequireDefault(_Factory),_ThumbnailControl=__webpack_require__(22),_ThumbnailControl2=_interopRequireDefault(_ThumbnailControl),Page=function(_Component){function Page(){_classCallCheck(this,Page);var _this=_possibleConstructorReturn(this,_Component.call(this));return _this.state={disabled:!1},_this}return _inherits(Page,_Component),Page.prototype.renderDerivative=function(){return null},Page.prototype.onTitleChange=function(e){var _props=this.props,page=_props.page;(0,_props.update)(page,_extends({},page,{page_title:e.target.value}))},Page.prototype.onPageNumberChange=function(e){var _props2=this.props,page=_props2.page;(0,_props2.update)(page,_extends({},page,{page_number:parseInt(e.target.value)+.5*Math.sign(e.target.value-page.page_number)}))},Page.prototype.onPageCssLayerChange=function(e,name){var _props3=this.props,page=_props3.page,update=_props3.update,newPage=_extends({},page,{page_meta_data:_extends({},page.page_meta_data,{css_layer:_extends({},page.page_meta_data.css_layer)})});newPage.page_meta_data.css_layer[name]=e.target.value,update(page,newPage)},Page.prototype.onPageCssLayerCssChange=function(e){this.onPageCssLayerChange(e,"css")},Page.prototype.onPageCssLayerHtmlChange=function(e){this.onPageCssLayerChange(e,"html")},Page.prototype.onPageCssLayerJsChange=function(e){this.onPageCssLayerChange(e,"js")},Page.prototype.updateThumbnail=function(type){var id=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,_props4=this.props,page=_props4.page;(0,_props4.update)(page,_extends({},page,{page_thumbnail_type:type,page_thumbnail_data:{post_ID:id}}))},Page.prototype.remove=function(e){e.preventDefault();var _props5=this.props,page=_props5.page;(0,_props5.remove)([page])},Page.prototype.visualEditor=function(){var _this2=this,_props6=this.props,page=_props6.page,runVisualEditor=_props6.runVisualEditor;runVisualEditor&&(this.setState({disabled:!0}),runVisualEditor(page.page_number).then(function(){return _this2.setState({disabled:!1})}))},Page.prototype.render=function(){var _props7=this.props,page=_props7.page,pages=_props7.pages,getThumbnail=_props7.getThumbnail,hidden=_props7.hidden,showAdvanced=_props7.showAdvanced,runVisualEditor=_props7.runVisualEditor,N=page.page_number,showAdvancedClass=showAdvanced?"":" hidden";return _libs.React.createElement("div",{className:"page"+(this.state.disabled?" disabled":"")},_libs.React.createElement("div",{className:"hidden"},_libs.React.createElement("input",{type:"hidden",name:"3dfb-pages-"+N+"-page_ID",value:page.page_ID}),_libs.React.createElement("input",{type:"hidden",name:"3dfb-pages-"+N+"-page_post_ID",value:page.page_post_ID}),_libs.React.createElement("input",{type:"hidden",name:"3dfb-pages-"+N+"-page_source_type",value:page.page_source_type}),_libs.React.createElement("input",{type:"hidden",name:"3dfb-pages-"+N+"-page_thumbnail_type",value:page.page_thumbnail_type}),_libs.React.createElement("input",{type:"hidden",name:"3dfb-pages-"+N+"-page_thumbnail_data-post_ID",value:page.page_thumbnail_data.post_ID})),_libs.React.createElement("div",{className:"thumbnail"},_Factory2.default.createThumbnail({type:page.page_thumbnail_type,hidden:hidden,id:page.page_thumbnail_data.post_ID,page:page,getThumbnail:getThumbnail}),_libs.React.createElement(_ThumbnailControl2.default,{post_ID:page.page_post_ID,type:page.page_thumbnail_type,id:page.page_thumbnail_data.post_ID,update:this.updateThumbnail.bind(this)})),_libs.React.createElement("div",{className:"page-title"},_libs.React.createElement("div",{className:"form-group"},_libs.React.createElement("label",{htmlFor:"3dfb-page-title-"+N},(0,_libs.tr)("Title")),_libs.React.createElement("input",{onChange:this.onTitleChange.bind(this),type:"text",className:"form-control",name:"3dfb-pages-"+N+"-page_title",value:page.page_title,id:"3dfb-page-title-"+N}))),this.renderDerivative(),_libs.React.createElement("div",{className:"page-number"},_libs.React.createElement("div",{className:"form-group"},_libs.React.createElement("label",{htmlFor:"3dfb-page-number-"+N},(0,_libs.tr)("Page number")),_libs.React.createElement("select",{id:"3dfb-page-number-"+N,value:page.page_number,onChange:this.onPageNumberChange.bind(this),className:"form-control",name:"3dfb-pages-"+N+"-page_number"},Array(pages).fill().map(function(_,i){return _libs.React.createElement("option",{value:i,key:i},i+1)})))),_libs.React.createElement("div",{className:"css-layer"+showAdvancedClass},_libs.React.createElement("div",{className:"meta-header"},(0,_libs.tr)("CSS Layer")),_libs.React.createElement("div",{className:"form-group"},_libs.React.createElement("label",{htmlFor:"3dfb-page-css_layer-css-"+N},(0,_libs.tr)("CSS")),_libs.React.createElement("textarea",{id:"3dfb-page-css_layer-css-"+N,name:"3dfb-pages-"+N+"-page_meta_data-css_layer-css",onChange:this.onPageCssLayerCssChange.bind(this),className:"form-control",value:page.page_meta_data.css_layer.css})),_libs.React.createElement("div",{className:"form-group"},_libs.React.createElement("label",{htmlFor:"3dfb-page-css_layer-html-"+N},(0,_libs.tr)("HTML")),_libs.React.createElement("textarea",{id:"3dfb-page-css_layer-html-"+N,name:"3dfb-pages-"+N+"-page_meta_data-css_layer-html",onChange:this.onPageCssLayerHtmlChange.bind(this),className:"form-control",value:page.page_meta_data.css_layer.html})),_libs.React.createElement("div",{className:"form-group"},_libs.React.createElement("label",{htmlFor:"3dfb-page-css_layer-js-"+N},(0,_libs.tr)("Java Script")),_libs.React.createElement("textarea",{id:"3dfb-page-css_layer-js-"+N,name:"3dfb-pages-"+N+"-page_meta_data-css_layer-js",onChange:this.onPageCssLayerJsChange.bind(this),className:"form-control",value:page.page_meta_data.css_layer.js}))),_libs.React.createElement("div",{className:"control text-right"},runVisualEditor?_libs.React.createElement("a",{onClick:this.visualEditor.bind(this)},(0,_libs.tr)("Visual editor")):null,_libs.React.createElement("a",{onClick:this.remove.bind(this)},(0,_libs.tr)("Remove"))))},Page}(_Component3.default);exports.default=Page},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _libs=__webpack_require__(0),_Component2=__webpack_require__(2),_Component3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_Component2),ThumbnailControl=function(_Component){function ThumbnailControl(){return _classCallCheck(this,ThumbnailControl),_possibleConstructorReturn(this,_Component.apply(this,arguments))}return _inherits(ThumbnailControl,_Component),ThumbnailControl.prototype.selectImage=function(e){e.preventDefault();var _props=this.props,update=_props.update,post_ID=_props.post_ID;wp.media.model.settings.post.id=post_ID;var frame=new wp.media.view.MediaFrame.Select({title:(0,_libs.tr)("Select image"),multiple:!1,library:{order:"DESC",orderby:"modified",type:"image",uploadedTo:null},button:{text:(0,_libs.tr)("Open")}});frame.on("select",function(){var file=frame.state().get("selection").first().toJSON();update("mediaImage",file.id)}),frame.open()},ThumbnailControl.prototype.setAuto=function(e){e.preventDefault(),(0,this.props.update)("auto")},ThumbnailControl.prototype.render=function(){var _props2=this.props,type=(_props2.id,_props2.type);return _libs.React.createElement("div",{className:"control text-right"},"auto"===type?_libs.React.createElement("a",{onClick:this.selectImage.bind(this)},(0,_libs.tr)("Select thumbnail")):"","mediaImage"===type?_libs.React.createElement("a",{onClick:this.selectImage.bind(this)},(0,_libs.tr)("Change thumbnail")):"","mediaImage"===type?_libs.React.createElement("a",{onClick:this.setAuto.bind(this)},(0,_libs.tr)("Auto thumbnail")):"")},ThumbnailControl}(_Component3.default);exports.default=ThumbnailControl},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0,exports.default=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_book=__webpack_require__(81),_BaseMathUtils=__webpack_require__(10),_BaseMathUtils2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_BaseMathUtils),BookPropsBuilder=function(){function BookPropsBuilder(onReady,style){_classCallCheck(this,BookPropsBuilder),this.onReady=onReady,this.defaults=(0,_book.props)(style)}return BookPropsBuilder.prototype.dispose=function(){},BookPropsBuilder.prototype.calcSize=function(width,height){var scale=_BaseMathUtils2.default.calcScale(width,height,this.defaults.width,this.defaults.height);return{width:scale*width,height:scale*height}},BookPropsBuilder.prototype.calcTexels=function(width,height){var sheet=this.defaults.sheet,scale=_BaseMathUtils2.default.calcScale(width,height,sheet.widthTexels,sheet.heightTexels);return{widthTexels:scale*width,heightTexels:scale*height}},BookPropsBuilder.prototype.calcProps=function(width,height){this.props=_extends({},this.defaults,{pages:this.pages},this.calcSize(width,height),{sheet:_extends({},this.defaults.sheet,this.calcTexels(width,height)),cover:_extends({},this.defaults.cover),page:_extends({},this.defaults.page)})},BookPropsBuilder.prototype.calcSheets=function(pages){return this.sheets=Math.ceil(Math.max(0,pages-4)/2)},BookPropsBuilder.prototype.getSheets=function(){return this.sheets},BookPropsBuilder.prototype.getProps=function(){return this.props},BookPropsBuilder.prototype.getPageCallback=function(){return this.binds.pageCallback},BookPropsBuilder.prototype.ready=function(){this.onReady&&this.onReady(this.getProps(),this.getSheets(),this.getPageCallback())},BookPropsBuilder}();exports.default=BookPropsBuilder},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _libs=__webpack_require__(1),_Component2=__webpack_require__(2),_Component3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_Component2),ConnectedComponent=function(_Component){function ConnectedComponent(){return _classCallCheck(this,ConnectedComponent),_possibleConstructorReturn(this,_Component.apply(this,arguments))}return _inherits(ConnectedComponent,_Component),ConnectedComponent.bindActionCreators=function(actions,dispatch){for(var binds={},_iterator=Object.keys(actions),_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if("break"===function(){if(_isArray){if(_i>=_iterator.length)return"break";_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)return"break";_ref=_i.value}var name=_ref;binds[name]=function(){var action=actions[name].apply(actions,arguments);action.payload.dispatch=dispatch,dispatch(action)}}())break}return binds},ConnectedComponent.prototype.renderContent=function(){return null},ConnectedComponent.prototype.isReady=function(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return-1===Object.values(props.code).findIndex(function(c){return void 0===c||c>0})},ConnectedComponent.prototype.render=function(){var code=this.props.code,codes=Object.values(code);return~codes.findIndex(function(c){return c})?_libs.React.createElement("div",{className:"padding-top"},_libs.React.createElement("div",{className:"alert alert-danger"},_libs.React.createElement("span",{className:"fa fa-exclamation-circle"})," "+(0,_libs.tr)("Sorry something went wrong with the server please try again"))):~codes.indexOf(void 0)?_libs.React.createElement("div",{className:"padding-top"},_libs.React.createElement("div",{className:"alert alert-info"},_libs.React.createElement("span",{className:"fa fa-info-circle"})," "+(0,_libs.tr)("Loading...")+"...")):this.renderContent()},ConnectedComponent}(_Component3.default);exports.default=ConnectedComponent},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var GraphUtils=function(){function GraphUtils(){_classCallCheck(this,GraphUtils)}return GraphUtils.createCanvas=function(width,height){var c=document.createElement("canvas");return width&&(c.width=width),height&&(c.height=height),c},GraphUtils.extrapolateLinear=function(x,y,xi){return y[0]+(y[1]-y[0])/(x[1]-x[0])*(xi-x[0])},GraphUtils.interpolate01=function(y1,y2,t){return GraphUtils.extrapolateLinear([0,1],[y1,y2],t)},GraphUtils.getColorBytes=function(color){return[color>>16&255,color>>8&255,255&color]},GraphUtils.inverseColor=function(color){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,bs=GraphUtils.getColorBytes(color),ibs=[255-bs[0],255-bs[1],255-bs[2]],nbs=[Math.round(GraphUtils.interpolate01(bs[0],ibs[0],t)),Math.round(GraphUtils.interpolate01(bs[1],ibs[1],t)),Math.round(GraphUtils.interpolate01(bs[2],ibs[2],t))];return GraphUtils.bytes2Color(nbs)},GraphUtils.color2Rgba=function(color,a){return GraphUtils.bytes2Rgba(GraphUtils.getColorBytes(color),a)},GraphUtils.bytes2Rgba=function(bs,a){return"rgba("+bs.join(",")+","+a+")"},GraphUtils.bytes2Color=function(bs){return bs[2]|bs[1]<<8|bs[0]<<16},GraphUtils}();exports.default=GraphUtils},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0,exports.default=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_libs=__webpack_require__(1),_Utils=__webpack_require__(15),_Utils2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_Utils);_libs.PDFJS.GlobalWorkerOptions.workerSrc=(window.PDFJS_LOCALE?PDFJS_LOCALE:GLOBAL_PATHS).pdfJsWorker,_libs.PDFJS.cMapUrl=(window.PDFJS_LOCALE?PDFJS_LOCALE:GLOBAL_PATHS).pdfJsCMapUrl,_libs.PDFJS.cMapPacked=!0,_libs.PDFJS.disableAutoFetch=!0,_libs.PDFJS.disableStream=!0,_libs.PDFJS.disableRange=!1,_libs.PDFJS.imageResourcesPath="images/pdfjs/",_libs.PDFJS.externalLinkTarget=_libs.PDFJS.LinkTarget.BLANK,_libs.PDFJS.disableFontFace=void 0;var Pdf=function(){function Pdf(src,loadingProgress,openOptions){var _this=this;_classCallCheck(this,Pdf),this.src=_Utils2.default.normalizeUrl(src),this.handlerQueue=[],this.progresData={loaded:-1,total:1},this.loadingProgress=loadingProgress,this.task=_libs.PDFJS.getDocument(_extends({url:this.src,rangeChunkSize:524288,cMapUrl:_libs.PDFJS.cMapUrl,cMapPacked:_libs.PDFJS.cMapPacked,disableAutoFetch:_libs.PDFJS.disableAutoFetch,disableStream:_libs.PDFJS.disableStream,disableRange:_libs.PDFJS.disableRange,imageResourcesPath:_libs.PDFJS.imageResourcesPath,externalLinkTarget:_libs.PDFJS.externalLinkTarget,disableFontFace:_libs.PDFJS.disableFontFace},openOptions)),this.task.onProgress=function(data){if(_this.loadingProgress){var cur=Math.floor(100*data.loaded/data.total),old=Math.floor(100*_this.progresData.loaded/_this.progresData.total);cur!==old&&(cur=isNaN(cur)?0:cur,cur=cur>100?100:cur,Promise.resolve().then(function(){_this.loadingProgress(cur)}))}_this.progresData=data},this.task.promise.then(function(handler){handler.numPages>1?Promise.all([handler.getPage(1),handler.getPage(2)]).then(function(pages){_this.init(handler,pages)}):_this.init(handler)}).catch(function(e){console.error(e),_this.errorHandler&&_this.errorHandler(e)})}return Pdf.prototype.init=function(handler,pages){if(this.handler=handler,pages){var p0s=Pdf.getPageSize(pages[0]),p1s=Pdf.getPageSize(pages[1]);this.doubledPages=p0s.width/p0s.height/(p1s.width/p1s.height)<.75}else this.doubledPages=!1;for(var done=Promise.resolve(handler),_iterator=this.handlerQueue.reverse(),_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if("break"===function(){if(_isArray){if(_i>=_iterator.length)return"break";_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)return"break";_ref=_i.value}var clb=_ref;done=done.then(function(handler){return clb(handler),handler})}())break}},Pdf.prototype.getPageType=function(n){return this.doubledPages&&0!==n&&n!==this.getPagesNum()-1?1&n?"left":"right":"full"},Pdf.prototype.getPage=function(n){return this.handler.getPage(this.doubledPages?Math.ceil(n/2)+1:n+1)},Pdf.prototype.getDestination=function(dest){var _this2=this,destPromise=void 0;return destPromise="string"==typeof dest?this.handler.getDestination(dest):Promise.resolve(dest),destPromise=destPromise.then(function(dest){return _this2.handler.getPageIndex(dest[0])}).then(function(number){return _this2.doubledPages?number<1?number:1+2*(number-1):number}).catch(function(){return console.error("Bad bookmark")})},Pdf.prototype.dispose=function(){this.handlerQueue.splice(0,this.handlerQueue.length),delete this.handler},Pdf.prototype.setLoadingProgressClb=function(clb){this.loadingProgress=clb},Pdf.prototype.setErrorHandler=function(eh){this.errorHandler=eh},Pdf.prototype.getPagesNum=function(){return this.handler?this.doubledPages?2*(this.handler.numPages-1):this.handler.numPages:void 0},Pdf.getPageSize=function(page){var x=page.view[2]-page.view[0],y=page.view[3]-page.view[1],a=page.rotate*Math.PI/180;return{width:Math.abs(x*Math.cos(a)-y*Math.sin(a)),height:Math.abs(x*Math.sin(a)+y*Math.cos(a))}},Pdf.prototype.getHandler=function(clb){this.handler?clb(this.handler):this.handlerQueue.push(clb)},Pdf}();exports.default=Pdf},function(module,exports,__webpack_require__){"use strict";function makeEmptyFunction(arg){return function(){return arg}}var emptyFunction=function(){};emptyFunction.thatReturns=makeEmptyFunction,emptyFunction.thatReturnsFalse=makeEmptyFunction(!1),emptyFunction.thatReturnsTrue=makeEmptyFunction(!0),emptyFunction.thatReturnsNull=makeEmptyFunction(null),emptyFunction.thatReturnsThis=function(){return this},emptyFunction.thatReturnsArgument=function(arg){return arg},module.exports=emptyFunction},function(module,exports,__webpack_require__){"use strict";var emptyObject={};module.exports=emptyObject},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__root_js__=__webpack_require__(113),Symbol=__WEBPACK_IMPORTED_MODULE_0__root_js__.a.Symbol;__webpack_exports__.a=Symbol},function(module,__webpack_exports__,__webpack_require__){"use strict";function isPlainObject(value){if(!__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__isObjectLike_js__.a)(value)||__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__baseGetTag_js__.a)(value)!=objectTag)return!1;var proto=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__getPrototype_js__.a)(value);if(null===proto)return!0;var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}var __WEBPACK_IMPORTED_MODULE_0__baseGetTag_js__=__webpack_require__(107),__WEBPACK_IMPORTED_MODULE_1__getPrototype_js__=__webpack_require__(109),__WEBPACK_IMPORTED_MODULE_2__isObjectLike_js__=__webpack_require__(114),objectTag="[object Object]",funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectCtorString=funcToString.call(Object);__webpack_exports__.a=isPlainObject},function(module,exports,__webpack_require__){var root=__webpack_require__(121),Symbol=root.Symbol;module.exports=Symbol},function(module,exports,__webpack_require__){module.exports=__webpack_require__(126)()},function(module,exports,__webpack_require__){"use strict";module.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(128)},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _propTypes=__webpack_require__(32),_propTypes2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_propTypes);exports.default=_propTypes2.default.shape({subscribe:_propTypes2.default.func.isRequired,dispatch:_propTypes2.default.func.isRequired,getState:_propTypes2.default.func.isRequired})},function(module,exports,__webpack_require__){"use strict";function warning(message){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(message);try{throw new Error(message)}catch(e){}}exports.__esModule=!0,exports.default=warning},function(module,exports,__webpack_require__){"use strict";function ReactComponent(props,context,updater){this.props=props,this.context=context,this.refs=emptyObject,this.updater=updater||ReactNoopUpdateQueue}function ReactPureComponent(props,context,updater){this.props=props,this.context=context,this.refs=emptyObject,this.updater=updater||ReactNoopUpdateQueue}function ComponentDummy(){}var _prodInvariant=__webpack_require__(12),_assign=__webpack_require__(9),ReactNoopUpdateQueue=__webpack_require__(40),emptyObject=(__webpack_require__(41),__webpack_require__(28));__webpack_require__(8),__webpack_require__(142);ReactComponent.prototype.isReactComponent={},ReactComponent.prototype.setState=function(partialState,callback){"object"!=typeof partialState&&"function"!=typeof partialState&&null!=partialState&&_prodInvariant("85"),this.updater.enqueueSetState(this,partialState),callback&&this.updater.enqueueCallback(this,callback,"setState")},ReactComponent.prototype.forceUpdate=function(callback){this.updater.enqueueForceUpdate(this),callback&&this.updater.enqueueCallback(this,callback,"forceUpdate")};ComponentDummy.prototype=ReactComponent.prototype,ReactPureComponent.prototype=new ComponentDummy,ReactPureComponent.prototype.constructor=ReactPureComponent,_assign(ReactPureComponent.prototype,ReactComponent.prototype),ReactPureComponent.prototype.isPureReactComponent=!0,module.exports={Component:ReactComponent,PureComponent:ReactPureComponent}},function(module,exports,__webpack_require__){"use strict";var ReactCurrentOwner={current:null};module.exports=ReactCurrentOwner},function(module,exports,__webpack_require__){"use strict";var REACT_ELEMENT_TYPE="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;module.exports=REACT_ELEMENT_TYPE},function(module,exports,__webpack_require__){"use strict";var ReactNoopUpdateQueue=(__webpack_require__(16),{isMounted:function(publicInstance){return!1},enqueueCallback:function(publicInstance,callback){},enqueueForceUpdate:function(publicInstance){},enqueueReplaceState:function(publicInstance,completeState){},enqueueSetState:function(publicInstance,partialState){}});module.exports=ReactNoopUpdateQueue},function(module,exports,__webpack_require__){"use strict";var canDefineProperty=!1;module.exports=canDefineProperty},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(135)},function(module,__webpack_exports__,__webpack_require__){"use strict";function compose(){for(var _len=arguments.length,funcs=Array(_len),_key=0;_key<_len;_key++)funcs[_key]=arguments[_key];return 0===funcs.length?function(arg){return arg}:1===funcs.length?funcs[0]:funcs.reduce(function(a,b){return function(){return a(b.apply(void 0,arguments))}})}__webpack_exports__.a=compose},function(module,__webpack_exports__,__webpack_require__){"use strict";function createStore(reducer,preloadedState,enhancer){function ensureCanMutateNextListeners(){nextListeners===currentListeners&&(nextListeners=currentListeners.slice())}function getState(){return currentState}function subscribe(listener){if("function"!=typeof listener)throw new Error("Expected listener to be a function.");var isSubscribed=!0;return ensureCanMutateNextListeners(),nextListeners.push(listener),function(){if(isSubscribed){isSubscribed=!1,ensureCanMutateNextListeners();var index=nextListeners.indexOf(listener);nextListeners.splice(index,1)}}}function dispatch(action){if(!__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_lodash_es_isPlainObject__.a)(action))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===action.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(isDispatching)throw new Error("Reducers may not dispatch actions.");try{isDispatching=!0,currentState=currentReducer(currentState,action)}finally{isDispatching=!1}for(var listeners=currentListeners=nextListeners,i=0;i<listeners.length;i++){(0,listeners[i])()}return action}function replaceReducer(nextReducer){if("function"!=typeof nextReducer)throw new Error("Expected the nextReducer to be a function.");currentReducer=nextReducer,dispatch({type:ActionTypes.INIT})}function observable(){var _ref,outerSubscribe=subscribe;return _ref={subscribe:function(observer){function observeState(){observer.next&&observer.next(getState())}if("object"!=typeof observer)throw new TypeError("Expected the observer to be an object.");return observeState(),{unsubscribe:outerSubscribe(observeState)}}},_ref[__WEBPACK_IMPORTED_MODULE_1_symbol_observable__.a]=function(){return this},_ref}var _ref2;if("function"==typeof preloadedState&&void 0===enhancer&&(enhancer=preloadedState,preloadedState=void 0),void 0!==enhancer){if("function"!=typeof enhancer)throw new Error("Expected the enhancer to be a function.");return enhancer(createStore)(reducer,preloadedState)}if("function"!=typeof reducer)throw new Error("Expected the reducer to be a function.");var currentReducer=reducer,currentState=preloadedState,currentListeners=[],nextListeners=currentListeners,isDispatching=!1;return dispatch({type:ActionTypes.INIT}),_ref2={dispatch:dispatch,subscribe:subscribe,getState:getState,replaceReducer:replaceReducer},_ref2[__WEBPACK_IMPORTED_MODULE_1_symbol_observable__.a]=observable,_ref2}__webpack_require__.d(__webpack_exports__,"b",function(){return ActionTypes}),__webpack_exports__.a=createStore;var __WEBPACK_IMPORTED_MODULE_0_lodash_es_isPlainObject__=__webpack_require__(30),__WEBPACK_IMPORTED_MODULE_1_symbol_observable__=__webpack_require__(148),ActionTypes={INIT:"@@redux/INIT"}},function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0__createStore__=__webpack_require__(44),__WEBPACK_IMPORTED_MODULE_1__combineReducers__=__webpack_require__(147),__WEBPACK_IMPORTED_MODULE_2__bindActionCreators__=__webpack_require__(146),__WEBPACK_IMPORTED_MODULE_3__applyMiddleware__=__webpack_require__(145),__WEBPACK_IMPORTED_MODULE_4__compose__=__webpack_require__(43);__webpack_require__(46);__webpack_require__.d(__webpack_exports__,"createStore",function(){return __WEBPACK_IMPORTED_MODULE_0__createStore__.a}),__webpack_require__.d(__webpack_exports__,"combineReducers",function(){return __WEBPACK_IMPORTED_MODULE_1__combineReducers__.a}),__webpack_require__.d(__webpack_exports__,"bindActionCreators",function(){return __WEBPACK_IMPORTED_MODULE_2__bindActionCreators__.a}),__webpack_require__.d(__webpack_exports__,"applyMiddleware",function(){return __WEBPACK_IMPORTED_MODULE_3__applyMiddleware__.a}),__webpack_require__.d(__webpack_exports__,"compose",function(){return __WEBPACK_IMPORTED_MODULE_4__compose__.a})},function(module,__webpack_exports__,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _libs=__webpack_require__(0),_reactRedux=__webpack_require__(17),_Edit=__webpack_require__(58),_Edit2=_interopRequireDefault(_Edit),_PageEditor=__webpack_require__(66),_PageEditor2=_interopRequireDefault(_PageEditor),_store=__webpack_require__(78),_store2=_interopRequireDefault(_store),jNode=(0,_libs.$)("#"+FB3D_ADMIN_LOCALE.editMountNode),frame=(0,_libs.$)('<iframe class="fb3d-mount-frame" scrolling="no"></iframe>').appendTo(jNode),pageEditor=(0,_libs.$)('<div class="fb3d">').appendTo(jNode),data=(0,_libs.$)("<div>").appendTo(jNode),wnd=frame[0].contentWindow,doc=frame[0].contentDocument,app=(0,_libs.$)("<div>").appendTo(doc.body),pageEditorRef=_libs.React.createRef(),bookEditor=null;wnd.stop&&wnd.stop(),FB3D_ADMIN_LOCALE.styles.forEach(function(url){return(0,_libs.$)('<link rel="stylesheet" href="'+url+'">').appendTo(doc.head)}),_libs.ReactDOM.render(_libs.React.createElement(_reactRedux.Provider,{store:_store2.default},_libs.React.createElement(_Edit2.default,{returnRef:function(ref){return bookEditor=ref},id:jNode.attr("data-id"),visualEditor:pageEditorRef})),app[0]),_libs.ReactDOM.render(_libs.React.createElement(_PageEditor2.default,{ref:pageEditorRef}),pageEditor[0]),(0,_libs.$)("form#post").on("submit",function(e){if(!bookEditor.canSave())return!1;data.html("");var ob={};(0,_libs.$)(doc).find("input,textarea,select").each(function(_,i){0===i.name.indexOf("3dfb-")&&(ob[i.name]=i.value)}),(0,_libs.$)('<input type="hidden" name="3dfb-data">').appendTo(data)[0].value=JSON.stringify(ob).replace(/"/g,"&x22").replace(/'/g,"&x27").replace(/\\/g,"&x5c")}),setInterval(function(){frame[0].height=Math.max(app.height()+100,350)},100)},function(module,exports,__webpack_require__){"use strict";Array.prototype.fill||(Array.prototype.fill=function(value){if(null==this)throw new TypeError("this is null or not defined");for(var O=Object(this),len=O.length>>>0,start=arguments[1],relativeStart=start>>0,k=relativeStart<0?Math.max(len+relativeStart,0):Math.min(relativeStart,len),end=arguments[2],relativeEnd=void 0===end?len:end>>0,final=relativeEnd<0?Math.max(len+relativeEnd,0):Math.min(relativeEnd,len);k<final;)O[k]=value,k++;return O}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(predicate){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof predicate)throw new TypeError("predicate must be a function");for(var value,list=Object(this),length=list.length>>>0,thisArg=arguments[1],i=0;i<length;i++)if(value=list[i],predicate.call(thisArg,value,i,list))return value}}),Array.prototype.findIndex||(Array.prototype.findIndex=function(predicate){if(null==this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof predicate)throw new TypeError("predicate must be a function");for(var value,list=Object(this),length=list.length>>>0,thisArg=arguments[1],i=0;i<length;i++)if(value=list[i],predicate.call(thisArg,value,i,list))return i;return-1}),Object.values||(Object.values=function(O){return Object.keys(O).map(function(name){return O[name]})||[]}),RegExp.escape||(RegExp.escape=function(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}),String.prototype.replaceAll||(String.prototype.replaceAll=function(search,replace){return this.replace(new RegExp(RegExp.escape(search),"g"),replace)}),String.prototype.fb3dQFilter||(String.prototype.fb3dQFilter=function(){return this.replace(/(\n|\t|  )/g,"")})},function(module,exports,__webpack_require__){"use strict";function update(edit){return{type:ACTIONS.UPDATE_EDIT,payload:{edit:edit}}}exports.__esModule=!0,exports.update=update;var _ACTION_TYPES=__webpack_require__(3),ACTIONS=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(_ACTION_TYPES)},function(module,exports,__webpack_require__){"use strict";function read(id){return{type:ACTIONS.READ_MEDIA_IMAGE,payload:{id:id}}}exports.__esModule=!0,exports.read=read;var _ACTION_TYPES=__webpack_require__(3),ACTIONS=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(_ACTION_TYPES)},function(module,exports,__webpack_require__){"use strict";function read(id){return{type:ACTIONS.READ_POST_PAGES,payload:{id:id}}}function add(pages){return{type:ACTIONS.ADD_POST_PAGES,payload:{pages:pages}}}function remove(pages){return{type:ACTIONS.REMOVE_POST_PAGES,payload:{pages:pages}}}function update(oldPage,newPage){return{type:ACTIONS.UPDATE_POST_PAGE,payload:{oldPage:oldPage,newPage:newPage}}}function setVisiblePage(visiblePage){return{type:ACTIONS.VISIBLE_POST_PAGES,payload:{visiblePage:visiblePage}}}function setItemsPerPage(itemsPerPage){return{type:ACTIONS.ITEMS_POST_PAGES,payload:{itemsPerPage:itemsPerPage}}}function setOrderImporting(orderImporting){return{type:ACTIONS.ORDER_IMPORTING,payload:{orderImporting:orderImporting}}}exports.__esModule=!0,exports.read=read,exports.add=add,exports.remove=remove,exports.update=update,exports.setVisiblePage=setVisiblePage,exports.setItemsPerPage=setItemsPerPage,exports.setOrderImporting=setOrderImporting;var _ACTION_TYPES=__webpack_require__(3),ACTIONS=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(_ACTION_TYPES)},function(module,exports,__webpack_require__){"use strict";function read(id){return{type:ACTIONS.READ_POST,payload:{id:id}}}function update(post){return{type:ACTIONS.UPDATE_POST,payload:{post:post}}}function setDefProps(defProps){return{type:ACTIONS.SET_DEF_PROPS,payload:{defProps:defProps}}}exports.__esModule=!0,exports.read=read,exports.update=update,exports.setDefProps=setDefProps;var _ACTION_TYPES=__webpack_require__(3),ACTIONS=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(_ACTION_TYPES)},function(module,exports,__webpack_require__){"use strict";function add(key,element){return{type:ACTIONS.ADD_RENDERED_THUMBNAIL,payload:{key:key,element:element}}}exports.__esModule=!0,exports.add=add;var _ACTION_TYPES=__webpack_require__(3),ACTIONS=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(_ACTION_TYPES)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_Props2=(__webpack_require__(0),__webpack_require__(7)),_Props3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_Props2),BookProps=function(_Props){function BookProps(){return _classCallCheck(this,BookProps),_possibleConstructorReturn(this,_Props.apply(this,arguments))}return _inherits(BookProps,_Props),BookProps.prototype.getDivClassName=function(){return"book-props"},BookProps.prototype.getFullName=function(name){return"3dfb-post-props-"+name},BookProps.prototype.setProperty=function(name,value){var _props=this.props,post=_props.post,update=_props.update,newPost=_extends({},post,{props:_extends({},post.props)});newPost.props[name]=value,update(newPost)},BookProps}(_Props3.default);exports.default=BookProps},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_libs=__webpack_require__(0),_Props2=__webpack_require__(7),_Props3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_Props2),ControlCommandProps=function(_Props){function ControlCommandProps(){return _classCallCheck(this,ControlCommandProps),_possibleConstructorReturn(this,_Props.apply(this,arguments))}return _inherits(ControlCommandProps,_Props),ControlCommandProps.prototype.getDivClassName=function(){return"control-props"},ControlCommandProps.prototype.getFullName=function(name){return"3dfb-post-controlProps-actions-"+this.props.name+"-"+name},ControlCommandProps.prototype.getLabel=function(name){return(0,_libs.tr)(name)},ControlCommandProps.prototype.setProperty=function(name,value){var _props=this.props,post=_props.post,update=_props.update,newPost=_extends({},post,{controlProps:_extends({},post.controlProps,{actions:_extends({},post.controlProps.actions)})});newPost.controlProps.actions[this.props.name]=_extends({},newPost.controlProps.actions[this.props.name]),newPost.controlProps.actions[this.props.name][name]=value,update(newPost)},ControlCommandProps}(_Props3.default);exports.default=ControlCommandProps},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _libs=__webpack_require__(0),_Component2=__webpack_require__(2),_Component3=_interopRequireDefault(_Component2),_ControlCommandProps=__webpack_require__(55),_ControlCommandProps2=_interopRequireDefault(_ControlCommandProps),ControlCommands=function(_Component){function ControlCommands(){return _classCallCheck(this,ControlCommands),_possibleConstructorReturn(this,_Component.apply(this,arguments))}return _inherits(ControlCommands,_Component),ControlCommands.prototype.render=function(){var _props=this.props,props=_props.props,defs=_props.defs,info=_props.info,post=_props.post,update=_props.update,showAdvanced=_props.showAdvanced;return _libs.React.createElement("div",{className:"actions"}," ",Object.keys(defs.actions).map(function(name){return _libs.React.createElement("div",null,_libs.React.createElement("div",{className:"prop-caption"},_libs.React.createElement("h2",null,name),_libs.React.createElement("div",{className:"h2-description"},info.actions[name].description)),_libs.React.createElement(_ControlCommandProps2.default,{props:props.actions[name]||{},post:post,update:update,defs:defs.actions[name],info:info.actions[name],name:name,showAdvanced:showAdvanced}))})," ")},ControlCommands}(_Component3.default);exports.default=ControlCommands},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_Props2=(__webpack_require__(0),__webpack_require__(7)),_Props3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_Props2),CoverProps=function(_Props){function CoverProps(){return _classCallCheck(this,CoverProps),_possibleConstructorReturn(this,_Props.apply(this,arguments))}return _inherits(CoverProps,_Props),CoverProps.prototype.getDivClassName=function(){return"cover-props"},CoverProps.prototype.getFullName=function(name){return"3dfb-post-props-cover-"+name},CoverProps.prototype.setProperty=function(name,value){var _props=this.props,post=_props.post,update=_props.update,newPost=_extends({},post,{props:_extends({},post.props,{cover:_extends({},post.props.cover)})});newPost.props.cover[name]=value,update(newPost)},CoverProps}(_Props3.default);exports.default=CoverProps},function(module,exports,__webpack_require__){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _dec,_class,_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_libs=__webpack_require__(0),_reactRedux=__webpack_require__(17),_ConnectedComponent2=__webpack_require__(24),_ConnectedComponent3=_interopRequireDefault(_ConnectedComponent2),_GraphUtils=__webpack_require__(25),_GraphUtils2=_interopRequireDefault(_GraphUtils),_ImageFactory=__webpack_require__(14),_ImageFactory2=_interopRequireDefault(_ImageFactory),_PdfBookPropsBuilder=__webpack_require__(80),_PdfBookPropsBuilder2=_interopRequireDefault(_PdfBookPropsBuilder),_ClbBookPropsBuilder=__webpack_require__(79),_ClbBookPropsBuilder2=_interopRequireDefault(_ClbBookPropsBuilder),_General=__webpack_require__(59),_General2=_interopRequireDefault(_General),_Pages=__webpack_require__(68),_Pages2=_interopRequireDefault(_Pages),_BookProps=__webpack_require__(54),_BookProps2=_interopRequireDefault(_BookProps),_SheetProps=__webpack_require__(70),_SheetProps2=_interopRequireDefault(_SheetProps),_CoverProps=__webpack_require__(57),_CoverProps2=_interopRequireDefault(_CoverProps),_PageProps=__webpack_require__(67),_PageProps2=_interopRequireDefault(_PageProps),_ControlCommands=__webpack_require__(56),_ControlCommands2=_interopRequireDefault(_ControlCommands),_Outline=__webpack_require__(63),_Outline2=_interopRequireDefault(_Outline),_edit=__webpack_require__(49),editActions=_interopRequireWildcard(_edit),_post=__webpack_require__(52),postActions=_interopRequireWildcard(_post),_pages=__webpack_require__(51),pagesActions=_interopRequireWildcard(_pages),_renderedThumbnails=__webpack_require__(53),renderedThumbnailsActions=_interopRequireWildcard(_renderedThumbnails),_ThumbnailRender=__webpack_require__(71),_ThumbnailRender2=_interopRequireDefault(_ThumbnailRender),Edit=(_dec=(0,_reactRedux.connect)(function(state){return{post:state.post.post,defProps:state.post.defProps,defPropsInfo:state.post.defPropsInfo,defControlProps:state.post.defControlProps,defControlPropsInfo:state.post.defControlPropsInfo,code:{post:state.post.code,pages:state.pages.code},pages:state.pages.pages,getThumbnail:function(key){return state.renderedThumbnails.get(state.renderedThumbnails.renderedThumbnails,key)},visiblePage:state.pages.visiblePage,itemsPerPage:state.pages.itemsPerPage,orderImporting:state.pages.orderImporting,error:state.edit.error,activeTab:state.edit.activeTab,stored:state.edit.stored}}))(_class=function(_ConnectedComponent){function Edit(){return _classCallCheck(this,Edit),_possibleConstructorReturn(this,_ConnectedComponent.apply(this,arguments))}return _inherits(Edit,_ConnectedComponent),Edit.prototype.update=function(props){var _this2=this,needPagesUpdate=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.isReady(props)){var post=props.post,pages=props.pages;"pdf"===post.type&&""!=post.data.guid&&(-1!==post.data.post_ID?this.builder.id!==post.data.post_ID:this.builder.guid!==post.data.guid)&&-2!==post.data.post_ID&&(this.builder.id=post.data.post_ID,this.builder.guid=post.data.guid,this.setError(""),this.postActions.setDefProps({sheet:{},cover:{},page:{}}),this.builder.bin=new _PdfBookPropsBuilder2.default(post.data.guid,function(defProps,sheets,pageClb){var pdf=_this2.builder.bin.pdf;if(_this2.builder.pdfPages=pdf.getPagesNum(),_this2.postActions.setDefProps(defProps),_this2.postActions.update(_extends({},post,{data:_extends({},post.data,{pdf_pages:_this2.builder.pdfPages})})),needPagesUpdate){_this2.pagesActions.remove(pages);for(var newPages=[],bookId=-1===post.data.post_ID?Math.random():0,p=0;p<_this2.builder.pdfPages;++p)newPages.push({bookId:bookId,page_title:"",page_source_type:"pdf",page_source_data:{post_ID:post.data.post_ID,guid:post.data.guid,interactive:!1,number:p},page_number:p});_this2.pagesActions.add(newPages)}},post.book_style),this.builder.bin.pdf.setErrorHandler(function(e){return _this2.setError(e.message)})),"custom"===post.type&&pages.length&&pages[0].page_source_data.post_ID!==this.builder.id&&(this.builder.id=pages[0].page_source_data.post_ID,this.builder.pdfPages=0,this.builder.bin=new _ClbBookPropsBuilder2.default({wnd:window,doc:document},function(n){return{type:pages[n].page_source_type,src:pages[n].page_source_data.guid}},pages.length,function(defProps,sheets,pageClb){_this2.postActions.setDefProps(defProps)},post.book_style))}},Edit.prototype.componentDidMount=function(){this.builder={pdfPages:0},this.props.returnRef(this),this.editActions=_ConnectedComponent3.default.bindActionCreators(editActions,this.props.dispatch),this.postActions=_ConnectedComponent3.default.bindActionCreators(postActions,this.props.dispatch),this.postActions.read(this.props.id),this.pagesActions=_ConnectedComponent3.default.bindActionCreators(pagesActions,this.props.dispatch),this.pagesActions.read(this.props.id),this.renderedThumbnailsActions=_ConnectedComponent3.default.bindActionCreators(renderedThumbnailsActions,this.props.dispatch);var c=_GraphUtils2.default.createCanvas();this.imageFactory=new _ImageFactory2.default({wnd:window,doc:document,renderCanvas:c,renderCanvasCtx:c.getContext("2d",{desynchronized:!1})}),this.update(this.props)},Edit.prototype.componentWillReceiveProps=function(nextProps){var data=this.props.post.data,nextData=nextProps.post.data;this.update(nextProps,!!(nextData&&"none"===nextData.pages_customization||data&&nextData&&""!=data.guid&&data.guid!==nextData.guid))},Edit.prototype.isGeneralReady=function(){var post=this.props.post;return"custom"===post.type||0!=post.data.post_ID&&-2!=post.data.post_ID},Edit.prototype.setActiveTab=function(activeTab){this.editActions.update({activeTab:activeTab})},Edit.prototype.onShowAdvanced=function(e){this.editActions.update({stored:_extends({},this.props.stored,{showAdvanced:e.target.checked})})},Edit.prototype.runVisualEditor=function(n){var _this3=this,defProps=this.props.defProps,page=this.props.pages[n],_ref=this.builder.bin||{},pdf=_ref.pdf,hScale=void 0===defProps.width?void 0:defProps.height/defProps.width,height=1024*hScale,wrapper=this.imageFactory.build({type:page.page_source_type,src:pdf||page.page_source_data.guid},parseInt(page.page_source_data.number),1024,height);return new Promise(function(resolve){wrapper.onChange=function(canvas){wrapper.dispose(),resolve(),_this3.props.visualEditor.current.show({src:canvas.toDataURL("image/png"),n:n,html:page.page_meta_data.css_layer.html,width:1024,height:height},_this3)}})},Edit.prototype.saveVisualEditorPage=function(vePage){var page=this.props.pages[vePage.n],newPage=_extends({},page,{page_meta_data:_extends({},page.page_meta_data,{css_layer:_extends({},page.page_meta_data.css_layer,{html:vePage.html})})});this.pagesActions.update(page,newPage)},Edit.prototype.getPagesNumber=function(){return this.props.pages.length},Edit.prototype.setError=function(error){this.editActions.update({error:error})},Edit.prototype.filter=function(ob,props){for(var _iterator=props,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref2;if(_isArray){if(_i>=_iterator.length)break;_ref2=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref2=_i.value}delete ob[_ref2]}return ob},Edit.prototype.canSave=function(){var r=!0,post=this.props.post;if(-2===post.data.post_ID){var update=this.postActions.update;r=!1,update(_extends({},post,{data:{guid:post.data.guid,post_ID:-1,pages_customization:"none"}}))}return r},Edit.prototype.renderContent=function(){var _props=this.props,post=_props.post,pages=_props.pages,visiblePage=_props.visiblePage,itemsPerPage=_props.itemsPerPage,orderImporting=_props.orderImporting,getThumbnail=_props.getThumbnail,defProps=_props.defProps,defPropsInfo=_props.defPropsInfo,activeTab=_props.activeTab,stored=_props.stored,error=_props.error,defControlProps=_props.defControlProps,defControlPropsInfo=_props.defControlPropsInfo,showAdvanced=stored.showAdvanced,_ref3=this.builder.bin||{},pdf=_ref3.pdf,update=this.postActions.update,isPages=this.isGeneralReady(),pagesUI=isPages?_libs.React.createElement(_Pages2.default,_extends({},this.pagesActions,{updatePost:update,getThumbnail:getThumbnail,runVisualEditor:this.runVisualEditor.bind(this),hidden:"pages"!==activeTab,post:post,pages:pages,pdfPages:this.builder.pdfPages,visiblePage:visiblePage,itemsPerPage:itemsPerPage,orderImporting:orderImporting,showAdvanced:showAdvanced})):null,isProps=void 0!==defProps.width,wScale=void 0===defProps.width?void 0:defProps.width/defProps.height;return _libs.React.createElement("div",{className:"fb3d"},_libs.React.createElement("div",{className:"tabs"},_libs.React.createElement("div",{className:"show-advanced"},_libs.React.createElement("div",{className:"checkbox"},_libs.React.createElement("label",null,_libs.React.createElement("input",{type:"checkbox",onChange:this.onShowAdvanced.bind(this),checked:showAdvanced})," ",(0,_libs.tr)("show advanced options")))),_libs.React.createElement("ul",{className:"nav"},_libs.React.createElement("li",{className:this.tabClass("general")},_libs.React.createElement("a",{onClick:this.switchTab.bind(this),data:"general"},(0,_libs.tr)("General"))),_libs.React.createElement("li",{className:this.tabClass("pages",!isPages)},_libs.React.createElement("a",{onClick:this.switchTab.bind(this),data:"pages"},(0,_libs.tr)("Pages"))),_libs.React.createElement("li",{className:this.tabClass("book-props",!isProps)},_libs.React.createElement("a",{onClick:this.switchTab.bind(this),data:"book-props"},(0,_libs.tr)("Book properties"))),_libs.React.createElement("li",{className:this.tabClass("sheet-props",!isProps)},_libs.React.createElement("a",{onClick:this.switchTab.bind(this),data:"sheet-props"},(0,_libs.tr)("Sheet properties"))),_libs.React.createElement("li",{className:this.tabClass("cover-props",!isProps)},_libs.React.createElement("a",{onClick:this.switchTab.bind(this),data:"cover-props"},(0,_libs.tr)("Cover properties"))),_libs.React.createElement("li",{className:this.tabClass("page-props",!isProps)},_libs.React.createElement("a",{onClick:this.switchTab.bind(this),data:"page-props"},(0,_libs.tr)("Page properties"))),_libs.React.createElement("li",{className:this.tabClass("control-props",!isProps)},_libs.React.createElement("a",{onClick:this.switchTab.bind(this),data:"control-props"},(0,_libs.tr)("Control properties"))),_libs.React.createElement("li",{className:this.tabClass("outline",!isProps)},_libs.React.createElement("a",{onClick:this.switchTab.bind(this),data:"outline"},(0,_libs.tr)("Bookmarks")))),_libs.React.createElement("div",{className:"content"},_libs.React.createElement("div",{className:this.tabClass("general")+"tab"},_libs.React.createElement(_General2.default,{post:post,page:pages[0],pages:pages,getThumbnail:getThumbnail,pagesActions:this.pagesActions,update:this.postActions.update,showAdvanced:showAdvanced})),_libs.React.createElement("div",{className:this.tabClass("pages")+"tab"},_libs.React.createElement(_ThumbnailRender2.default,{add:this.renderedThumbnailsActions.add,wScale:wScale,pdf:pdf,getThumbnail:getThumbnail,pages:pages,visiblePage:visiblePage,itemsPerPage:itemsPerPage},pagesUI)),_libs.React.createElement("div",{className:this.tabClass("book-props")+"tab"},_libs.React.createElement(_BookProps2.default,{props:post.props,post:post,update:update,defs:defProps,info:defPropsInfo,showAdvanced:showAdvanced})),_libs.React.createElement("div",{className:this.tabClass("sheet-props")+"tab"},_libs.React.createElement(_SheetProps2.default,{props:post.props.sheet,post:post,update:update,defs:defProps.sheet,info:defPropsInfo.sheet,showAdvanced:showAdvanced})),_libs.React.createElement("div",{className:this.tabClass("cover-props")+"tab"},_libs.React.createElement(_CoverProps2.default,{props:post.props.cover,post:post,update:update,defs:this.filter(_extends({},defProps.sheet,defProps.cover),["cornerDeviation"]),info:_extends({},defPropsInfo.sheet,defPropsInfo.cover),showAdvanced:showAdvanced})),_libs.React.createElement("div",{className:this.tabClass("page-props")+"tab"},_libs.React.createElement(_PageProps2.default,{props:post.props.page,post:post,update:update,defs:this.filter(_extends({},defProps.sheet,defProps.page),["cornerDeviation"]),info:_extends({},defPropsInfo.sheet,defPropsInfo.page),showAdvanced:showAdvanced})),_libs.React.createElement("div",{className:this.tabClass("control-props")+"tab"},_libs.React.createElement(_ControlCommands2.default,{props:post.controlProps,post:post,update:update,defs:defControlProps,info:defControlPropsInfo,showAdvanced:showAdvanced})),_libs.React.createElement("div",{className:this.tabClass("outline")+"tab"},_libs.React.createElement(_Outline2.default,{props:post.outline,post:post,update:update,showAdvanced:showAdvanced}))),!isProps&&isPages&&"pdf"===post.type?_libs.React.createElement("div",{className:"loading"},""!==error?error+" "+(0,_libs.tr)("See the debugging console for details (Ctrl+Shift+I in Chrome)."):(0,_libs.tr)("Please wait! The book is processing...")):null))},Edit}(_ConnectedComponent3.default))||_class;exports.default=Edit},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_libs=__webpack_require__(0),_Component2=__webpack_require__(2),_Component3=_interopRequireDefault(_Component2),_Factory=__webpack_require__(13),_Factory2=_interopRequireDefault(_Factory),_ThumbnailControl=__webpack_require__(22),_ThumbnailControl2=_interopRequireDefault(_ThumbnailControl),General=function(_Component){function General(){_classCallCheck(this,General);var _this=_possibleConstructorReturn(this,_Component.call(this));return _this.state={templateName:"",templateProcessing:!1},_this}return _inherits(General,_Component),General.prototype.switchBookType=function(e){var _props=this.props,pagesActions=_props.pagesActions,pages=_props.pages,post=_props.post,update=_props.update;if(post.type!==e.target.value&&update){pagesActions.remove(pages);update(_extends({},post,{data:{guid:"",post_ID:0,pages_customization:"all",pdf_pages:0},type:e.target.value}))}},General.prototype.onChangeReadyFunction=function(e){var _props2=this.props,post=_props2.post;(0,_props2.update)(_extends({},post,{ready_function:e.target.value}))},General.prototype.onChangeBookStyle=function(e){var _props3=this.props,post=_props3.post;(0,_props3.update)(_extends({},post,{book_style:e.target.value}))},General.prototype.onChangeBookTemplate=function(e){var _this2=this,update=this.props.update;update(_extends({},this.props.post,{book_template:e.target.value})),"none"!==e.target.value&&Promise.resolve().then(function(){update(_extends({},_this2.props.post,{book_style:"auto"}))})},General.prototype.selectPdf=function(e){e.preventDefault();var _props4=this.props,post=_props4.post,update=_props4.update;if(-2===post.data.post_ID)update(_extends({},post,{data:{guid:post.data.guid,post_ID:-1,pages_customization:"none"}}));else{wp.media.model.settings.post.id=post.ID;var frame=new wp.media.view.MediaFrame.Select({title:"Select PDF",multiple:!1,library:{order:"DESC",orderby:"modified",type:"application/pdf",uploadedTo:null},button:{text:"Open"}});frame.on("select",function(){var pdf=frame.state().get("selection").first().toJSON();update&&update(_extends({},post,{data:{guid:pdf.url,post_ID:pdf.id,pages_customization:"none"}}))}),frame.open()}},General.prototype.changePdfUrl=function(e){var _props5=this.props,post=_props5.post;(0,_props5.update)(_extends({},post,{data:{guid:e.target.value,post_ID:-2,pages_customization:"none"}}))},General.prototype.updateThumbnail=function(type){var id=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,_props6=this.props,post=_props6.post;(0,_props6.update)(_extends({},post,{thumbnail:_extends({},post.thumbnail,{type:type,data:_extends({},post.thumbnail.data,{post_ID:id})})}))},General.prototype.saveTemplate=function(){var _this3=this,name=this.state.templateName.trim(),lname=name.toLowerCase();if(lname!==(0,_libs.tr)("Saved").trim().toLowerCase())if(-1===["","default","none","auto"].indexOf(lname)&&-1===lname.indexOf('"')){var post=this.props.post;"none"!==post.book_template?this.setState({templateName:(0,_libs.tr)("Template book cannot have a template")}):(this.setState({templateProcessing:!0}),_libs.$.ajax({type:"post",dataType:"json",url:ajaxurl,data:{action:"fb3d_receive_book_template",fb3d_nonce:FB3D_ADMIN_LOCALE.nonce,template:{name:name,post:post},error:function(){_this3.setState({templateProcessing:!1,templateName:(0,_libs.tr)("Cannot save the template")})},success:function(d){_this3.setState({templateProcessing:!1,templateName:(0,_libs.tr)("Saved")})}}}))}else this.setState({templateName:(0,_libs.tr)('Name cannot be empty, "default", "none", "auto" or contain "')})},General.prototype.render=function(){var _this4=this,_props7=this.props,post=_props7.post,page=_props7.page,getThumbnail=_props7.getThumbnail,showAdvanced=_props7.showAdvanced,showAdvancedClass=showAdvanced?"":" hidden";return _libs.React.createElement("div",{className:"general"},_libs.React.createElement("div",{className:"hidden"},_libs.React.createElement("input",{type:"hidden",name:"3dfb-post-type",value:post.type}),_libs.React.createElement("input",{type:"hidden",name:"3dfb-post-thumbnail-data-post_ID",value:post.thumbnail.data.post_ID}),_libs.React.createElement("input",{type:"hidden",name:"3dfb-post-thumbnail-type",value:post.thumbnail.type})),_libs.React.createElement("div",{className:"thumbnail"},_Factory2.default.createThumbnail({type:"auto"===post.thumbnail.type?page?page.page_thumbnail_type:"auto":post.thumbnail.type,id:"auto"===post.thumbnail.type?page?page.page_thumbnail_data.post_ID:0:post.thumbnail.data.post_ID,page:page,getThumbnail:getThumbnail,name:"3dfb-autoThumbnail"}),_libs.React.createElement(_ThumbnailControl2.default,{post_ID:post.ID,type:post.thumbnail.type,id:post.thumbnail.data.post_ID,update:this.updateThumbnail.bind(this)})),_libs.React.createElement("div",{className:"form-group"},_libs.React.createElement("div",{id:"3dfb-page-type"},_libs.React.createElement("label",{htmlFor:"3dfb-page-type"},(0,_libs.tr)("Source")),_libs.React.createElement("div",{className:"radio"},_libs.React.createElement("label",null,_libs.React.createElement("input",{type:"radio",id:"3dfb-page-type",onChange:this.switchBookType.bind(this),value:"pdf",checked:"pdf"===post.type}),(0,_libs.tr)("PDF file"))),_libs.React.createElement("div",{className:"radio"},_libs.React.createElement("label",null,_libs.React.createElement("input",{type:"radio",onChange:this.switchBookType.bind(this),value:"custom",checked:"custom"===post.type}),(0,_libs.tr)("Images, HTMLs files")))),"custom"===post.type?null:_libs.React.createElement("div",{className:"input-group"},_libs.React.createElement("input",{type:"hidden",name:"3dfb-post-data-post_ID",value:post.data.post_ID}),_libs.React.createElement("input",{type:"text",onChange:this.changePdfUrl.bind(this),className:"form-control",placeholder:"PDF URL",name:"3dfb-post-data-guid",value:post.data.guid}),_libs.React.createElement("span",{className:"input-group-btn"},_libs.React.createElement("a",{onClick:this.selectPdf.bind(this),className:"btn btn-default"},(0,_libs.tr)(-2!==post.data.post_ID?"Select PDF":"Open"))))),_libs.React.createElement("div",{className:"form-group"},_libs.React.createElement("label",{htmlFor:"3dfb-book-style"},(0,_libs.tr)("Book style")),_libs.React.createElement("select",{id:"3dfb-book-style",className:"form-control",value:post.book_style,onChange:this.onChangeBookStyle.bind(this),name:"3dfb-post-book_style"},_libs.React.createElement("option",{value:"auto"},(0,_libs.tr)("Auto")),_libs.React.createElement("option",{value:"flat"},(0,_libs.tr)("Flat")),_libs.React.createElement("option",{value:"volume"},(0,_libs.tr)("Volumetric")),_libs.React.createElement("option",{value:"volume-unrolling"},(0,_libs.tr)("Volumetric & unrolling flip")),_libs.React.createElement("option",{value:"volume-paddings"},(0,_libs.tr)("Volumetric with paddings")),_libs.React.createElement("option",{value:"volume-paddings-unrolling"},(0,_libs.tr)("Volumetric with paddings & unrolling flip")))),_libs.React.createElement("div",{className:"form-group"+showAdvancedClass},_libs.React.createElement("label",{htmlFor:"3dfb-ready-function"},(0,_libs.tr)("Ready function")),_libs.React.createElement("div",{className:"description"},(0,_libs.tr)("function ready(scene) {/* code */} ready")),_libs.React.createElement("textarea",{id:"3dfb-ready-function",name:"3dfb-post-ready_function",onChange:this.onChangeReadyFunction.bind(this),className:"form-control"},post.ready_function)),_libs.React.createElement("div",{className:"form-group"+showAdvancedClass},_libs.React.createElement("label",{htmlFor:"3dfb-book-template"},(0,_libs.tr)("Book template")),_libs.React.createElement("select",{id:"3dfb-book-template",className:"form-control",value:post.book_template,onChange:this.onChangeBookTemplate.bind(this),name:"3dfb-post-book_template"},_libs.React.createElement("option",{value:"none"},(0,_libs.tr)("None")),_libs.React.createElement("option",{value:"default"},(0,_libs.tr)("Default")),FB3D_ADMIN_LOCALE.bookTemplates.map(function(name){return _libs.React.createElement("option",{value:name},name)}))),_libs.React.createElement("div",{className:"form-group"+showAdvancedClass},_libs.React.createElement("label",{htmlFor:"3dfb-save-template"},(0,_libs.tr)("Save this book as Template")),_libs.React.createElement("div",{className:"input-group"},_libs.React.createElement("input",{type:"text",className:"form-control",id:"3dfb-save-template",onChange:function(e){return _this4.setState({templateName:e.target.value})},placeholder:"Name",value:this.state.templateName}),_libs.React.createElement("span",{className:"input-group-btn"},_libs.React.createElement("a",{className:"btn btn-default"+(this.state.templateProcessing?" disabled":""),onClick:this.saveTemplate.bind(this)},(0,_libs.tr)("Save"))))))},General}(_Component3.default);exports.default=General},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_libs=__webpack_require__(0),_MediaPage2=__webpack_require__(20),_MediaPage3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_MediaPage2),HtmlPage=function(_MediaPage){function HtmlPage(){return _classCallCheck(this,HtmlPage),_possibleConstructorReturn(this,_MediaPage.apply(this,arguments))}return _inherits(HtmlPage,_MediaPage),HtmlPage.prototype.onInteractiveChange=function(e){var _props=this.props,page=_props.page;(0,_props.update)(page,_extends({},page,{page_source_data:_extends({},page.page_source_data,{interactive:e.target.checked?"1":"0"})}))},HtmlPage.prototype.renderMediaDerivative=function(){var page=this.props.page,N=page.page_number;return _libs.React.createElement("div",{className:"page-interactive"},_libs.React.createElement("div",{className:"checkbox"},_libs.React.createElement("label",null,_libs.React.createElement("input",{onChange:this.onInteractiveChange.bind(this),name:"3dfb-pages-"+N+"-page_source_data-interactive",value:page.page_source_data.interactive,checked:"1"===page.page_source_data.interactive,type:"checkbox"})," ",(0,_libs.tr)("interactive"))))},HtmlPage}(_MediaPage3.default);exports.default=HtmlPage},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _MediaPage2=(__webpack_require__(0),__webpack_require__(20)),_MediaPage3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_MediaPage2),ImagePage=function(_MediaPage){function ImagePage(){return _classCallCheck(this,ImagePage),_possibleConstructorReturn(this,_MediaPage.apply(this,arguments))}return _inherits(ImagePage,_MediaPage),ImagePage}(_MediaPage3.default);exports.default=ImagePage},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _dec,_class,_libs=__webpack_require__(0),_reactRedux=__webpack_require__(17),_ConnectedComponent2=__webpack_require__(24),_ConnectedComponent3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_ConnectedComponent2),_mediaImages=__webpack_require__(50),mediaImagesActions=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(_mediaImages),MediaImageThumbnail=(_dec=(0,_reactRedux.connect)(function(state){return{mediaImages:state.mediaImages.mediaImages,code:{mediaImages:state.mediaImages.code}}}))(_class=function(_ConnectedComponent){function MediaImageThumbnail(){return _classCallCheck(this,MediaImageThumbnail),_possibleConstructorReturn(this,_ConnectedComponent.apply(this,arguments))}return _inherits(MediaImageThumbnail,_ConnectedComponent),MediaImageThumbnail.prototype.getFromCache=function(){var _this2=this;return this.mediaImage&&this.mediaImage.id==this.props.id||(this.mediaImage=this.props.mediaImages.find(function(img){return img.id==_this2.props.id})),this.mediaImage},MediaImageThumbnail.prototype.componentDidMount=function(){this.mediaImagesActions=_ConnectedComponent3.default.bindActionCreators(mediaImagesActions,this.props.dispatch),this.props.id&&this.mediaImagesActions.read(this.props.id)},MediaImageThumbnail.prototype.componentWillReceiveProps=function(props){this.props.id!==props.id&&this.mediaImagesActions.read(props.id)},MediaImageThumbnail.prototype.fileName=function(path){var parts=path.replace(/\\/g,"/").split("/");return parts[parts.length-1]},MediaImageThumbnail.prototype.renderContent=function(){var res=null;if(!this.props.hidden){var mediaImage=this.getFromCache(),url=mediaImage?mediaImage.parent_url+this.fileName(mediaImage.file):FB3D_ADMIN_LOCALE.images+"thumbnail-not-found.png";res=_libs.React.createElement("img",{src:url})}return res},MediaImageThumbnail}(_ConnectedComponent3.default))||_class;exports.default=MediaImageThumbnail},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_libs=__webpack_require__(0),_Component2=__webpack_require__(2),_Component3=_interopRequireDefault(_Component2),_OutlineItem=__webpack_require__(64),_OutlineItem2=_interopRequireDefault(_OutlineItem),Outline=function(_Component){function Outline(){return _classCallCheck(this,Outline),_possibleConstructorReturn(this,_Component.apply(this,arguments))}return _inherits(Outline,_Component),Outline.prototype.change=function(cs,f){var r=f(cs);if(!r)for(var _iterator=cs,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}var c=_ref;if(r=f(c)){var i=cs.indexOf(c);cs=[].concat(cs),cs[i]=r,r=cs;break}if(r=this.change(c.items,f)){var _i2=cs.indexOf(c);cs=[].concat(cs),cs[_i2]=_extends({},c,{items:r}),r=cs;break}}return r},Outline.prototype.update=function(items){this.props.update(_extends({},this.props.post,{outline:items}))},Outline.prototype.add=function(items){this.update(this.change(this.props.props,function(is){var r=void 0;return items===is&&(r=[].concat(items,[{title:"",dstData:"",items:[]}])),r}))},Outline.prototype.remove=function(item){this.update(this.change(this.props.props,function(is){var r=void 0,i=void 0;return is.indexOf&&~(i=is.indexOf(item))&&(r=[].concat(is),r.splice(i,1)),r}))},Outline.prototype.set=function(item,name,vl){this.update(this.change(this.props.props,function(i){var r=void 0;return item===i&&(r=_extends({},i),r[name]=vl),r}))},Outline.prototype.render=function(){var _props=this.props,props=_props.props,add=(_props.post,_props.update,_props.showAdvanced,this.add.bind(this)),remove=this.remove.bind(this),set=this.set.bind(this);return _libs.React.createElement("div",{className:"outline"},_libs.React.createElement("input",{name:"3dfb-post-outline",type:"hidden",value:JSON.stringify(props)}),_libs.React.createElement("a",{onClick:function(e){return e.preventDefault(),add(props)}},(0,_libs.tr)("Add")),_libs.React.createElement("div",{className:"items"},props.map(function(item){return _libs.React.createElement(_OutlineItem2.default,{props:item,add:add,remove:remove,set:set})})))},Outline}(_Component3.default);exports.default=Outline},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _libs=__webpack_require__(0),_Component2=__webpack_require__(2),_Component3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_Component2),OutlineItem=function(_Component){function OutlineItem(){return _classCallCheck(this,OutlineItem),_possibleConstructorReturn(this,_Component.apply(this,arguments))}return _inherits(OutlineItem,_Component),OutlineItem.prototype.isNumber=function(n){var tvl=(n+"").trim();return parseInt(tvl)==tvl},OutlineItem.prototype.render=function(){var _this2=this,_props=this.props,props=_props.props,add=_props.add,remove=_props.remove,set=_props.set;return _libs.React.createElement("div",{className:"item"},_libs.React.createElement("div",{className:"fields"},_libs.React.createElement("div",{className:"inputs"},_libs.React.createElement("input",{className:"title",type:"text",placeholder:(0,_libs.tr)("Title"),value:props.title,onChange:function(e){return set(props,"title",e.target.value)}}),_libs.React.createElement("input",{className:"dst",type:"text",placeholder:(0,_libs.tr)("URL / Page number"),value:this.isNumber(props.dstData)?parseInt(props.dstData)+1:props.dstData,onChange:function(e){return set(props,"dstData",_this2.isNumber(e.target.value)?parseInt(e.target.value)-1:e.target.value)}})),_libs.React.createElement("div",{className:"cmds"},_libs.React.createElement("a",{onClick:function(e){return e.preventDefault(),add(props.items)}},(0,_libs.tr)("Add"))," ",_libs.React.createElement("a",{onClick:function(e){return e.preventDefault(),remove(props)}},(0,_libs.tr)("Remove")))),_libs.React.createElement("div",{className:"children"},props.items.map(function(item){return _libs.React.createElement(OutlineItem,{props:item,add:add,remove:remove,set:set})})))},OutlineItem}(_Component3.default);exports.default=OutlineItem},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _libs=__webpack_require__(0),_Component2=__webpack_require__(2),_Component3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_Component2),PEProperty=function(_Component){function PEProperty(){return _classCallCheck(this,PEProperty),_possibleConstructorReturn(this,_Component.apply(this,arguments))}return _inherits(PEProperty,_Component),PEProperty.prototype.selectMedia=function(){var _props=this.props,filter=_props.filter,set=_props.set,name=_props.name,frame=new wp.media.view.MediaFrame.Select({title:(0,_libs.tr)("Select image"),multiple:!1,library:{order:"DESC",orderby:"modified",type:filter,uploadedTo:null},button:{text:(0,_libs.tr)("Open")}});frame.on("select",function(){var file=frame.state().get("selection").first().toJSON();set(name,file.url)}),frame.open()},PEProperty.prototype.render=function(){var _props2=this.props,type=_props2.type,name=_props2.name,description=_props2.description,value=_props2.value,set=_props2.set,cnt=null;return"bool"===type?cnt=_libs.React.createElement("div",{className:"checkbox"},_libs.React.createElement("label",null,_libs.React.createElement("input",{type:"checkbox",id:"3dfb-page-editor-props-"+name,onChange:function(e){return set(name,e.target.checked)},checked:value}),(0,_libs.tr)("yes"))):"text"===type?cnt=_libs.React.createElement("input",{type:"text",id:"3dfb-page-editor-props-"+name,className:"form-control",onChange:function(e){return set(name,e.target.value)},value:value}):"richtext"===type?cnt=_libs.React.createElement("textarea",{id:"3dfb-page-editor-props-"+name,className:"form-control",onChange:function(e){return set(name,e.target.value)}},value):"media"===type&&(cnt=_libs.React.createElement("div",{className:"input-group"},_libs.React.createElement("input",{type:"text",className:"form-control",id:"3dfb-page-editor-props-"+name,onChange:function(e){return set(name,e.target.value)},value:value}),_libs.React.createElement("span",{className:"input-group-btn"},_libs.React.createElement("a",{className:"btn btn-default",onClick:this.selectMedia.bind(this)},(0,_libs.tr)("Open"))))),_libs.React.createElement("div",{className:"form-group"},_libs.React.createElement("div",{className:"prop-caption"},_libs.React.createElement("label",{htmlFor:"3dfb-page-editor-props-"+name},name),_libs.React.createElement("div",{className:"description"},description)),cnt)},PEProperty}(_Component3.default);exports.default=PEProperty},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_libs=__webpack_require__(0),_Component2=__webpack_require__(2),_Component3=_interopRequireDefault(_Component2),_PEProperty=__webpack_require__(65),_PEProperty2=_interopRequireDefault(_PEProperty),PageEditor=function(_Component){function PageEditor(){_classCallCheck(this,PageEditor);var _this=_possibleConstructorReturn(this,_Component.call(this));return _this.state={blocks:[],selected:null,page:{width:100,height:140},activeTool:"none",visible:!1},_this.page=_libs.React.createRef(),_this.body=_libs.React.createRef(),_this.temp=_libs.React.createRef(),_this.info={none:{title:(0,_libs.tr)("Arrow"),icon:""},adsense:{title:(0,_libs.tr)("AdSense"),icon:"dashicons dashicons-money-alt",props:{adClient:{type:"text",description:(0,_libs.tr)("ad client id"),def:""},adSlot:{type:"text",description:(0,_libs.tr)("ad slot id"),def:""},adFormat:{type:"text",description:(0,_libs.tr)("ad format"),def:"auto"},fullWidthResponsive:{type:"bool",description:(0,_libs.tr)("full width responsive"),def:!0}}},audio:{title:(0,_libs.tr)("Audio"),icon:"dashicons dashicons-format-audio",props:{src:{type:"media",filter:"audio",description:(0,_libs.tr)("mp3 audio file URL"),def:""},playOnShown:{type:"bool",description:(0,_libs.tr)("play when page is visible"),def:!0},pauseOnHide:{type:"bool",description:(0,_libs.tr)("pause when page is not visible"),def:!0},controls:{type:"bool",description:(0,_libs.tr)("show audio player controls"),def:!1},muted:{type:"bool",description:(0,_libs.tr)("mute audio"),def:!1},loop:{type:"bool",description:(0,_libs.tr)("loop audio"),def:!1}}},html:{title:(0,_libs.tr)("HTML"),icon:"dashicons dashicons-html",props:{code:{type:"richtext",description:(0,_libs.tr)("any html"),def:""}}},link:{title:(0,_libs.tr)("Link"),icon:"dashicons dashicons-admin-links",props:{destination:{type:"text",description:(0,_libs.tr)("page number or URL"),def:""}}},iframe:{title:(0,_libs.tr)("iFrame"),icon:"dashicons dashicons-media-default",props:{src:{type:"text",description:(0,_libs.tr)("embedded page URL"),def:""}}},image:{title:(0,_libs.tr)("Image"),icon:"dashicons dashicons-format-image",props:{src:{type:"media",filter:"image",description:(0,_libs.tr)("image URL"),def:""}}},video:{title:(0,_libs.tr)("Video"),icon:"dashicons dashicons-video-alt3",props:{src:{type:"media",filter:"video",description:(0,_libs.tr)("mp4 video file URL"),def:""},playOnShown:{type:"bool",description:(0,_libs.tr)("play when page is visible"),def:!0},pauseOnHide:{type:"bool",description:(0,_libs.tr)("pause when page is not visible"),def:!0},controls:{type:"bool",description:(0,_libs.tr)("show video player controls"),def:!1},muted:{type:"bool",description:(0,_libs.tr)("mute audio"),def:!1},loop:{type:"bool",description:(0,_libs.tr)("loop video"),def:!1}}},youtube:{title:(0,_libs.tr)("YouTube"),icon:"dashicons dashicons-youtube",props:{id:{type:"text",description:(0,_libs.tr)("YouTube video id"),def:""},playOnShown:{type:"bool",description:(0,_libs.tr)("play when page is visible"),def:!0},pauseOnHide:{type:"bool",description:(0,_libs.tr)("pause when page is not visible"),def:!0},controls:{type:"bool",description:(0,_libs.tr)("show player controls"),def:!1},muted:{type:"bool",description:(0,_libs.tr)("mute audio"),def:!1},loop:{type:"bool",description:(0,_libs.tr)("loop video"),def:!1}}}},_this}return _inherits(PageEditor,_Component),PageEditor.prototype.getDefProps=function(type){for(var props={},propsInfo=this.info[type].props,_iterator=Object.keys(propsInfo),_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}var name=_ref;props[name]=propsInfo[name].def}return props},PageEditor.prototype.parseProps=function(b,type){var p=null;if("html"===type)p={code:b.html()};else{p=this.getDefProps(type);var c=b.find(":first-child");c.length&&("adsense"===type?p={adClient:c.attr("data-ad-client")||p.adClient,adSlot:c.attr("data-ad-slot")||p.adSlot,adFormat:c.attr("data-ad-format")||p.adFormat,fullWidthResponsive:"true"===(c.attr("data-full-width-responsive")||p.fullWidthResponsive+"")}:"audio"===type?p={pauseOnHide:c.hasClass("pause-on-hide"),playOnShown:c.hasClass("play-on-shown"),muted:"true"===(c.attr("data-muted")||p.muted+""),loop:"true"===(c.attr("data-loop")||p.loop+""),controls:"true"===(c.attr("data-controls")||p.controls+""),src:c.attr("src")||p.src}:"link"===type?p={destination:(c.hasClass("go-to-page")?c.attr("data-number"):c.attr("href"))||p.src}:"iframe"===type?p={src:c.attr("src")||p.src}:"image"===type?p={src:c.attr("src")||p.src}:"video"===type?p={pauseOnHide:c.hasClass("pause-on-hide"),playOnShown:c.hasClass("play-on-shown"),muted:"true"===(c.attr("data-muted")||p.muted+""),loop:"true"===(c.attr("data-loop")||p.loop+""),controls:"true"===(c.attr("data-controls")||p.controls+""),src:c.attr("src")||p.src}:"youtube"===type&&(p={pauseOnHide:c.hasClass("pause-on-hide"),playOnShown:c.hasClass("play-on-shown"),muted:"true"===(c.attr("data-muted")||p.muted+""),loop:"true"===(c.attr("data-loop")||p.loop+""),controls:"true"===(c.attr("data-controls")||p.controls+""),id:c.attr("data-id")||p.id}))}return p},PageEditor.prototype.parse=function(html){var _this2=this,temp=(0,_libs.$)(this.temp.current).html(html),blocks=[];return temp.find(".fb3d-block").each(function(_,b){b=(0,_libs.$)(b);var nb={type:b.attr("class").replace("fb3d-block","").replace("fb3d-","").trim()};nb.props=_this2.parseProps(b,nb.type);for(var _arr=["left","top","width","height"],_i2=0;_i2<_arr.length;_i2++){var n=_arr[_i2];nb[n]=parseFloat(b.css(n))}blocks.push(nb)}),temp.html(""),blocks},PageEditor.prototype.hide=function(){this.setState({visible:!1}),(0,_libs.$)(this.doc.body).removeClass("fb3d-disable-scroll"),this.save(),this.setState({blocks:[],selected:null})},PageEditor.prototype.show=function(page,app){this.app=app,(0,_libs.$)(this.doc.body).addClass("fb3d-disable-scroll"),this.setState({visible:!0,page:page,blocks:this.parse(page.html),selected:null})},PageEditor.prototype.componentDidUpdate=function(){this.resize()},PageEditor.prototype.resize=function(){var body=(0,_libs.$)(this.body.current),kw=body.width()/this.state.page.width,kh=body.height()/this.state.page.height,k=Math.min(kw,kh),page=_extends({},this.state.page,{width:k*this.state.page.width,height:k*this.state.page.height});Math.abs(this.state.page.width-page.width)+Math.abs(this.state.page.height-page.height)>0&&this.setState({page:page})},PageEditor.prototype.setup=function(e){var _this3=this;e&&!this.wnd&&(this.doc=e.ownerDocument,this.wnd=this.doc.defaultView,(0,_libs.$)(this.wnd).on("resize",this.resize.bind(this)),(0,_libs.$)(this.doc).on("mousemove",function(e){if(_this3.drag){e.preventDefault();var dx=e.pageX-_this3.drag.x,dy=e.pageY-_this3.drag.y,b=_this3.toPx(_this3.state.blocks[_this3.state.selected]);_this3.drag=_extends({},_this3.drag,{x:e.pageX,y:e.pageY}),"resize"===_this3.drag.type?("left"===_this3.drag.ps[0]?b.width-dx>0&&(b.left+=dx,b.width-=dx):b.width+=dx,"top"===_this3.drag.ps[1]?b.height-dy>0&&(b.top+=dy,b.height-=dy):b.height+=dy):(b.left+=dx,b.top+=dy);var bs=[].concat(_this3.state.blocks);bs[_this3.state.selected]=_this3.toPc(b),_this3.setState({blocks:bs})}}),(0,_libs.$)(this.doc).on("mouseup",function(e){delete _this3.drag}),(0,_libs.$)(this.doc).on("keydown",function(e){_this3.state.visible&&~[8,46].indexOf(e.keyCode)&&e.target===_this3.doc.body&&(e.preventDefault(),_this3.remove())}))},PageEditor.prototype.toPx=function(b){var page=this.state.page;return _extends({},b,{left:b.left/100*page.width,top:b.top/100*page.height,width:b.width/100*page.width,height:b.height/100*page.height})},PageEditor.prototype.toPc=function(b){var page=this.state.page;return _extends({},b,{left:b.left/page.width*100,top:b.top/page.height*100,width:Math.max(0,b.width)/page.width*100,height:Math.max(0,b.height)/page.height*100})},PageEditor.prototype.buildPickup=function(type,ps){var _this4=this;return function(e){e.stopPropagation(),_this4.drag={ps:ps,x:e.pageX,y:e.pageY,type:type}}},PageEditor.prototype.addBlock=function(e){if(e.target===this.page.current&&!this.drag)if("none"!==this.state.activeTool){var off=(0,_libs.$)(this.page.current).offset();this.state.page;this.setState({blocks:[].concat(this.state.blocks,[this.toPc({type:this.state.activeTool,left:e.pageX-off.left,top:e.pageY-off.top,width:0,height:0,props:this.getDefProps(this.state.activeTool)})]),selected:this.state.blocks.length}),this.drag={ps:["right","bottom"],x:e.pageX,y:e.pageY,type:"resize"}}else this.setState({selected:null})},PageEditor.prototype.remove=function(){if(null!==this.state.selected&&!this.drag){var blocks=[].concat(this.state.blocks);blocks.splice(this.state.selected,1),this.setState({blocks:blocks,selected:null})}},PageEditor.prototype.save=function(){var temp=(0,_libs.$)(this.temp.current).html((0,_libs.$)(this.page.current).html());temp.find(".background").remove(),temp.find(".markers").remove(),temp.find(".youtube img").remove(),temp.find(".bgicon").remove();var reg=/<fb3d-page-editor>([\n \t]|.)*?<\/fb3d-page-editor>/i,html=this.state.page.html,thtml=temp.html().trim().replace(/<fb3d-html>((.|[\n\t])*?)<\/fb3d-html>/gi,function(_,r){return r}),data=""===thtml?"":["<fb3d-page-editor>",thtml,"</fb3d-page-editor>"].join(""),res=html.match(reg)?html.replace(reg,data):html+data;temp.html(""),this.app.saveVisualEditorPage(_extends({},this.state.page,{html:res}))},PageEditor.prototype.goToPage=function(n){n>=0&&n<this.app.getPagesNumber()&&(this.save(),this.app.runVisualEditor(n))},PageEditor.prototype.setBlockProp=function(n,name,value){var blocks=[].concat(this.state.blocks);blocks[n]=_extends({},blocks[n],{props:_extends({},blocks[n].props)}),blocks[n].props[name]=value,this.setState({blocks:blocks})},PageEditor.prototype.isPageNumber=function(dst){return dst=(dst+"").trim(),parseInt(dst)+""===dst},PageEditor.prototype.renderBlock=function(b){var res=null,p=b.props;return"adsense"===b.type?res=_libs.React.createElement("ins",{className:"adsbygoogle",style:{display:"block"},"data-ad-client":p.adClient,"data-ad-slot":p.adSlot,"data-ad-format":p.adFormat,"data-full-width-responsive":p.fullWidthResponsive}):"audio"===b.type?res=_libs.React.createElement("audio",{className:(p.pauseOnHide?"pause-on-hide":"")+(p.playOnShown?" play-on-shown":""),src:p.src,muted:p.muted,loop:p.loop,controls:p.controls,"data-muted":p.muted,"data-loop":p.loop,"data-controls":p.controls}):"html"===b.type?res=_libs.React.createElement("fb3d-html",{dangerouslySetInnerHTML:{__html:p.code}}):"link"===b.type?res=this.isPageNumber(p.destination)?_libs.React.createElement("a",{className:"go-to-page","data-number":p.destination}):_libs.React.createElement("a",{href:p.destination,target:"_blank"}):"iframe"===b.type?res=_libs.React.createElement("iframe",{src:p.src}):"image"===b.type?res=_libs.React.createElement("img",{src:p.src}):"video"===b.type?res=_libs.React.createElement("video",{className:(p.pauseOnHide?"pause-on-hide":"")+(p.playOnShown?" play-on-shown":""),src:p.src,muted:p.muted,loop:p.loop,controls:p.controls,"data-muted":p.muted,"data-loop":p.loop,"data-controls":p.controls}):"youtube"===b.type&&(res=_libs.React.createElement("div",{className:"youtube"+(p.pauseOnHide?" pause-on-hide":"")+(p.playOnShown?" play-on-shown":""),"data-id":p.id,"data-muted":p.muted,"data-loop":p.loop,"data-controls":p.controls},_libs.React.createElement("img",{src:"https://img.youtube.com/vi/"+p.id+"/hqdefault.jpg"}))),res},PageEditor.prototype.render=function(){var _this5=this,_props=this.props,_state=(_props.props,_props.post,_props.update,_props.showAdvanced,this.state),page=_state.page,selected=_state.selected,block=this.state.blocks[selected];return _libs.React.createElement("div",{className:"page-editor"+(this.state.visible?"":" hidden"),ref:this.setup.bind(this)},_libs.React.createElement("div",{className:"content"},_libs.React.createElement("div",{className:"header"},_libs.React.createElement("h1",null,(0,_libs.tr)("Edit page")+" "+(page.n+1)),_libs.React.createElement("div",{className:"cmds"},_libs.React.createElement("a",{onClick:function(){return _this5.goToPage(page.n-1)}},"<"),_libs.React.createElement("a",{onClick:function(){return _this5.goToPage(page.n+1)}},">"),_libs.React.createElement("a",{onClick:this.hide.bind(this)},"x"))),_libs.React.createElement("div",{className:"main"},_libs.React.createElement("div",{className:"toolbar"},_libs.React.createElement("ul",{className:"items"},Object.keys(this.info).map(function(type){return _libs.React.createElement("li",{className:"item"+(_this5.state.activeTool===type?" active":"")},_libs.React.createElement("a",{onClick:function(){return _this5.setState({activeTool:type})}},_libs.React.createElement("span",{className:_this5.info[type].icon}),_this5.info[type].title))}))),_libs.React.createElement("div",{className:"body",ref:this.body},_libs.React.createElement("div",{className:"page"+("none"!==this.state.activeTool?" active-tool":""),ref:this.page,style:{width:this.state.page.width+"px",height:this.state.page.height+"px"},onMouseDown:this.addBlock.bind(this)},_libs.React.createElement("img",{className:"background",src:page.src}),this.state.blocks.map(function(b,n){var pxB=_this5.toPx(b);return _libs.React.createElement("div",{className:"fb3d-block fb3d-"+b.type,onClick:function(){return _this5.setState({selected:n})},style:{top:b.top+"%",left:b.left+"%",width:b.width+"%",height:b.height+"%"}},_libs.React.createElement("span",{className:"bgicon "+_this5.info[b.type].icon,style:{fontSize:Math.min(pxB.width,pxB.height)+"px"}}),n===selected?_libs.React.createElement("div",{className:"markers",onMouseDown:_this5.buildPickup("move")},_libs.React.createElement("div",{className:"move"}),["left-top","right-top","left-bottom","right-bottom"].map(function(c){return _libs.React.createElement("div",{className:"resize "+c,onMouseDown:_this5.buildPickup("resize",c.split("-"))})})):null,_this5.renderBlock(b))}))),_libs.React.createElement("div",{className:"props"},_libs.React.createElement("div",{className:"form-group"},_libs.React.createElement("label",{htmlFor:"3dfb-page-editor-blocks"},(0,_libs.tr)("Blocks")),_libs.React.createElement("select",{id:"3dfb-page-editor-blocks",className:"form-control",value:null===selected?"":selected,onChange:function(e){return _this5.setState({selected:""===e.target.value?null:parseInt(e.target.value)})}},_libs.React.createElement("option",{value:""}),this.state.blocks.map(function(b,n){return _libs.React.createElement("option",{value:n},_this5.info[b.type].title)}))),block?[_libs.React.createElement("h3",null,this.info[block.type].title),Object.keys(this.info[block.type].props).map(function(name){return _libs.React.createElement(_PEProperty2.default,_extends({},_this5.info[block.type].props[name],{name:name,value:block.props[name],set:function(name,value){return _this5.setBlockProp(selected,name,value)}}))}),_libs.React.createElement("div",{className:"text-right cmds"},_libs.React.createElement("a",{onClick:this.remove.bind(this)},(0,_libs.tr)("Remove")))]:null))),_libs.React.createElement("div",{className:"hidden",ref:this.temp}))},PageEditor}(_Component3.default);exports.default=PageEditor},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_Props2=(__webpack_require__(0),__webpack_require__(7)),_Props3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_Props2),PageProps=function(_Props){function PageProps(){return _classCallCheck(this,PageProps),_possibleConstructorReturn(this,_Props.apply(this,arguments))}return _inherits(PageProps,_Props),PageProps.prototype.getDivClassName=function(){return"page-props"},PageProps.prototype.getFullName=function(name){return"3dfb-post-props-page-"+name},PageProps.prototype.setProperty=function(name,value){var _props=this.props,post=_props.post,update=_props.update,newPost=_extends({},post,{props:_extends({},post.props,{page:_extends({},post.props.page)})});newPost.props.page[name]=value,update(newPost)},PageProps}(_Props3.default);exports.default=PageProps},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_libs=__webpack_require__(0),_Component2=__webpack_require__(2),_Component3=_interopRequireDefault(_Component2),_Factory=__webpack_require__(13),_Factory2=_interopRequireDefault(_Factory),_Pagination=__webpack_require__(95),_Pagination2=_interopRequireDefault(_Pagination),Pages=function(_Component){function Pages(){return _classCallCheck(this,Pages),_possibleConstructorReturn(this,_Component.apply(this,arguments))}return _inherits(Pages,_Component),Pages.prototype.getFileType=function(file){var type=void 0;switch(file.mime){case"image/gif":case"image/jpeg":case"image/pjpeg":case"image/png":case"image/svg+xml":case"image/webp":type="image";break;case"text/html":type="html";break;default:type=void 0}return type},Pages.addPages=function(e){var _this2=this;e.preventDefault();var _self$props=this.self.props,post=_self$props.post,add=_self$props.add,orderImporting=_self$props.orderImporting;wp.media.model.settings.post.id=post.ID;var frame=new wp.media.view.MediaFrame.Select({title:(0,_libs.tr)("Select files"),multiple:!0,library:{order:"DESC",orderby:"modified",type:this.mime,uploadedTo:null},button:{text:(0,_libs.tr)("Open")}});frame.on("select",function(){var files=[].concat(frame.state().get("selection").toJSON());if(add){var newPages=[],number=_this2.self.props.pages.length;if("none"!==orderImporting){var ps=orderImporting.split("-"),name=ps[0],order="desc"===ps[1]?-1:1;files=files.sort(function(o1,o2){var a=o1[name],b=o2[name];return a===b?0:(a<b?-1:1)*order})}for(var _iterator=files,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}var file=_ref,type=_this2.self.getFileType(file);type&&newPages.push({page_title:file.title,page_source_type:type,page_source_data:{post_ID:file.id,guid:file.url,interactive:"html"===type?"1":"0",number:0},page_number:number++})}add(newPages)}}),frame.open()},Pages.prototype.addPdfPage=function(e){var p=parseInt(e.target.value);if(-1!=p){var _props=this.props,pages=_props.pages,post=_props.post;(0,_props.add)([{page_title:"",page_source_type:"pdf",page_source_data:{post_ID:post.data.post_ID,guid:post.data.guid,interactive:"0",number:p},page_number:pages.length}])}},Pages.prototype.removeAllPages=function(e){e.preventDefault();var _props2=this.props,pages=_props2.pages;(0,_props2.remove)(pages)},Pages.prototype.isItemHidden=function(n){var _props3=this.props,visiblePage=_props3.visiblePage,itemsPerPage=_props3.itemsPerPage,hidden=_props3.hidden,first=visiblePage*itemsPerPage,last=(visiblePage+1)*itemsPerPage;return hidden||n<first||n>=last},Pages.prototype.render=function(){var _this3=this,_props4=this.props,post=_props4.post,updatePost=_props4.updatePost,pages=_props4.pages,pdfPages=_props4.pdfPages,runVisualEditor=_props4.runVisualEditor,visiblePage=_props4.visiblePage,itemsPerPage=_props4.itemsPerPage,orderImporting=_props4.orderImporting,setVisiblePage=_props4.setVisiblePage,setItemsPerPage=_props4.setItemsPerPage,setOrderImporting=_props4.setOrderImporting,update=_props4.update,remove=_props4.remove,getThumbnail=_props4.getThumbnail,showAdvanced=_props4.showAdvanced,content=null;if("custom"===post.type||"all"===post.data.pages_customization){var ls=[];"custom"===post.type?ls.push(_libs.React.createElement("li",{key:0},_libs.React.createElement("a",{onClick:Pages.addPages.bind({self:this,mime:"image"})},(0,_libs.tr)("Add image pages"))),_libs.React.createElement("li",{key:1},_libs.React.createElement("a",{onClick:Pages.addPages.bind({self:this,mime:"text/html"})},(0,_libs.tr)("Add HTML pages"))),_libs.React.createElement("li",{key:2},(0,_libs.tr)("Order importing pages by")," ",_libs.React.createElement("select",{onChange:function(e){return setOrderImporting(e.target.value)},value:orderImporting},_libs.React.createElement("option",{value:"none"}),_libs.React.createElement("option",{value:"id-asc"},(0,_libs.tr)("ID ASC")),_libs.React.createElement("option",{value:"id-desc"},(0,_libs.tr)("ID DESC")),_libs.React.createElement("option",{value:"title"},(0,_libs.tr)("Title")),_libs.React.createElement("option",{value:"filename"},(0,_libs.tr)("Filename")),_libs.React.createElement("option",{value:"date-asc"},(0,_libs.tr)("Date ASC")),_libs.React.createElement("option",{value:"date-desc"},(0,_libs.tr)("Date DESC"))))):ls.push(_libs.React.createElement("li",{key:0}," "+(0,_libs.tr)("Add PDF page")+" ",_libs.React.createElement("select",{onChange:this.addPdfPage.bind(this),value:-1},_libs.React.createElement("option",{key:0,value:-1}),Array(pdfPages).fill().map(function(_,i){return _libs.React.createElement("option",{key:i+1,value:i},i+1)})))),ls.push(_libs.React.createElement("li",{key:10},_libs.React.createElement("a",{onClick:this.removeAllPages.bind(this)},(0,_libs.tr)("Remove all pages"))),_libs.React.createElement("li",{key:11},_libs.React.createElement("select",{onChange:function(e){return setItemsPerPage(e.target.value)},value:itemsPerPage},_libs.React.createElement("option",{value:10},"10"),_libs.React.createElement("option",{value:25},"25"),_libs.React.createElement("option",{value:50},"50"),_libs.React.createElement("option",{value:100},"100"))," "+(0,_libs.tr)("items per page"))),content=_libs.React.createElement("div",null,_libs.React.createElement("div",{className:"menu-control"},_libs.React.createElement("ul",null,ls)),_libs.React.createElement(_Pagination2.default,{visiblePage:visiblePage,itemsPerPage:itemsPerPage,setVisiblePage:setVisiblePage},pages.map(function(page,key){return _Factory2.default.createPage({page:page,pages:pages.length,runVisualEditor:runVisualEditor,hidden:_this3.isItemHidden(key),pdfPages:pdfPages,update:update,remove:remove,getThumbnail:getThumbnail,showAdvanced:showAdvanced},key)})))}var pagesCustomizationMenu=null;return"pdf"===post.type&&(pagesCustomizationMenu=_libs.React.createElement("div",null,(0,_libs.tr)("Pages customization")+": ",_libs.React.createElement("select",{name:"3dfb-post-data-pages_customization",onChange:function(e){return updatePost(_extends({},post,{data:_extends({},post.data,{pages_customization:e.target.value})}))},value:post.data.pages_customization},_libs.React.createElement("option",{value:"all"},(0,_libs.tr)("All")),_libs.React.createElement("option",{value:"none"},(0,_libs.tr)("None"))))),_libs.React.createElement("div",{className:"pages"},_libs.React.createElement("input",{type:"hidden",name:"3dfb-post-data-pdf_pages",value:post.data.pdf_pages}),pagesCustomizationMenu,content)},Pages}(_Component3.default);exports.default=Pages},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_libs=__webpack_require__(0),_Page2=__webpack_require__(21),_Page3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_Page2),PdfPage=function(_Page){function PdfPage(){return _classCallCheck(this,PdfPage),_possibleConstructorReturn(this,_Page.apply(this,arguments))}return _inherits(PdfPage,_Page),PdfPage.prototype.changePdfPage=function(e){var _props=this.props,update=_props.update,page=_props.page;update(page,_extends({},page,{page_source_data:_extends({},page.page_source_data,{number:parseInt(e.target.value)})}))},PdfPage.prototype.onInteractiveChange=function(e){var _props2=this.props,page=_props2.page;(0,_props2.update)(page,_extends({},page,{page_source_data:_extends({},page.page_source_data,{interactive:e.target.checked?"1":"0"})}))},PdfPage.prototype.renderDerivative=function(){var _props3=this.props,page=_props3.page,pdfPages=_props3.pdfPages,N=page.page_number;return _libs.React.createElement("div",null,_libs.React.createElement("div",{className:"page-pdf-number"},_libs.React.createElement("div",{className:"form-group"},_libs.React.createElement("label",{htmlFor:"3dfb-page-pdf-number-"+N},(0,_libs.tr)("PDF page number")),_libs.React.createElement("select",{id:"3dfb-page-pdf-number-"+N,onChange:this.changePdfPage.bind(this),className:"form-control",name:"3dfb-pages-"+N+"-page_source_data-number",value:page.page_source_data.number},Array(pdfPages).fill().map(function(_,i){return _libs.React.createElement("option",{value:i,key:i},i+1)})))),_libs.React.createElement("div",{className:"page-interactive"},_libs.React.createElement("div",{className:"checkbox"},_libs.React.createElement("label",null,_libs.React.createElement("input",{onChange:this.onInteractiveChange.bind(this),name:"3dfb-pages-"+N+"-page_source_data-interactive",value:page.page_source_data.interactive,checked:"1"===page.page_source_data.interactive,type:"checkbox"})," ",(0,_libs.tr)("interactive")))))},PdfPage}(_Page3.default);exports.default=PdfPage},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_Props2=(__webpack_require__(0),__webpack_require__(7)),_Props3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_Props2),SheetProps=function(_Props){function SheetProps(){return _classCallCheck(this,SheetProps),_possibleConstructorReturn(this,_Props.apply(this,arguments))}return _inherits(SheetProps,_Props),SheetProps.prototype.getDivClassName=function(){return"sheet-props"},SheetProps.prototype.getFullName=function(name){return"3dfb-post-props-sheet-"+name},SheetProps.prototype.setProperty=function(name,value){var _props=this.props,post=_props.post,update=_props.update,newPost=_extends({},post,{props:_extends({},post.props,{sheet:_extends({},post.props.sheet)})});newPost.props.sheet[name]=value,update(newPost)},SheetProps}(_Props3.default);exports.default=SheetProps},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _Component2=__webpack_require__(2),_Component3=_interopRequireDefault(_Component2),_AutoThumbnail=__webpack_require__(19),_AutoThumbnail2=_interopRequireDefault(_AutoThumbnail),_ImageFactory=__webpack_require__(14),_ImageFactory2=_interopRequireDefault(_ImageFactory),ThumbnailRender=function(_Component){function ThumbnailRender(){return _classCallCheck(this,ThumbnailRender),_possibleConstructorReturn(this,_Component.apply(this,arguments))}return _inherits(ThumbnailRender,_Component),ThumbnailRender.prototype.update=function(){var _this2=this,props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;!this.rendering&&props.wScale&&function(){for(var pages=props.pages,visiblePage=props.visiblePage,itemsPerPage=props.itemsPerPage,getThumbnail=props.getThumbnail,add=props.add,pdf=props.pdf,wScale=props.wScale,first=visiblePage*itemsPerPage,last=Math.min((visiblePage+1)*itemsPerPage,pages.length),p=first;p<last;++p){if("break"===function(p){var page=pages[p],key=_AutoThumbnail2.default.getKey(page);if("auto"===page.page_thumbnail_type&&!getThumbnail(key)){_this2.rendering=!0;var wrapper=_this2.imageFactory.build({type:page.page_source_type,src:pdf||page.page_source_data.guid},parseInt(page.page_source_data.number),wScale*FB3D_ADMIN_LOCALE.thumbnailSize.height,FB3D_ADMIN_LOCALE.thumbnailSize.height);return wrapper.onChange=function(canvas){add(key,canvas.toDataURL("image/png")),wrapper.dispose(),_this2.rendering=!1,setTimeout(_this2.update.bind(_this2),100)},"break"}}(p))break}}()},ThumbnailRender.prototype.componentDidMount=function(){this.imageFactory=new _ImageFactory2.default({wnd:window,doc:document}),this.update(this.props)},ThumbnailRender.prototype.componentWillReceiveProps=function(props){this.update(props)},ThumbnailRender.prototype.render=function(){return this.props.children},ThumbnailRender}(_Component3.default);exports.default=ThumbnailRender},function(module,exports,__webpack_require__){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function post(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:defaultState,action=arguments[1];switch(action.type){case ACTIONS.UPDATE_EDIT:state=_extends({},state,action.payload.edit),action.payload.edit.stored&&(localStorage.iberezansky3DFlipBookEdit=JSON.stringify(action.payload.edit.stored))}return state}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.default=post;var _RESPONSE_CODES=__webpack_require__(6),RESPONSES=_interopRequireWildcard(_RESPONSE_CODES),_ACTION_TYPES=__webpack_require__(3),ACTIONS=_interopRequireWildcard(_ACTION_TYPES),defaultState={activeTab:"general",code:RESPONSES.OK,error:"",stored:_extends({showAdvanced:!1},JSON.parse(localStorage.iberezansky3DFlipBookEdit||"{}"))}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.__esModule=!0,exports.renderedThumbnails=exports.mediaImages=exports.pages=exports.post=exports.edit=void 0;var _edit2=__webpack_require__(72),_edit3=_interopRequireDefault(_edit2),_post2=__webpack_require__(76),_post3=_interopRequireDefault(_post2),_pages2=__webpack_require__(75),_pages3=_interopRequireDefault(_pages2),_mediaImages2=__webpack_require__(74),_mediaImages3=_interopRequireDefault(_mediaImages2),_renderedThumbnails2=__webpack_require__(77),_renderedThumbnails3=_interopRequireDefault(_renderedThumbnails2);exports.edit=_edit3.default,exports.post=_post3.default,exports.pages=_pages3.default,exports.mediaImages=_mediaImages3.default,exports.renderedThumbnails=_renderedThumbnails3.default},function(module,exports,__webpack_require__){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function mediaImages(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:defaultState,action=arguments[1];switch(action.type){case ACTIONS.READ_MEDIA_IMAGE:if(!state.mediaImages.find(function(img){return img.id==action.payload.id})){var errorPayload={code:RESPONSES.ERROR,mediaImage:[]},send=function(payload){return action.payload.dispatch({type:ACTIONS.RECEIVED_MEDIA_IMAGE,payload:payload})};_libs.$.ajax({url:ajaxurl,data:{action:"fb3d_send_media_image",id:action.payload.id},type:"GET",success:function(r){var payload=void 0;switch(r.code){case RESPONSES.OK:payload={mediaImage:r.mediaImage,code:r.code};break;default:payload=errorPayload}send(payload)},error:function(){return send(errorPayload)}})}break;case ACTIONS.RECEIVED_MEDIA_IMAGE:state=_extends({},state,{mediaImages:[].concat(state.mediaImages,[action.payload.mediaImage]),code:action.payload.code})}return state}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.default=mediaImages;var _libs=__webpack_require__(0),_RESPONSE_CODES=__webpack_require__(6),RESPONSES=_interopRequireWildcard(_RESPONSE_CODES),_ACTION_TYPES=__webpack_require__(3),ACTIONS=_interopRequireWildcard(_ACTION_TYPES),defaultState={mediaImages:[],code:void 0}},function(module,exports,__webpack_require__){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function defaultPage(page_post_ID){var page={};return void 0!==page_post_ID&&(page={page_ID:0,page_post_ID:page_post_ID,page_title:"",page_source_type:"pdf",page_source_data:{post_ID:0,guid:"",interactive:"0",number:0},page_thumbnail_type:"auto",page_thumbnail_data:{post_ID:0},page_meta_data:{css_layer:{css:"",html:"",js:""}},page_number:0}),page}function defaultPages(page_post_ID,pages){return pages.map(function(page){return _extends({},defaultPage(page_post_ID),page)})}function orderPages(pages){var arr=pages.map(function(page,i){return{page:page,key:[page.page_number,i]}});return arr.sort(function(a,b){return a.key[0]===b.key[0]?a.key[1]-b.key[1]:a.key[0]-b.key[0]}),arr.map(function(item,i){return _extends({},item.page,{page_number:i})})}function pages(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:defaultState,action=arguments[1];switch(action.type){case ACTIONS.READ_POST_PAGES:var errorPayload={code:RESPONSES.ERROR,pages:[]},send=function(payload){return action.payload.dispatch({type:ACTIONS.RECEIVED_POST_PAGES,payload:payload})};state=_extends({},state,{page_post_ID:action.payload.id}),_libs.$.ajax({url:ajaxurl,data:{action:"fb3d_send_post_pages",id:action.payload.id},type:"GET",success:function(r){var payload=void 0;switch(r.code){case RESPONSES.OK:payload={pages:r.pages,code:r.code};break;default:payload=errorPayload}send(payload)},error:function(){return send(errorPayload)}});break;case ACTIONS.ADD_POST_PAGES:state=_extends({},state,{pages:orderPages([].concat(state.pages,defaultPages(state.page_post_ID,action.payload.pages)))});break;case ACTIONS.REMOVE_POST_PAGES:state=_extends({},state,{pages:orderPages(state.pages.filter(function(page){return-1===action.payload.pages.indexOf(page)}))});break;case ACTIONS.UPDATE_POST_PAGE:state=_extends({},state,{pages:[].concat(state.pages)});var i=state.pages.indexOf(action.payload.oldPage);state.pages.splice(i,1,action.payload.newPage),state.pages=orderPages(state.pages);break;case ACTIONS.RECEIVED_POST_PAGES:state=_extends({},state,{pages:orderPages(defaultPages(state.page_post_ID,action.payload.pages)),code:action.payload.code});break;case ACTIONS.VISIBLE_POST_PAGES:state=_extends({},state,{visiblePage:action.payload.visiblePage});break;case ACTIONS.ITEMS_POST_PAGES:state=_extends({},state,{itemsPerPage:action.payload.itemsPerPage});break;case ACTIONS.ORDER_IMPORTING:state=_extends({},state,{orderImporting:action.payload.orderImporting})}return state}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.default=pages;var _libs=__webpack_require__(0),_RESPONSE_CODES=__webpack_require__(6),RESPONSES=_interopRequireWildcard(_RESPONSE_CODES),_ACTION_TYPES=__webpack_require__(3),ACTIONS=_interopRequireWildcard(_ACTION_TYPES),defaultState={page_post_ID:void 0,pages:[],code:void 0,visiblePage:0,itemsPerPage:25,orderImporting:"none"}},function(module,exports,__webpack_require__){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function defaultPost(ID){var post={};return void 0!==ID&&(post={ID:ID,title:"",type:"pdf",ready_function:"",book_style:"flat",book_template:"none",data:{guid:"",post_ID:0,pages_customization:"all",pdf_pages:0},thumbnail:{type:"auto",data:{post_ID:0}},props:defaultState.defProps,controlProps:{actions:{}},outline:[]}),post}function override(){for(var defObj=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},obj=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},res=_extends({},defObj,obj),_iterator=Object.keys(defObj),_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}var p=_ref;defObj[p]instanceof Object&&!(defObj[p]instanceof Array)&&(res[p]=override(defObj[p],obj[p]))}return res}function post(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:defaultState,action=arguments[1];switch(action.type){case ACTIONS.READ_POST:var errorPayload={code:RESPONSES.ERROR,post:{}},send=function(payload){return action.payload.dispatch({type:ACTIONS.RECEIVED_POST,payload:payload})};_libs.$.ajax({url:ajaxurl,data:{action:"fb3d_send_post",id:action.payload.id},type:"GET",success:function(r){var payload=void 0;switch(r.code){case RESPONSES.OK:payload={post:r.post,code:r.code};break;case RESPONSES.NOT_FOUND:payload={post:defaultPost(action.payload.id),code:RESPONSES.OK};break;default:payload=errorPayload}send(payload)},error:function(){return send(errorPayload)}});break;case ACTIONS.UPDATE_POST:state=_extends({},state,{post:action.payload.post});break;case ACTIONS.RECEIVED_POST:state=_extends({},state,{post:override(defaultPost(action.payload.post.ID),action.payload.post),code:action.payload.code});break;case ACTIONS.SET_DEF_PROPS:state=_extends({},state,{defProps:action.payload.defProps})}return state}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.default=post;var _libs=__webpack_require__(0),_RESPONSE_CODES=__webpack_require__(6),RESPONSES=_interopRequireWildcard(_RESPONSE_CODES),_ACTION_TYPES=__webpack_require__(3),ACTIONS=_interopRequireWildcard(_ACTION_TYPES),defaultState={post:{},code:void 0,defProps:{sheet:{},cover:{},page:{}},defControlProps:{actions:{cmdToc:{enabled:!0,enabledInNarrow:!0,active:!1,defaultTab:"bookmarks"},cmdAutoPlay:{enabled:!1,enabledInNarrow:!1,active:!1},cmdSave:{enabled:!0,enabledInNarrow:!0},cmdPrint:{enabled:!0,enabledInNarrow:!1},cmdSinglePage:{enabled:!0,enabledInNarrow:!0,active:!1,activeForMobile:!0},widToolbar:{enabled:!0,enabledInNarrow:!0}}},defPropsInfo:{height:{type:"float",description:(0,_libs.tr)("book height"),display:"none"},width:{type:"float",description:(0,_libs.tr)("book width"),display:"none"},backgroundColor:{type:"color",description:(0,_libs.tr)("background color")},backgroundImage:{type:"file",mime:"image",description:(0,_libs.tr)("background image")},backgroundStyle:{type:"text",description:(0,_libs.tr)("background css style"),advanced:!0},highlightLinks:{type:"bool",description:(0,_libs.tr)("highlight pdf links")},lighting:{type:"select",description:(0,_libs.tr)("3d lighting"),options:{ambient:(0,_libs.tr)("ambient"),mixed:(0,_libs.tr)("mixed")}},gravity:{type:"float",description:(0,_libs.tr)("gravity constant"),display:"none"},cachedPages:{type:"int",description:(0,_libs.tr)("amount of rendered cached pages"),advanced:!0},renderInactivePages:{type:"bool",description:(0,_libs.tr)("render loaded hidden pages in the background"),advanced:!0},renderInactivePagesOnMobile:{type:"bool",description:(0,_libs.tr)("render loaded hidden pages in the background on mobile devices"),advanced:!0},renderWhileFlipping:{type:"bool",description:(0,_libs.tr)("render pages while they are flipping, it can slow down animation"),advanced:!0},pagesForPredicting:{type:"int",description:(0,_libs.tr)("amount of loaded by user pages that are used for predicting user behaviour"),display:"none"},preloadPages:{type:"int",description:(0,_libs.tr)("quantity of predicted pages for automatic loading"),advanced:!0},autoPlayDuration:{type:"int",description:(0,_libs.tr)("time in ms between two auto page turns when autoplay is active")},rtl:{type:"bool",description:(0,_libs.tr)("rtl is a right-to-left, top-to-bottom script, writing starts from the right of the page and continues to the left")},interactiveCorners:{type:"bool",description:(0,_libs.tr)("using mouse to drag pages")},maxDepth:{type:"float",description:(0,_libs.tr)("max book thickness, limit cover and pages depth"),advanced:!0},sheet:{startVelocity:{type:"float",description:(0,_libs.tr)("initial flipping velocity, it should be enough to overcome the gravity"),advanced:!0},cornerDeviation:{type:"float",description:(0,_libs.tr)("max corner (flexible part of the sheet) deviation from the whole sheet"),display:"none"},flexibility:{type:"float",description:(0,_libs.tr)("sheet flexibility"),display:"none"},flexibleCorner:{type:"float",description:(0,_libs.tr)("part of the sheet that can be flexed, should be in range (0, 1)"),display:"none"},bending:{type:"float",description:(0,_libs.tr)("speed of changing bending angle of the flexible corner"),display:"none"},wave:{type:"float",description:(0,_libs.tr)("curvature of open sheet, 0.05 is for flat sheet"),advanced:!0},widthTexels:{type:"int",description:(0,_libs.tr)("width texture resolution"),advanced:!0},heightTexels:{type:"int",description:(0,_libs.tr)("height texture resolution"),display:"none"},side:{type:"select",description:(0,_libs.tr)("side texture"),options:{color:(0,_libs.tr)("color"),transparent:(0,_libs.tr)("transparent")}},shape:{type:"select",description:(0,_libs.tr)("page turn animation style"),options:{0:(0,_libs.tr)("symmetrical inflection"),1:(0,_libs.tr)("asymmetrical unrolling")}},color:{type:"color",description:(0,_libs.tr)("sheet color")},depth:{type:"float",description:(0,_libs.tr)("sheet thickness"),advanced:!0},mass:{type:"float",description:(0,_libs.tr)("sheet weight"),display:"none"}},cover:{startVelocity:{display:"none"},widthTexels:{display:"none"},shape:{display:"none"},padding:{type:"float",description:(0,_libs.tr)("cover height is more on 2*padding and cover width more on 1*padding than page ones, so you can set different sizes for typical pages and cover like for real book"),advanced:!0},binderTexture:{type:"file",mime:"image",description:(0,_libs.tr)("binder texture"),advanced:!0}},page:{startVelocity:{display:"none"},widthTexels:{display:"none"},shape:{display:"none"}}},defControlPropsInfo:{actions:{cmdToc:{description:(0,_libs.tr)("show table of contents"),enabled:{type:"bool"},enabledInNarrow:{type:"bool"},active:{type:"bool"},defaultTab:{type:"select",options:{thumbnails:(0,_libs.tr)("Thumbnails"),bookmarks:(0,_libs.tr)("Bookmarks"),search:(0,_libs.tr)("Search")}}},cmdAutoPlay:{description:(0,_libs.tr)("auto turning pages"),enabled:{type:"bool"},enabledInNarrow:{type:"bool"},active:{type:"bool"}},cmdSave:{description:(0,_libs.tr)("download"),enabled:{type:"bool"},enabledInNarrow:{type:"bool"}},cmdPrint:{description:(0,_libs.tr)("print"),enabled:{type:"bool"},enabledInNarrow:{type:"bool"}},cmdSinglePage:{description:(0,_libs.tr)("toggle single page mode"),enabled:{type:"bool"},enabledInNarrow:{type:"bool"},active:{type:"bool"},activeForMobile:{type:"bool"}},widToolbar:{description:(0,_libs.tr)("show/hide the toolbar"),enabled:{type:"bool"},enabledInNarrow:{type:"bool"}}}}}},function(module,exports,__webpack_require__){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function isEqual(k1,k2){var res=!1;if(k1.type===k2.type)switch(k1.type){case"pdf":res=k1.src===k2.src&&k1.page===k2.page&&k1.srcId===k2.srcId;break;case"html":case"image":res=k1.src===k2.src}return res}function mediaImages(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:defaultState,action=arguments[1];switch(action.type){case ACTIONS.ADD_RENDERED_THUMBNAIL:state.get(state.renderedThumbnails,action.payload.key)||(state=_extends({},state,{renderedThumbnails:[].concat(state.renderedThumbnails,[{key:action.payload.key,element:action.payload.element}]),code:action.payload.code}))}return state}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.default=mediaImages;var _RESPONSE_CODES=__webpack_require__(6),RESPONSES=_interopRequireWildcard(_RESPONSE_CODES),_ACTION_TYPES=__webpack_require__(3),ACTIONS=_interopRequireWildcard(_ACTION_TYPES),defaultState={renderedThumbnails:[],code:RESPONSES.OK,get:function(thumbs,key){return thumbs.find(function(thumb){return isEqual(thumb.key,key)})}}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _redux=__webpack_require__(45),_index=__webpack_require__(73),reducers=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(_index);exports.default=(0,_redux.createStore)((0,_redux.combineReducers)(reducers))},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _BookPropsBuilder2=__webpack_require__(23),_BookPropsBuilder3=_interopRequireDefault(_BookPropsBuilder2),_ImageFactory=__webpack_require__(14),_ImageFactory2=_interopRequireDefault(_ImageFactory),ClbBookPropsBuilder=function(_BookPropsBuilder){function ClbBookPropsBuilder(context,pageCallback,pages,onReady,style){_classCallCheck(this,ClbBookPropsBuilder);var _this=_possibleConstructorReturn(this,_BookPropsBuilder.call(this,onReady,style));if(_this.calcSheets(pages),_this.pages=pages,_this.pageCallback=pageCallback,_this.binds={pageCallback:pageCallback.bind(_this)},_this.imageFactory=new _ImageFactory2.default(context),pages>0){var test=_this.imageFactory.build(pageCallback(0),0,_this.defaults.sheet.widthTexels,_this.defaults.sheet.heightTexels,_this.defaults.sheet.color);test.onLoad=function(){_this.calcProps(test.width,test.height),test.dispose(),_this.ready()}}else _this.props=_this.defaults,_this.ready();return _this}return _inherits(ClbBookPropsBuilder,_BookPropsBuilder),ClbBookPropsBuilder}(_BookPropsBuilder3.default);exports.default=ClbBookPropsBuilder},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _BookPropsBuilder2=__webpack_require__(23),_BookPropsBuilder3=_interopRequireDefault(_BookPropsBuilder2),_Pdf=__webpack_require__(26),_Pdf2=_interopRequireDefault(_Pdf),PdfBookPropsBuilder=function(_BookPropsBuilder){function PdfBookPropsBuilder(src,onReady,style,pdfOpenOptions){_classCallCheck(this,PdfBookPropsBuilder);var _this=_possibleConstructorReturn(this,_BookPropsBuilder.call(this,onReady,style));return _this.pdf=new _Pdf2.default(src,void 0,pdfOpenOptions),_this.pageDescription={type:"pdf",src:_this.pdf,interactive:!0},_this.binds={pageCallback:_this.pageCallback.bind(_this)},_this.pdf.getHandler(_this.init.bind(_this)),_this}return _inherits(PdfBookPropsBuilder,_BookPropsBuilder),PdfBookPropsBuilder.prototype.dispose=function(){this.pdf.dispose(),_BookPropsBuilder.prototype.dispose.call(this)},PdfBookPropsBuilder.prototype.init=function(handler){var _this2=this,pages=this.pdf.getPagesNum();this.pages=pages,this.calcSheets(pages),pages>0?handler.getPage(1).then(function(page){var viewport=page.getViewport({scale:1}),size={width:viewport.width,height:viewport.height};_this2.calcProps(size.width,size.height),_this2.ready()}).catch(function(e){console.error(e)}):(this.props=this.defaults,this.ready())},PdfBookPropsBuilder.prototype.pageCallback=function(n){return this.pageDescription},PdfBookPropsBuilder}(_BookPropsBuilder3.default);exports.default=PdfBookPropsBuilder},function(module,exports,__webpack_require__){"use strict";function props(){var style=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"volume",def={height:.297,width:.21,backgroundColor:"",backgroundImage:"",backgroundStyle:"",highlightLinks:!0,lighting:"mixed",gravity:1,cachedPages:50,renderInactivePages:!0,renderInactivePagesOnMobile:!0,renderWhileFlipping:!1,pagesForPredicting:5,preloadPages:5,autoPlayDuration:5e3,rtl:!1,interactiveCorners:!0,maxDepth:.008,sheet:{startVelocity:1.2,cornerDeviation:.15,flexibility:10,flexibleCorner:.5,bending:11,wave:.3,shape:0,widthTexels:1920,heightTexels:1080,color:16777215,side:"color"},cover:{side:"transparent",binderTexture:"",depth:3e-4,padding:0,mass:.001},page:{depth:1e-4,mass:.001},cssLayerProps:{width:1024}},styles={volume:def,flat:_extends({},def,{lighting:"ambient",sheet:_extends({},def.sheet,{wave:.05,side:"transparent",shape:1}),cover:_extends({},def.cover,{depth:2e-5}),page:_extends({},def.page,{depth:1e-5})}),"volume-paddings":_extends({},def,{cover:_extends({},def.cover,{padding:.0025})})};return styles["volume-unrolling"]=_extends({},styles.volume,{sheet:_extends({},styles.volume.sheet,{shape:1})}),styles["volume-paddings-unrolling"]=_extends({},styles["volume-paddings"],{sheet:_extends({},styles["volume-paddings"].sheet,{shape:1})}),styles[style]||def}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.props=props},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _ImageBase2=(__webpack_require__(1),__webpack_require__(11)),_ImageBase3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_ImageBase2),BlankImage=function(_ImageBase){function BlankImage(context,width,height,color){_classCallCheck(this,BlankImage);var _this=_possibleConstructorReturn(this,_ImageBase.call(this,context,width,height,color));return Promise.resolve().then(function(){_this.startRender=function(){_this.renderBlankPage(),_this.finishRender()},_this.finishLoad()}),_this}return _inherits(BlankImage,_ImageBase),BlankImage}(_ImageBase3.default);exports.default=BlankImage},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _libs=__webpack_require__(1),_Prop2=__webpack_require__(4),_Prop3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_Prop2),BoolProp=function(_Prop){function BoolProp(){return _classCallCheck(this,BoolProp),_possibleConstructorReturn(this,_Prop.apply(this,arguments))}return _inherits(BoolProp,_Prop),BoolProp.prototype.setAuto=function(e){var _props=this.props,setValue=_props.setValue,defValue=_props.defValue;setValue(e.target.checked?"auto":defValue?"1":"0")},BoolProp.prototype.setValue=function(e){(0,this.props.setValue)(e.target.checked?"1":"0")},BoolProp.prototype.renderContent=function(){var _props2=this.props,name=_props2.name,value=_props2.value,defValue=_props2.defValue;_props2.setValue;return _libs.React.createElement("div",null,_libs.React.createElement("input",{type:"hidden",name:name,value:value}),_libs.React.createElement("div",{className:"checkbox"},_libs.React.createElement("label",null,_libs.React.createElement("input",{onChange:this.setAuto.bind(this),checked:"auto"===value,type:"checkbox"})," ",(0,_libs.tr)("auto")," ",_libs.React.createElement("i",{title:(0,_libs.tr)("Default value")},"(",(0,_libs.tr)(defValue?"yes":"no"),")"))),_libs.React.createElement("div",{className:"checkbox"},_libs.React.createElement("label",{className:"auto"===value?"hidden":""},_libs.React.createElement("input",{onChange:this.setValue.bind(this),checked:"1"===value,type:"checkbox"})," ",(0,_libs.tr)("yes"))))},BoolProp}(_Prop3.default);exports.default=BoolProp},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var Cache=function(){function Cache(){var maxSize=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0,sizeof=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cache.countSizeof;_classCallCheck(this,Cache),this.os=new Map,this.sizeof=sizeof,this.maxSize=maxSize,this.size=0}return Cache.prototype.forEach=function(clb){this.os.forEach(function(v,k){return clb([k,v])})},Cache.countSizeof=function(value){return 1},Cache.prototype.remove=function(k){var res=!1,v=this.os.get(k);return v.locked&&v.locked(k)||(this.size-=this.sizeof(v),v.dispose&&v.dispose(),this.os.delete(k),res=!0),res},Cache.prototype.freeSpace=function(){for(var arr=[],_iterator=this.os,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}var p=_ref;arr.push({timestamp:p[1].timestamp,key:p[0]})}arr.sort(function(a,b){return a.timestamp-b.timestamp});for(var i=0;i<arr.length&&this.size>3*this.maxSize/4;++i)this.remove(arr[i].key)},Cache.prototype.dispose=function(){for(var arr=[],_iterator2=this.os,_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[Symbol.iterator]();;){var _ref2;if(_isArray2){if(_i2>=_iterator2.length)break;_ref2=_iterator2[_i2++]}else{if(_i2=_iterator2.next(),_i2.done)break;_ref2=_i2.value}var p=_ref2;arr.push({v:p[1],k:p[0]})}for(var _iterator3=arr,_isArray3=Array.isArray(_iterator3),_i3=0,_iterator3=_isArray3?_iterator3:_iterator3[Symbol.iterator]();;){var _ref3;if(_isArray3){if(_i3>=_iterator3.length)break;_ref3=_iterator3[_i3++]}else{if(_i3=_iterator3.next(),_i3.done)break;_ref3=_i3.value}var o=_ref3;o.v.dispose&&o.v.dispose(),this.os.delete(o.k)}},Cache.recursionSizeof=function(value){var size=0;if(value){++size;var len=value.length;if(void 0===len)for(var p in value)value.hasOwnProperty(p)&&(size+=Cache.recursionSizeof(value[p]));else size+=len}return size},Cache.prototype.getTimestamp=function(){return Date.now()},Cache.prototype.get=function(key){var value=this.os.get(key);return value&&(value.timestamp=this.getTimestamp()),value},Cache.prototype.put=function(key,value){return value.timestamp=this.getTimestamp(),this.os.set(key,value),this.size+=this.sizeof(value),this.size>this.maxSize&&this.freeSpace(),value},Cache}();exports.default=Cache},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_libs=__webpack_require__(1),_Prop2=__webpack_require__(4),_Prop3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_Prop2),ColorProp=function(_Prop){function ColorProp(){return _classCallCheck(this,ColorProp),_possibleConstructorReturn(this,_Prop.apply(this,arguments))}return _inherits(ColorProp,_Prop),ColorProp.prototype.componentDidUpdate=function(){var _this2=this;if(!this.container){var container=this.refs.container,setValue=this.props.setValue;this.container=(0,_libs.$)(container),this.container.ColorPicker({documentx:container.ownerDocument,flat:!0,color:this.color2RGB(this.getColor()),onSubmit:function(){return _this2.container.css("display","none")},onChange:function(hsb,hex,rgb){return setValue(rgb.r<<16|rgb.g<<8|rgb.b)}}),(0,_libs.$)(container.ownerDocument).click(function(e){for(var c=container,el=e.target;el&&el!=c;)el=el.parentNode;Date.now()-_this2.container[0].ownerDocument.fb3dColorPickerClickTime>100&&!el&&(_this2.container.ColorPickerSetColor(_this2.color2RGB(_this2.getColor())),_this2.container.css("display","none"))})}},ColorProp.prototype.getColor=function(){return"auto"===this.props.value?this.props.defValue:this.props.value},ColorProp.prototype.color2RGB=function(c){return{r:c>>16&255,g:c>>8&255,b:255&c}},ColorProp.prototype.color2RGBA=function(c){return _extends({},this.color2RGB(c),{a:""===c?0:1})},ColorProp.prototype.showColorPicker=function(e){e.stopPropagation(),this.container[0].ownerDocument.fb3dColorPickerClickTime=Date.now(),this.container.css("display","block")},ColorProp.prototype.renderContent=function(){var _props=this.props,name=_props.name,defValue=_props.defValue,setValue=_props.setValue,value=void 0===this.props.value?"auto":this.props.value,rgba=this.color2RGBA(this.getColor()),defRgba=this.color2RGBA(defValue),defStyle={backgroundColor:["rgba(",defRgba.r,",",defRgba.g,",",defRgba.b,",",defRgba.a,")"].join("")},style={backgroundColor:["rgba(",rgba.r,",",rgba.g,",",rgba.b,",",rgba.a,")"].join("")};return _libs.React.createElement("div",{className:"color-prop"},_libs.React.createElement("div",{className:"input-group"},_libs.React.createElement("div",{className:"input-group-addon",style:defStyle,title:(0,_libs.tr)("Default value")}),_libs.React.createElement("input",{type:"hidden",name:name,value:value}),_libs.React.createElement("input",{type:"text",onClick:this.showColorPicker.bind(this),className:"form-control",id:name,style:style,value:style.backgroundColor}),_libs.React.createElement("span",{className:"input-group-btn"},_libs.React.createElement("a",{onClick:function(e){return[e.preventDefault(),setValue("auto")]},className:"btn btn-default"+("auto"===value?" disabled":"")},(0,_libs.tr)("auto")))),_libs.React.createElement("div",{ref:"container",className:"color-container"}))},ColorProp}(_Prop3.default);exports.default=ColorProp},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _EventConverter2=__webpack_require__(89),_EventConverter3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_EventConverter2),CustomEventConverter=function(_EventConverter){function CustomEventConverter(wnd,doc){var customTest=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!1},eDoc=arguments[3];_classCallCheck(this,CustomEventConverter);var _this=_possibleConstructorReturn(this,_EventConverter.call(this,wnd,doc));return _this.eDoc=eDoc,_this.customTest=customTest,_this.customs=[],_this}return _inherits(CustomEventConverter,_EventConverter),CustomEventConverter.prototype.test=function(object1,object2){return!(!object1||!object2)&&this.customTest(object1,object2)},CustomEventConverter.prototype.getCallback=function(object){return object.target.callback},CustomEventConverter.prototype.addCustom=function(custom){this.customs.push(custom)},CustomEventConverter.prototype.getObject=function(e,data){var object=void 0;if(data.doc===this.eDoc)for(var _iterator=this.customs,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}var custom=_ref;if(object=custom.testIntersection(e,data))break}return object},CustomEventConverter}(_EventConverter3.default);exports.default=CustomEventConverter},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0,exports.default=void 0;var _libs=__webpack_require__(1),DocMouseSimulator=function(){function DocMouseSimulator(jFrame,element){var bElement=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document.body;_classCallCheck(this,DocMouseSimulator),this.jFrame=jFrame,this.wnd=jFrame[0].contentWindow,this.doc=jFrame[0].contentDocument,this.element=element||doc.body,this.bElement=bElement,this.resendProperties=this.getDefaultResendProperties(),this.undefinedProperties=this.getDefaultUndefinedProperties(),this.cursors=[],this.onDocChangeClbs=[];for(var terms=[{find:":hover",replace:"."+DocMouseSimulator.HOVER},{find:":active",replace:"."+DocMouseSimulator.ACTIVE}],style=['<style type="text/css">'],i=0;i<this.doc.styleSheets.length;++i)for(var ss=this.doc.styleSheets[i],j=0;j<ss.cssRules.length;++j){for(var r=ss.cssRules[j],cssText=void 0,_iterator=terms,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}var term=_ref;~r.selectorText.indexOf(term.find)&&(cssText=(cssText||r.cssText).replace(new RegExp(term.find,"g"),term.replace))}cssText&&style.push(cssText)}style.push("</style>"),(0,_libs.$)(this.doc.head).append((0,_libs.$)(style.join("")))}return DocMouseSimulator.prototype.convertCoords=function(x,y){var jElement=(0,_libs.$)(this.element),offset=jElement.offset();return{x:offset.left+jElement.width()*x,y:offset.top+jElement.height()*(1-y)}},DocMouseSimulator.prototype.triggerEvent=function(element,e,p,type,advancedProps){for(var props={},_iterator2=this.resendProperties,_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[Symbol.iterator]();;){var _ref2;if(_isArray2){if(_i2>=_iterator2.length)break;_ref2=_iterator2[_i2++]}else{if(_i2=_iterator2.next(),_i2.done)break;_ref2=_i2.value}var _n=_ref2;props[_n]=e[_n]}for(var _iterator3=this.undefinedProperties,_isArray3=Array.isArray(_iterator3),_i3=0,_iterator3=_isArray3?_iterator3:_iterator3[Symbol.iterator]();;){var _ref3;if(_isArray3){if(_i3>=_iterator3.length)break;_ref3=_iterator3[_i3++]}else{if(_i3=_iterator3.next(),_i3.done)break;_ref3=_i3.value}props[_ref3]=void 0}for(var n in advancedProps)advancedProps.hasOwnProperty(n)&&(props[n]=advancedProps[n]);props.view=this.wnd,props.pageX=p.x,props.pageY=p.y;var jE=_libs.$.Event(type,props);jE.timeStamp=e.timeStamp,(0,_libs.$)(element).trigger(jE)},DocMouseSimulator.prototype.addClass=function(element,name){(0,_libs.$)(element).addClass(name);var style=this.wnd.getComputedStyle(element);this.cursors.push((0,_libs.$)(this.bElement).css("cursor")),(0,_libs.$)(this.bElement).css("cursor",style.getPropertyValue("cursor"))},DocMouseSimulator.prototype.removeClass=function(element,name){(0,_libs.$)(element).removeClass(name),(0,_libs.$)(this.bElement).css("cursor",this.cursors.pop())},DocMouseSimulator.prototype.enterElement=function(element){this.addClass(element,DocMouseSimulator.HOVER)},DocMouseSimulator.prototype.leaveElement=function(element){this.removeClass(element,DocMouseSimulator.HOVER)},DocMouseSimulator.prototype.activateElement=function(element){this.addClass(element,DocMouseSimulator.ACTIVE)},DocMouseSimulator.prototype.deactivateElement=function(element){this.removeClass(element,DocMouseSimulator.ACTIVE)},DocMouseSimulator.prototype.addDocChangeClb=function(clb){this.onDocChangeClbs.push(clb)},DocMouseSimulator.prototype.notify=function(){for(var _iterator4=this.onDocChangeClbs,_isArray4=Array.isArray(_iterator4),_i4=0,_iterator4=_isArray4?_iterator4:_iterator4[Symbol.iterator]();;){var _ref4;if(_isArray4){if(_i4>=_iterator4.length)break;_ref4=_iterator4[_i4++]}else{if(_i4=_iterator4.next(),_i4.done)break;_ref4=_i4.value}_ref4(this.wnd,this.doc)}},DocMouseSimulator.prototype.elementFromPoint=function(p){for(var node=this.doc.body,next=!0;next;){next=!1;for(var i=0;i<node.childNodes.length;++i){var child=node.childNodes[i];if(child instanceof this.wnd.Element){var jC=(0,_libs.$)(child),offset=jC.offset(),height=jC.height(),width=jC.width();if(p.x>offset.left&&p.x<offset.left+width&&p.y>offset.top&&p.y<offset.top+height){node=child,next=!0;break}}}}return node},DocMouseSimulator.prototype.getElement=function(p){var off0=this.jFrame.offset();this.jFrame.offset({left:.5*window.innerWidth-p.x,top:.5*window.innerHeight-p.y});var element=this.doc.elementFromPoint(p.x,p.y);return element||(element=this.doc.elementFromPoint(p.x,p.y)),this.jFrame.offset(off0),element||this.elementFromPoint(p)},DocMouseSimulator.prototype.simulate=function(e,doc,x,y){var p=this.convertCoords(x,y),element=doc===this.doc?this.getElement(p):void 0,trigger=void 0!==element,notify=!1;switch(e.type){case"mousedown":this.capElement&&(this.deactivateElement(this.capElement),notify=!0),this.capElement=element,this.capElement&&(this.activateElement(this.capElement),notify=!0);break;case"mouseup":this.capElement&&(this.deactivateElement(this.capElement),notify=!0),this.timeStamp=e.timeStamp;break;case"click":trigger=element&&this.capElement===element,this.capElement=void 0;break;case"mouseenter":case"mouseover":case"mousemove":var leaved=null;this.hovElement!==element&&this.hovElement&&(this.triggerEvent(this.hovElement,e,p,"mouseout",{relatedTarget:element||null}),this.leaveElement(this.hovElement),leaved=this.hovElement,this.hovElement=void 0,notify=!0),!this.hovElement&&element&&(this.triggerEvent(element,e,p,"mouseover",{relatedTarget:leaved}),this.enterElement(element),this.hovElement=element,notify=!0),trigger=element&&"mousemove"===e.type;break;case"mouseleave":case"mouseout":this.hovElement&&(this.triggerEvent(this.hovElement,e,p,"mouseout",{relatedTarget:e.relatedTarget}),this.leaveElement(this.hovElement),this.hovElement=void 0,notify=!0),trigger=!1}trigger&&this.triggerEvent(element,e,p,e.type),notify&&this.notify()},DocMouseSimulator.prototype.getDefaultUndefinedProperties=function(){return["clientX","clientY","offsetX","offsetY","screenX","screenY"]},DocMouseSimulator.prototype.getDefaultResendProperties=function(){return["altKey","bubbles","button","buttons","cancelable","changedTouches","char","charCode","ctrlKey","data","detail","eventPhase","isDefaultPrevented","key","keyCode","metaKey","pointerId","pointerType","shiftKey","targetTouches","touches","which"]},DocMouseSimulator}();DocMouseSimulator.HOVER="SIMULATED-HOVER",DocMouseSimulator.ACTIVE="SIMULATED-ACTIVE",exports.default=DocMouseSimulator},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var Dom2Image=function Dom2Image(wnd,doc,cache){function toSvg(node,options){function applyOptions(clone){return options.bgcolor&&(clone.style.backgroundColor=options.bgcolor),options.width&&(clone.style.width=options.width+"px"),options.height&&(clone.style.height=options.height+"px"),options.style&&self.window.Object.keys(options.style).forEach(function(property){clone.style[property]=options.style[property]}),clone}return options=options||{},Promise.resolve(node).then(function(node){return cloneNode(node,options.filter,!0)}).then(embedFonts).then(inlineImages).then(applyOptions).then(function(clone){return makeSvgDataUri(clone,options.width||util.width(node),options.height||util.height(node))})}function toPixelData(node,options){return draw(node,options||{}).then(function(canvas){return canvas.getContext("2d").getImageData(0,0,util.width(node),util.height(node)).data})}function toPng(node,options){return draw(node,options||{}).then(function(canvas){return canvas.toDataURL()})}function toJpeg(node,options){return options=options||{},draw(node,options).then(function(canvas){return canvas.toDataURL("image/jpeg",options.quality||1)})}function toBlob(node,options){return draw(node,options||{}).then(util.canvasToBlob)}function draw(domNode,options){function newCanvas(domNode){var canvas=self.document.createElement("canvas");if(canvas.width=options.width||util.width(domNode),canvas.height=options.height||util.height(domNode),options.bgcolor){var ctx=canvas.getContext("2d");ctx.fillStyle=options.bgcolor,ctx.fillRect(0,0,canvas.width,canvas.height)}return canvas}return toSvg(domNode,options).then(util.makeImage).then(util.delay(100)).then(function(image){var canvas=newCanvas(domNode);return canvas.getContext("2d").drawImage(image,0,0),canvas})}function cloneNode(node,filter,root){function makeNodeCopy(node){return util.isCanvas(node)?util.makeImage(node.toDataURL()):node.cloneNode(!1)}function cloneChildren(original,clone,filter){var children=original.childNodes;return 0===children.length?Promise.resolve(clone):function(parent,children,filter){var done=Promise.resolve();return children.forEach(function(child){done=done.then(function(){return cloneNode(child,filter)}).then(function(childClone){childClone&&parent.appendChild(childClone)})}),done}(clone,util.asArray(children),filter).then(function(){return clone})}function processClone(original,clone){function cloneStyle(){!function(source,target){source.cssText?target.cssText=source.cssText:function(source,target){util.asArray(source).forEach(function(name){target.setProperty(name,source.getPropertyValue(name),source.getPropertyPriority(name))})}(source,target)}(self.window.getComputedStyle(original),clone.style)}function clonePseudoElements(){function clonePseudoElement(element){var style=self.window.getComputedStyle(original,element),content=style.getPropertyValue("content");if(""!==content&&"none"!==content){var className=util.uid();clone.className=clone.className+" "+className;var styleElement=self.document.createElement("style");styleElement.appendChild(function(className,element,style){var selector="."+className+":"+element,cssText=style.cssText?function(style){var content=style.getPropertyValue("content");return style.cssText+" content: "+content+";"}(style):function(style){function formatProperty(name){return name+": "+style.getPropertyValue(name)+(style.getPropertyPriority(name)?" !important":"")}return util.asArray(style).map(formatProperty).join("; ")+";"}(style);return self.document.createTextNode(selector+"{"+cssText+"}")}(className,element,style)),clone.appendChild(styleElement)}}[":before",":after"].forEach(function(element){clonePseudoElement(element)})}function copyUserInput(){util.isTextArea(original)&&(clone.innerHTML=original.value),util.isInput(original)&&clone.setAttribute("value",original.value)}function fixSvg(){util.isSVG(clone)&&(clone.setAttribute("xmlns","http://www.w3.org/2000/svg"),util.isSVGRect(clone)&&["width","height"].forEach(function(attribute){var value=clone.getAttribute(attribute);value&&clone.style.setProperty(attribute,value)}))}return util.isElement(clone)?Promise.resolve().then(cloneStyle).then(clonePseudoElements).then(copyUserInput).then(fixSvg).then(function(){return clone}):clone}return root||!filter||filter(node)?Promise.resolve(node).then(makeNodeCopy).then(function(clone){return cloneChildren(node,clone,filter)}).then(function(clone){return processClone(node,clone)}):Promise.resolve()}function embedFonts(node){return fontFaces.resolveAll().then(function(cssText){var styleNode=self.document.createElement("style");return node.appendChild(styleNode),styleNode.appendChild(self.document.createTextNode(cssText)),node})}function inlineImages(node){return images.inlineAll(node).then(function(){return node})}function makeSvgDataUri(node,width,height){return Promise.resolve(node).then(function(node){return node.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new self.window.XMLSerializer).serializeToString(node)}).then(util.escapeXhtml).then(function(xhtml){return["data:image/svg+xml;charset=utf-8,",'<svg xmlns="http://www.w3.org/2000/svg" width="',width,'" height="',height,'">','<foreignObject x="0" y="0" width="100%" height="100%">',xhtml,"</foreignObject>","</svg>"].join("")})}_classCallCheck(this,Dom2Image);var self=this;this.window=wnd,this.document=doc,this.cache=cache;var util=function(){function mimes(){var WOFF="application/font-woff";return{woff:WOFF,woff2:WOFF,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}function parseExtension(url){var match=/\.([^\.\/]*?)$/g.exec(url);return match?match[1]:""}function mimeType(url){var extension=parseExtension(url).toLowerCase();return mimes()[extension]||""}function isDataUrl(url){return-1!==url.search(/^(data:)/)}function toBlob(canvas){return new Promise(function(resolve){for(var binaryString=self.window.atob(canvas.toDataURL().split(",")[1]),length=binaryString.length,binaryArray=new self.window.Uint8Array(length),i=0;i<length;i++)binaryArray[i]=binaryString.charCodeAt(i);resolve(new self.window.Blob([binaryArray],{type:"image/png"}))})}function canvasToBlob(canvas){return canvas.toBlob?new Promise(function(resolve){canvas.toBlob(resolve)}):toBlob(canvas)}function resolveUrl(url,baseUrl){var doc=self.document.implementation.createHTMLDocument(),base=doc.createElement("base");doc.head.appendChild(base);var a=doc.createElement("a");return doc.body.appendChild(a),base.href=baseUrl,a.href=url,a.href}function makeImage(uri){return new Promise(function(resolve,reject){var image=new self.window.Image;image.onload=function(){resolve(image)},image.onerror=reject,image.src=uri})}function getAndEncode(url){var data=self.cache.get(url);if(data)return data.content?data.content:new Promise(function(resolve){data.content?resolve(data.content):data.pendings.push(resolve)});data=self.cache.put(url,{pendings:[]});var TIMEOUT=3e4;return new Promise(function(resolve){function done(){if(4===request.readyState){if(200!==request.status)return void fail("cannot fetch resource: "+url+", status: "+request.status);var encoder=new self.window.FileReader;encoder.onloadend=function(){data.content=encoder.result.split(/,/)[1];for(var _iterator=data.pendings,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}_ref(data.content)}data.pendings=[],resolve(data.content)},encoder.readAsDataURL(request.response)}}function timeout(){fail("timeout of "+TIMEOUT+"ms occured while fetching resource: "+url)}function fail(message){console.error(message),resolve("")}var request=new self.window.XMLHttpRequest;request.onreadystatechange=done,request.ontimeout=timeout,request.responseType="blob",request.timeout=TIMEOUT,request.open("GET",url,!0),request.send()})}function dataAsUrl(content,type){return["data:",type,";base64,",content].join("")}function escape(string){return string.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}function delay(ms){return function(arg){return new Promise(function(resolve){setTimeout(function(){resolve(arg)},ms)})}}function asArray(arrayLike){for(var array=[],length=arrayLike.length,i=0;i<length;i++)array.push(arrayLike[i]);return array}function escapeXhtml(string){return string.replace(/(#|\n)/g,function(c){return"#"===c?"%23":"%0A"})}function width(node){var leftBorder=px(node,"border-left-width"),rightBorder=px(node,"border-right-width");return node.scrollWidth+leftBorder+rightBorder}function height(node){var topBorder=px(node,"border-top-width"),bottomBorder=px(node,"border-bottom-width");return node.scrollHeight+topBorder+bottomBorder}function px(node,styleProperty){var value=self.window.getComputedStyle(node).getPropertyValue(styleProperty);return parseFloat(value.replace("px",""))}function isElement(node){return node instanceof self.window.Element}function isCanvas(node){return node instanceof self.window.HTMLCanvasElement}function isTextArea(node){return node instanceof self.window.HTMLTextAreaElement}function isInput(node){return node instanceof self.window.HTMLInputElement}function isSVG(node){return node instanceof self.window.SVGElement}function isSVGRect(node){return node instanceof self.window.SVGRectElement}function isImage(node){return node instanceof self.window.HTMLImageElement}return{escape:escape,parseExtension:parseExtension,mimeType:mimeType,dataAsUrl:dataAsUrl,isDataUrl:isDataUrl,canvasToBlob:canvasToBlob,resolveUrl:resolveUrl,getAndEncode:getAndEncode,uid:function(){var index=0;return function(){return"u"+function(){return("0000"+(self.window.Math.random()*self.window.Math.pow(36,4)<<0).toString(36)).slice(-4)}()+index++}}(),delay:delay,asArray:asArray,escapeXhtml:escapeXhtml,makeImage:makeImage,width:width,height:height,isElement:isElement,isCanvas:isCanvas,isTextArea:isTextArea,isInput:isInput,isSVG:isSVG,isSVGRect:isSVGRect,isImage:isImage}}(),inliner=function(){function shouldProcess(string){return-1!==string.search(URL_REGEX)}function readUrls(string){for(var result=[],match=void 0;null!==(match=URL_REGEX.exec(string));)result.push(match[1]);return result.filter(function(url){return!util.isDataUrl(url)})}function inline(string,url,baseUrl,get){function urlAsRegex(url){return new self.window.RegExp(["(url\\(['\"]?)(",util.escape(url),")(['\"]?\\))"].join(""),"g")}return Promise.resolve(url).then(function(url){return baseUrl?util.resolveUrl(url,baseUrl):url}).then(get||util.getAndEncode).then(function(data){return util.dataAsUrl(data,util.mimeType(url))}).then(function(dataUrl){return string.replace(urlAsRegex(url),["$1",dataUrl,"$3"].join(""))})}function inlineAll(string,baseUrl,get){return function(){return!shouldProcess(string)}()?Promise.resolve(string):Promise.resolve(string).then(readUrls).then(function(urls){var done=Promise.resolve(string);return urls.forEach(function(url){done=done.then(function(string){return inline(string,url,baseUrl,get)})}),done})}var URL_REGEX=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:inlineAll,shouldProcess:shouldProcess,impl:{readUrls:readUrls,inline:inline}}}(),fontFaces=function(){function resolveAll(){return readAll(self.document).then(function(webFonts){return Promise.all(webFonts.map(function(webFont){return webFont.resolve()}))}).then(function(cssStrings){return cssStrings.join("\n")})}function readAll(){function selectWebFontRules(cssRules){return cssRules.filter(function(rule){return rule.type===CSSRule.FONT_FACE_RULE}).filter(function(rule){return inliner.shouldProcess(rule.style.getPropertyValue("src"))})}function getCssRules(styleSheets){var cssRules=[];return styleSheets.forEach(function(sheet){try{util.asArray(sheet.cssRules||[]).forEach(cssRules.push.bind(cssRules))}catch(e){console.log("Error while reading CSS rules from "+sheet.href,e.toString())}}),cssRules}function newWebFont(webFontRule){return{resolve:function(){var baseUrl=(webFontRule.parentStyleSheet||{}).href;return inliner.inlineAll(webFontRule.cssText,baseUrl)},src:function(){return webFontRule.style.getPropertyValue("src")}}}return Promise.resolve(util.asArray(self.document.styleSheets)).then(getCssRules).then(selectWebFontRules).then(function(rules){return rules.map(newWebFont)})}return{resolveAll:resolveAll,impl:{readAll:readAll}}}(),images=function(){function newImage(element){function inline(get){return util.isDataUrl(element.src)?Promise.resolve():Promise.resolve(element.src).then(get||util.getAndEncode).then(function(data){return util.dataAsUrl(data,util.mimeType(element.src))}).then(function(dataUrl){return new Promise(function(resolve,reject){element.onload=resolve,element.onerror=reject,element.src=dataUrl})})}return{inline:inline}}function inlineAll(node){return util.isElement(node)?function(node){var background=node.style.getPropertyValue("background");return background?inliner.inlineAll(background).then(function(inlined){node.style.setProperty("background",inlined,node.style.getPropertyPriority("background"))}).then(function(){return node}):Promise.resolve(node)}(node).then(function(){return util.isImage(node)?newImage(node).inline():Promise.all(util.asArray(node.childNodes).map(function(child){return inlineAll(child)}))}):Promise.resolve(node)}return{inlineAll:inlineAll,impl:{newImage:newImage}}}();this.toSvg=toSvg,this.toPng=toPng,this.toJpeg=toJpeg,this.toBlob=toBlob,this.toPixelData=toPixelData,this.impl={fontFaces:fontFaces,images:images,util:util,inliner:inliner}};exports.default=Dom2Image},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0,exports.default=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_libs=__webpack_require__(1),EventConverter=function(){function EventConverter(wnd,doc){_classCallCheck(this,EventConverter),this.wnd=wnd,this.doc=doc,this.enabled=!0}return EventConverter.prototype.setEnable=function(vl){vl||(this.mCapObject&&(this.notify(this.mCapObject,_libs.$.Event("mouseup"),"mouseup"),this.mCapObject=void 0),this.mHovObject&&(this.notify(this.mHovObject,_libs.$.Event("mouseout"),"mouseout"),this.mHovObject=void 0)),this.enabled=vl},EventConverter.prototype.getCallback=function(object){},EventConverter.prototype.notify=function(object,e,type){var callback=this.getCallback(object);if(callback){var props=_extends({},e,{type:type,view:this.wnd});callback(_libs.$.Event(type,props),object)}},EventConverter.prototype.convert=function(e,data){if(this.enabled){this.filter&&(e=this.filter(this.element,e));var object=this.getObject(e,data);(~e.type.indexOf("touch")?this.convertTouch(e,data,object):this.convertMouse(e,data,object))&&object&&this.notify(object,e,e.type)}},EventConverter.prototype.convertTouch=function(e,data,object){var notify=!0;switch(e.type){case"touchstart":this.tCapObject&&this.notify(this.tCapObject,e,"touchend"),this.tCapObject=object;break;case"touchend":this.tCapObject&&!this.test(this.tCapObject,object)?(this.notify(this.tCapObject,e,"touchend"),notify=!1):object&&this.test(this.tCapObject,object)&&this.notify(object,e,"touchtap"),this.tCapObject=void 0;break;case"touchtap":notify=!1}return notify},EventConverter.prototype.convertMouse=function(e,data,object){if(e.originalEvent&&e.originalEvent.sourceCapabilities&&e.originalEvent.sourceCapabilities.firesTouchEvents)return!1;var notify=!0;switch(e.type){case"mousedown":this.mCapObject&&this.notify(this.mCapObject,e,"mouseup"),this.mCapObject=object;break;case"mouseup":this.mCapObject&&!this.test(this.mCapObject,object)&&(this.notify(this.mCapObject,e,"mouseup"),notify=!1);break;case"click":notify=this.test(this.mCapObject,object),this.mCapObject=void 0;break;case"mouseenter":case"mouseover":case"mousemove":!this.test(this.mHovObject,object)&&this.mHovObject&&(this.notify(this.mHovObject,e,"mouseout"),this.mHovObject=void 0),!this.mHovObject&&object&&(this.notify(object,e,"mouseover"),this.mHovObject=object),notify="mousemove"===e.type;break;case"mouseleave":case"mouseout":this.mHovObject&&(this.notify(this.mHovObject,e,"mouseout"),this.mHovObject=void 0),notify=!1}return notify},EventConverter}();exports.default=EventConverter},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _libs=__webpack_require__(1),_Prop2=__webpack_require__(4),_Prop3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_Prop2),FileProp=function(_Prop){function FileProp(){return _classCallCheck(this,FileProp),_possibleConstructorReturn(this,_Prop.apply(this,arguments))}return _inherits(FileProp,_Prop),FileProp.prototype.selectFile=function(e){e.preventDefault();var _props=this.props,setValue=_props.setValue,post=_props.post,mime=_props.mime;wp.media.model.settings.post.id=post.ID;var frame=new wp.media.view.MediaFrame.Select({title:"Select a file",multiple:!1,library:{order:"DESC",orderby:"modified",type:mime,uploadedTo:null},button:{text:"Open"}});frame.on("select",function(){var file=frame.state().get("selection").first().toJSON();setValue(file.url)}),frame.open()},FileProp.prototype.renderContent=function(){var _props2=this.props,name=_props2.name,defValue=_props2.defValue,setValue=_props2.setValue,value=this.props.value||"auto";return _libs.React.createElement("div",{className:"input-group"},_libs.React.createElement("div",{className:"input-group-addon",title:(0,_libs.tr)("Default value")},defValue),_libs.React.createElement("input",{type:"text",className:"form-control",readOnly:!0,onChange:function(e){return setValue(e.target.value)},id:name,name:name,value:value}),_libs.React.createElement("span",{className:"input-group-btn"},_libs.React.createElement("a",{onClick:this.selectFile.bind(this),className:"btn btn-default"},"Select"),_libs.React.createElement("a",{onClick:function(e){return[e.preventDefault(),setValue("auto")]},className:"btn btn-default"+("auto"===value?" disabled":"")},(0,_libs.tr)("auto"))))},FileProp}(_Prop3.default);exports.default=FileProp},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0,exports.default=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_Utils=__webpack_require__(15),_Utils2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_Utils),Finder=function(){function Finder(strs,pattern,props){_classCallCheck(this,Finder),this.props=_extends({},Finder.defaults,props),this.strs=strs;this.merge(strs);this.hits=[],this.contexts=[],this.pattern=pattern.toLowerCase(),this.lstr=this.str.toLowerCase();for(var p=0;;){if(-1===(p=this.lstr.indexOf(this.pattern,p)))break;this.addHits(p),this.addContext(p),p+=this.pattern.length}}return Finder.isDelimetr=function(s){return s===Finder.DELIMITER},Finder.prototype.merge=function(){for(var as=[],map=[],strs=this.strs,p=0,i=0;i<strs.length;++i)strs[i].length&&(map.push({base:i,offset:p}),as.push(strs[i]),p+=strs[i].length,i<strs.length-1&&!Finder.isDelimetr(strs[i].charAt(strs[i].length-1))&&!Finder.isDelimetr(strs[i+1].charAt(0))&&(as.push(Finder.DELIMITER),++p));this.map=map,this.str=as.join("")},Finder.prototype.addHits=function(p){var info=this.map[_Utils2.default.lowerBound(this.map,{offset:p},function(a,b){return a.offset-b.offset})],chars=this.pattern.length,i=info.base;for(p-=info.offset;chars;)if(this.strs[i].length){var delimeter=i<this.strs.length-1&&!Finder.isDelimetr(this.strs[i].charAt(this.strs[i].length-1))&&!Finder.isDelimetr(this.strs[i+1].charAt(0)),length=Math.min(this.strs[i].length+(delimeter?1:0)-p,chars);p<this.strs[i].length&&this.hits.push({index:i,offset:p,length:Math.min(length,this.strs[i].length-p)}),chars-=length,++i,p=0}},Finder.prototype.addContext=function(p){for(var f=p,l=p+this.pattern.length-1,dels=this.props.contextLength,prevDels=dels+1;dels&&prevDels-dels;)if(prevDels=dels,dels%2){for(var i=f-2;i>=0;--i)if(Finder.isDelimetr(this.str[i])||0===i){f=0===i?0:i+1,--dels;break}}else for(var _i=l+2;_i<this.str.length;++_i)if(Finder.isDelimetr(this.str[_i])||_i===this.str.length-1){l=_i===this.str.length-1?_i===this.str.length-1:_i-1,--dels;break}this.contexts.push(this.str.substr(f,l-f+1))},Finder.prototype.getHits=function(){return this.hits},Finder.prototype.getContexts=function(){return this.contexts},Finder}();Finder.DELIMITER=" ",Finder.defaults={contextLength:7,hits:!0,contexts:!0},exports.default=Finder},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _libs=__webpack_require__(1),_Prop2=__webpack_require__(4),_Prop3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_Prop2),FloatProp=function(_Prop){function FloatProp(){return _classCallCheck(this,FloatProp),_possibleConstructorReturn(this,_Prop.apply(this,arguments))}return _inherits(FloatProp,_Prop),FloatProp.prototype.round=function(v){var t=parseFloat(v);if(!isNaN(t)){for(var k=0;t<100&&t>1e-5;)++k,t*=10;v=Math.round(t)/Math.pow(10,k)}return v},FloatProp.prototype.filterCharacters=function(s){for(var n=[],_iterator=s,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}var c=_ref;("."===c&&-1===n.indexOf(c)||c.match(/^\d$/))&&n.push(c)}return n.join("")},FloatProp.prototype.renderContent=function(){var _this2=this,_props=this.props,name=_props.name,value=_props.value,defValue=_props.defValue,setValue=_props.setValue;return _libs.React.createElement("div",{className:"input-group"},_libs.React.createElement("div",{className:"input-group-addon",title:(0,_libs.tr)("Default value")},this.round(defValue)),_libs.React.createElement("input",{type:"text",className:"form-control",onChange:function(e){return setValue(_this2.filterCharacters(e.target.value))},id:name,name:name,value:value}),_libs.React.createElement("span",{className:"input-group-btn"},_libs.React.createElement("a",{onClick:function(e){return[e.preventDefault(),setValue("auto")]},className:"btn btn-default"+("auto"===value?" disabled":"")},(0,_libs.tr)("auto"))))},FloatProp}(_Prop3.default);exports.default=FloatProp},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _libs=__webpack_require__(1),_Prop2=__webpack_require__(4),_Prop3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_Prop2),IntProp=function(_Prop){function IntProp(){return _classCallCheck(this,IntProp),_possibleConstructorReturn(this,_Prop.apply(this,arguments))}return _inherits(IntProp,_Prop),IntProp.prototype.filterCharacters=function(s){for(var n=[],_iterator=s,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}var c=_ref;c.match(/^\d$/)&&n.push(c)}return n.join("")},IntProp.prototype.renderContent=function(){var _this2=this,_props=this.props,name=_props.name,value=_props.value,defValue=_props.defValue,setValue=_props.setValue;return _libs.React.createElement("div",{className:"input-group"},_libs.React.createElement("div",{className:"input-group-addon",title:(0,_libs.tr)("Default value")},Math.round(defValue)),_libs.React.createElement("input",{type:"text",className:"form-control",onChange:function(e){return setValue(_this2.filterCharacters(e.target.value))},id:name,name:name,value:value}),_libs.React.createElement("span",{className:"input-group-btn"},_libs.React.createElement("a",{onClick:function(e){return[e.preventDefault(),setValue("auto")]},className:"btn btn-default"+("auto"===value?" disabled":"")},(0,_libs.tr)("auto"))))},IntProp}(_Prop3.default);exports.default=IntProp},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _libs=__webpack_require__(1),_ImageBase2=__webpack_require__(11),_ImageBase3=_interopRequireDefault(_ImageBase2),_BaseMathUtils=__webpack_require__(10),_BaseMathUtils2=_interopRequireDefault(_BaseMathUtils),_Dom2Image=__webpack_require__(88),_Dom2Image2=_interopRequireDefault(_Dom2Image),_DocMouseSimulator=__webpack_require__(87),_DocMouseSimulator2=_interopRequireDefault(_DocMouseSimulator),InteractiveImage=function(_ImageBase){function InteractiveImage(context,width,height,color,src,cache,injector){_classCallCheck(this,InteractiveImage);var _this=_possibleConstructorReturn(this,_ImageBase.call(this,context,width,height,color));_this.iId="i"+_BaseMathUtils2.default.getUnique();var jFrame=(0,_libs.$)('<iframe id="'+_this.iId+'" src="'+src+'" style="position: fixed; left: -1000px;"></iframe>');return(0,_libs.$)(_this.doc.body).append(jFrame),_this.frame=jFrame[0],_this.binds={},injector&&injector(_this.frame.contentWindow),_this.doc.implementation.hasFeature("www.http://w3.org/TR/SVG11/feature#Extensibility","1.1")&&(_this.image=new Image,_this.binds.imageLoad=function(){_this.renderImage(_this.image),_this.finishRender()},(0,_libs.$)(_this.image).on("load",_this.binds.imageLoad),_this.svgRender=new _Dom2Image2.default(_this.frame.contentWindow,_this.frame.contentDocument,cache)),_this.binds.frameLoad=function(){~_this.frame.contentDocument.title.indexOf("404")?(_this.startRender=function(){_this.renderNotFoundPage(),_this.finishRender()},_this.finishLoad()):setTimeout(function(){_this.frame&&(_this.width=(0,_libs.$)(_this.frame.contentDocument.body).width(),_this.height=(0,_libs.$)(_this.frame.contentDocument.body).height(),_this.resH=_this.height/_this.width*_this.resW,jFrame.css("width",_this.width+"px").css("height",_this.height+"px"),jFrame.offset({left:-_this.width-100,top:0}),_this.svgRender&&(_this.simulator=new _DocMouseSimulator2.default(jFrame,_this.frame.contentDocument.body,_this.element),_this.simulator.addDocChangeClb(_this.finishLoad.bind(_this))),_this.startRender=function(){_this.render()},_this.finishLoad())},500)},(0,_libs.$)(_this.frame.contentWindow).on("load",_this.binds.frameLoad),_this}return _inherits(InteractiveImage,_ImageBase),InteractiveImage.prototype.getSimulatedDoc=function(){return this.frame.contentDocument},InteractiveImage.prototype.render=function(){var _this2=this;this.svgRender?this.svgRender.toSvg(this.simulator.element,{height:this.height+"px",width:this.width+"px"}).then(function(dataUrl){_this2.image.src=dataUrl}).catch(function(error){console.error("Dom2Image: ",error),_this2.renderBlankPage(),_this2.finishRender()}):(0,_libs.html2canvas)(this.frame.contentDocument.body,{timeout:3e4}).then(function(canvas){_this2.renderImage(canvas),_this2.finishRender()})},InteractiveImage.prototype.dispose=function(){(0,_libs.$)(this.image).off("load",this.binds.imageLoad),(0,_libs.$)(this.frame.contentWindow).off("load",this.binds.frameLoad),(0,_libs.$)(this.doc.body).find("#"+this.iId).remove(),this.image&&(this.image.src="",delete this.image),this.frame.src="",delete this.frame,_ImageBase.prototype.dispose.call(this)},InteractiveImage.prototype.simulate=function(e,doc,x,y){this.simulator&&this.simulator.simulate(e,doc,x,y)},InteractiveImage}(_ImageBase3.default);exports.default=InteractiveImage},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _libs=__webpack_require__(1),_Component2=__webpack_require__(2),_Component3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_Component2),Pagination=function(_Component){function Pagination(){return _classCallCheck(this,Pagination),_possibleConstructorReturn(this,_Component.apply(this,arguments))}return _inherits(Pagination,_Component),Pagination.pagesList=function(active,pages){for(var r=[],p=0;p<pages;++p)(Math.abs(active-p)<2||p<2||pages-1-p<2||p<5&&active<4||p>pages-1-5&&active>pages-1-4)&&r.push(p);return r},Pagination.prototype.onClick=function(e){e.preventDefault();var page=parseInt((0,_libs.$)(e.target).attr("data"));page!==this.props.visiblePage&&this.props.setVisiblePage(page)},Pagination.prototype.render=function(){var _this2=this,_props=this.props,visiblePage=_props.visiblePage,itemsPerPage=_props.itemsPerPage,children=_props.children,pages=Math.ceil(children.length/itemsPerPage),page=Math.max(0,Math.min(visiblePage,pages-1)),lower=page*itemsPerPage,upper=(page+1)*itemsPerPage,ll=Math.max(page-1,0),rr=Math.min(page+1,pages-1);return _libs.React.createElement("div",{className:"paged-container"},_libs.React.createElement("div",{className:"items"},_libs.React.createElement("div",{className:"hidden"},children.filter(function(item,i){return i<lower})),_libs.React.createElement("div",{className:"visible"},children.filter(function(item,i){return i>=lower&&i<upper})),_libs.React.createElement("div",{className:"hidden"},children.filter(function(item,i){return i>=upper}))),_libs.React.createElement("nav",{"aria-label":"Page navigation"},_libs.React.createElement("div",{className:"text-center"},_libs.React.createElement("ul",{className:"pagination"},_libs.React.createElement("li",{className:page<1?"disabled":""},_libs.React.createElement("a",{onClick:this.onClick.bind(this),data:ll,title:(0,_libs.tr)("Previous")},_libs.React.createElement("span",{data:ll,"aria-hidden":"true"},"«"))),Pagination.pagesList(page,pages).map(function(p){return _libs.React.createElement("li",{key:p,className:p===page?"active":""},_libs.React.createElement("a",{onClick:_this2.onClick.bind(_this2),data:p},p+1))}),_libs.React.createElement("li",{className:page>=pages-1?"disabled":""},_libs.React.createElement("a",{onClick:this.onClick.bind(this),data:rr,title:(0,_libs.tr)("Next")},_libs.React.createElement("span",{data:rr,"aria-hidden":"true"},"»")))))))},Pagination}(_Component3.default);exports.default=Pagination},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _libs=__webpack_require__(1),_ImageBase2=__webpack_require__(11),_ImageBase3=_interopRequireDefault(_ImageBase2),_Pdf=__webpack_require__(26),_Pdf2=_interopRequireDefault(_Pdf),_BaseMathUtils=__webpack_require__(10),_BaseMathUtils2=_interopRequireDefault(_BaseMathUtils),_CustomEventConverter=__webpack_require__(86),_CustomEventConverter2=_interopRequireDefault(_CustomEventConverter),_PolyTarget=__webpack_require__(102),_PolyTarget2=_interopRequireDefault(_PolyTarget),_Finder=__webpack_require__(91),_Finder2=_interopRequireDefault(_Finder),PdfImage=function(_ImageBase){function PdfImage(context,width,height,color,pdf,n){_classCallCheck(this,PdfImage);var _this=_possibleConstructorReturn(this,_ImageBase.call(this,context,width,height,color));return _this.query="",_this.n=n,_this.pdf=pdf,_this.v={x:0,y:0,z:0,set:function(x,y,z){return this.x=x,this.y=y,this.z=z,this},transform:function(m){var x=m.m[0][0]*this.x+m.m[1][0]*this.y+m.m[2][0]*this.z,y=m.m[0][1]*this.x+m.m[1][1]*this.y+m.m[2][1]*this.z,z=m.m[0][2]*this.x+m.m[0][2]*this.y+m.m[2][0]*this.z;return this.x=x,this.y=y,this.z=z,this}},_this.m={m:[[1,0,0],[0,1,0],[0,0,1]],set:function(m00,m01,m02,m10,m11,m12,m20,m21,m22){return this.m=[[m00,m01,m02],[m10,m11,m12],[m20,m21,m22]],this}},_this.startRender=function(){_this.pdf.getHandler(_this.render.bind(_this))},Promise.resolve().then(function(){return _this.pdf.getHandler(_this.init.bind(_this))}),_this.cssLayerRequests=[],_this}return _inherits(PdfImage,_ImageBase),PdfImage.prototype.setQuery=function(query){this.query=query.trim(),this.textContent&&this.setHits(this.textContent)},PdfImage.prototype.rectSize=function(r){return{width:r[2]-r[0],height:r[3]-r[1]}},PdfImage.prototype.createPoly=function(m,p,s){var poly=[],v=this.v;return v.set(p.x,p.y,1).transform(m),poly.push({x:v.x,y:v.y}),v.set(p.x,p.y+s.height,1).transform(m),poly.push({x:v.x,y:v.y}),v.set(p.x+s.width,p.y+s.height,1).transform(m),poly.push({x:v.x,y:v.y}),v.set(p.x+s.width,p.y,1).transform(m),poly.push({x:v.x,y:v.y}),poly},PdfImage.prototype.getSimulatedDoc=function(){return this},PdfImage.prototype.simulate=function(e,doc,x,y){this.eventConverter&&this.eventConverter.convert(e,{doc:doc,x:x,y:y})},PdfImage.prototype.setAnnotations=function(annos){var _this2=this,t=this.viewport.transform,htmls=[],r=function(n){return(100*n+"").substr(0,5)},targets=[];this.m.set(t[0],t[1],0,t[2],t[3],0,t[4],t[5],1);for(var _iterator=annos,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}var anno=_ref;if("Link"===anno.subtype||"Widget"===anno.subtype){var rect=anno.rect,aPos={x:rect[0],y:rect[1]},aSz=this.rectSize(rect),_target=new _PolyTarget2.default(this.createPoly(this.m,aPos,aSz).map(function(p){return{x:p.x/_this2.viewport.width,y:1-p.y/_this2.viewport.height}}));_target.anno=anno,_target.callback=this.annoClb.bind(this),targets.push(_target);var p=_target.poly;htmls.push('<div class="fb3d-block fb3d-link" style="top: '+r(1-p[2].y)+"%; left: "+r(p[0].x)+"%; width: "+r(p[2].x-p[0].x)+"%; height: "+r(p[2].y-p[0].y)+'%;"><a></a></div>')}}if(targets.length){this.eventConverter=new _CustomEventConverter2.default(this.wnd,this.doc,_PolyTarget2.default.test,this.getSimulatedDoc());for(var _iterator2=targets,_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[Symbol.iterator]();;){var _ref2;if(_isArray2){if(_i2>=_iterator2.length)break;_ref2=_iterator2[_i2++]}else{if(_i2=_iterator2.next(),_i2.done)break;_ref2=_i2.value}var target=_ref2;this.eventConverter.addCustom(target)}}this.cssLayer={html:htmls.length?"<pdf-layer>"+htmls.join("")+"</pdf-layer>":void 0},this.resolveCssLayerRequests()},PdfImage.prototype.resolveCssLayerRequests=function(){if(this.cssLayer)for(var _iterator3=this.cssLayerRequests,_isArray3=Array.isArray(_iterator3),_i3=0,_iterator3=_isArray3?_iterator3:_iterator3[Symbol.iterator]();;){var _ref3;if(_isArray3){if(_i3>=_iterator3.length)break;_ref3=_iterator3[_i3++]}else{if(_i3=_iterator3.next(),_i3.done)break;_ref3=_i3.value}var r=_ref3;r(this.cssLayer.html?this.cssLayer:void 0)}},PdfImage.prototype.getCSSLayer=function(){var _this3=this;return new Promise(function(resolve){_this3.cssLayerRequests.push(resolve),_this3.resolveCssLayerRequests()})},PdfImage.prototype.setHits=function(textContent){this.textContent=textContent,""!==this.query&&(this.finder=new _Finder2.default(textContent.items.map(function(item){return item.str}),this.query,{contexts:!1}))},PdfImage.prototype.renderHits=function(){var _this4=this;if(this.finder){for(var testSz=(this.page.view,(0,_libs.$)('<div style="position: absolute; visibility: hidden;"></div>').appendTo("body")),textDiv=testSz[0],baseOffset=testSz.offset().left,_iterator4=this.finder.getHits(),_isArray4=Array.isArray(_iterator4),_i4=0,_iterator4=_isArray4?_iterator4:_iterator4[Symbol.iterator]();;){var _ref4;if(_isArray4){if(_i4>=_iterator4.length)break;_ref4=_iterator4[_i4++]}else{if(_i4=_iterator4.next(),_i4.done)break;_ref4=_i4.value}var hit=_ref4,item=this.textContent.items[hit.index],t=_libs.PDFJS.Util.transform(this.viewport.transform,item.transform),style=this.textContent.styles[item.fontName],angle=Math.atan2(t[1],t[0])+(style.vertical?Math.PI/2:0),fontHeight=Math.sqrt(t[2]*t[2]+t[3]*t[3]),fontAscent=style.ascent?style.ascent*fontHeight:style.descent?(1+style.descent)*fontHeight:fontHeight;testSz.html(item.str.substr(0,hit.offset)+"<span>"+item.str.substr(hit.offset,hit.length)+"</span>"+item.str.substr(hit.offset+hit.length)),textDiv.style.fontSize=fontHeight+"px",textDiv.style.fontFamily=style.fontFamily;var testSpan=testSz.find("span"),iwidth=style.vertical?item.height*this.viewport.scale:item.width*this.viewport.scale,width=testSz.width(),relativeOffset=(testSpan.offset().left-baseOffset)/width;this.m.set(1,0,0,0,1,0,t[4]+fontAscent*Math.sin(angle),t[5]-fontAscent*Math.cos(angle),1);var poly=this.createPoly(this.m,{x:relativeOffset*iwidth,y:0},{width:iwidth*testSpan.width()/width,height:testSpan.height()});poly=poly.map(function(p){return{x:p.x/_this4.viewport.width,y:1-p.y/_this4.viewport.height}}),this.renderHit(poly)}testSz.remove()}},PdfImage.prototype.annoClb=function(e,data){this.context.dispatchEvent&&this.context.dispatchEvent({type:"pdfAnnotation",event:e,annotation:data.target.anno})},PdfImage.prototype.calcViewport=function(){var scale=_BaseMathUtils2.default.calcScale(this.size.width,this.size.height,this.resW,this.resH);(!this.viewport||Math.abs(this.viewport.scale-scale)>1e-4)&&(this.viewport=this.page.getViewport({scale:scale}),"full"!==this.type&&("right"===this.type?(this.viewport.offsetX+=.5*this.viewport.width*1.0005,this.viewport.transform[4]-=.5*this.viewport.width*1.0005,this.viewport.width*=.5/1.0005):this.viewport.width/=2),this.resW=this.width=this.viewport.width,this.resH=this.height=this.viewport.height)},PdfImage.prototype.init=function(){var _this5=this;this.type=this.pdf.getPageType(this.n),this.pdf.getPage(this.n).then(function(page){_this5.page=page,_this5.size=_Pdf2.default.getPageSize(page),"full"!==_this5.type&&(_this5.size.width/=2),page.getAnnotations().then(_this5.setAnnotations.bind(_this5)),page.getTextContent().then(_this5.setHits.bind(_this5)),_this5.calcViewport(),_this5.finishLoad()}).catch(function(e){console.error("Cannot load PDF page: "+(_this5.n+1)),console.error(e),_this5.finishLoad()})},PdfImage.prototype.setResolution=function(res){_ImageBase.prototype.setResolution.call(this,res),this.page&&this.calcViewport()},PdfImage.prototype.render=function(handler){var _this6=this;if(this.page){this.pushCtx();this.ctx.clearRect(0,0,this.c.width,this.c.height),this.renderTask=this.page.render({canvasContext:this.ctx,viewport:this.viewport}),this.renderTask.onContinue=function(continueRender){_this6.renderPause?_this6.continueRender=continueRender:continueRender()},this.renderTask.promise.then(function(){_this6.renderHits(),_this6.popCtx(),_this6.finishRender()}).catch(function(e){_this6.popCtx(),_this6.finishRender(!0)})}else this.renderBlankPage(),this.finishRender()},PdfImage}(_ImageBase3.default);exports.default=PdfImage},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0,exports.default=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_libs=__webpack_require__(1),_TextProp=__webpack_require__(101),_TextProp2=_interopRequireDefault(_TextProp),_IntProp=__webpack_require__(93),_IntProp2=_interopRequireDefault(_IntProp),_BoolProp=__webpack_require__(83),_BoolProp2=_interopRequireDefault(_BoolProp),_FloatProp=__webpack_require__(92),_FloatProp2=_interopRequireDefault(_FloatProp),_FileProp=__webpack_require__(90),_FileProp2=_interopRequireDefault(_FileProp),_ColorProp=__webpack_require__(85),_ColorProp2=_interopRequireDefault(_ColorProp),_SelectProp=__webpack_require__(98),_SelectProp2=_interopRequireDefault(_SelectProp),_TextAreaProp=__webpack_require__(100),_TextAreaProp2=_interopRequireDefault(_TextAreaProp),PropFactory=function(){function PropFactory(){_classCallCheck(this,PropFactory)}return PropFactory.createProp=function(props){var key=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,Class=PropFactory.Props[props.type];return Class?_libs.React.createElement(Class,_extends({key:key},props)):null},PropFactory}();PropFactory.Props={text:_TextProp2.default,file:_FileProp2.default,int:_IntProp2.default,bool:_BoolProp2.default,float:_FloatProp2.default,color:_ColorProp2.default,select:_SelectProp2.default,textArea:_TextAreaProp2.default},exports.default=PropFactory},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _libs=__webpack_require__(1),_Prop2=__webpack_require__(4),_Prop3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_Prop2),SelectProp=function(_Prop){function SelectProp(){return _classCallCheck(this,SelectProp),_possibleConstructorReturn(this,_Prop.apply(this,arguments))}return _inherits(SelectProp,_Prop),SelectProp.prototype.renderContent=function(){var _props=this.props,name=_props.name,defValue=_props.defValue,setValue=_props.setValue,options=_props.options,value=this.props.value||"auto";return _libs.React.createElement("div",{className:"input-group"},_libs.React.createElement("div",{className:"input-group-addon",title:(0,_libs.tr)("Default value")},options[defValue]),_libs.React.createElement("select",{className:"form-control",onChange:function(e){return setValue(e.target.value)},name:name,id:name,value:value},_libs.React.createElement("option",{value:"auto"},(0,_libs.tr)("auto")),Object.keys(options).map(function(name){return _libs.React.createElement("option",{value:name},options[name])})),_libs.React.createElement("span",{className:"input-group-btn"},_libs.React.createElement("a",{onClick:function(e){return[e.preventDefault(),setValue("auto")]},className:"btn btn-default"+("auto"===value?" disabled":"")},(0,_libs.tr)("auto"))))},SelectProp}(_Prop3.default);exports.default=SelectProp},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _libs=__webpack_require__(1),_ImageBase2=__webpack_require__(11),_ImageBase3=_interopRequireDefault(_ImageBase2),_Utils=__webpack_require__(15),_Utils2=_interopRequireDefault(_Utils),StaticImage=function(_ImageBase){function StaticImage(context,width,height,color,src){_classCallCheck(this,StaticImage);var _this=_possibleConstructorReturn(this,_ImageBase.call(this,context,width,height,color));return _this.binds={},_this.image=new Image,_this.image.crossOrigin="Anonymous",_this.binds.imageLoad=function(){_this.width=_this.image.width,_this.height=_this.image.height,_this.resH=_this.height/_this.width*_this.resW,_this.startRender=function(){_this.renderImage(_this.image),_this.finishRender()},_this.finishLoad()},_this.binds.imageError=function(){_this.startRender=function(){_this.renderNotFoundPage(),_this.finishRender()},_this.finishLoad()},(0,_libs.$)(_this.image).on("load",_this.binds.imageLoad).on("error",_this.binds.imageError),_this.image.src=_Utils2.default.normalizeUrl(src),_this}return _inherits(StaticImage,_ImageBase),StaticImage.prototype.dispose=function(){(0,_libs.$)(this.image).off("load",this.binds.imageLoad).off("error",this.binds.imageError),this.image.src="",delete this.image,_ImageBase.prototype.dispose.call(this)},StaticImage}(_ImageBase3.default);exports.default=StaticImage},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _libs=__webpack_require__(1),_Prop2=__webpack_require__(4),_Prop3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_Prop2),TextAreaProp=function(_Prop){function TextAreaProp(){return _classCallCheck(this,TextAreaProp),_possibleConstructorReturn(this,_Prop.apply(this,arguments))}return _inherits(TextAreaProp,_Prop),TextAreaProp.prototype.renderContent=function(){var _props=this.props,name=_props.name,setValue=(_props.defValue,_props.setValue),value=this.props.value||"auto";return"auto"===value&&(value=""),_libs.React.createElement("textarea",{id:name,name:name,onChange:function(e){return setValue(e.target.value)},className:"form-control",value:value})},TextAreaProp}(_Prop3.default);exports.default=TextAreaProp},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _libs=__webpack_require__(1),_Prop2=__webpack_require__(4),_Prop3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_Prop2),TextProp=function(_Prop){function TextProp(){return _classCallCheck(this,TextProp),_possibleConstructorReturn(this,_Prop.apply(this,arguments))}return _inherits(TextProp,_Prop),TextProp.prototype.renderContent=function(){var _props=this.props,name=_props.name,defValue=_props.defValue,setValue=_props.setValue,value=this.props.value||"auto";return _libs.React.createElement("div",{className:"input-group"},_libs.React.createElement("div",{className:"input-group-addon",title:(0,_libs.tr)("Default value")},defValue),_libs.React.createElement("input",{type:"text",className:"form-control",onChange:function(e){return setValue(e.target.value)},id:name,name:name,value:value}),_libs.React.createElement("span",{className:"input-group-btn"},_libs.React.createElement("a",{onClick:function(e){return[e.preventDefault(),setValue("auto")]},className:"btn btn-default"+("auto"===value?" disabled":"")},(0,_libs.tr)("auto"))))},TextProp}(_Prop3.default);exports.default=TextProp},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _Target2=__webpack_require__(103),_Target3=_interopRequireDefault(_Target2),_BaseMathUtils=__webpack_require__(10),_BaseMathUtils2=_interopRequireDefault(_BaseMathUtils),PolyTarget=function(_Target){function PolyTarget(poly){_classCallCheck(this,PolyTarget);var _this=_possibleConstructorReturn(this,_Target.call(this));return _this.poly=poly,_this}return _inherits(PolyTarget,_Target),PolyTarget.prototype.testIntersection=function(e,p){return _BaseMathUtils2.default.isInsidePoly(this.poly,p)?{target:this,data:p}:void 0},PolyTarget}(_Target3.default);exports.default=PolyTarget},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var Target=function(){function Target(){_classCallCheck(this,Target)}return Target.test=function(object1,object2){return object1.target===object2.target},Target}();exports.default=Target},function(module,exports,__webpack_require__){"use strict";function identity(fn){return fn}function factory(ReactComponent,isValidElement,ReactNoopUpdateQueue){function validateMethodOverride(isAlreadyDefined,name){var specPolicy=ReactClassInterface.hasOwnProperty(name)?ReactClassInterface[name]:null;ReactClassMixin.hasOwnProperty(name)&&_invariant("OVERRIDE_BASE"===specPolicy,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",name),isAlreadyDefined&&_invariant("DEFINE_MANY"===specPolicy||"DEFINE_MANY_MERGED"===specPolicy,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",name)}function mixSpecIntoComponent(Constructor,spec){if(spec){_invariant("function"!=typeof spec,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),_invariant(!isValidElement(spec),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var proto=Constructor.prototype,autoBindPairs=proto.__reactAutoBindPairs;spec.hasOwnProperty(MIXINS_KEY)&&RESERVED_SPEC_KEYS.mixins(Constructor,spec.mixins);for(var name in spec)if(spec.hasOwnProperty(name)&&name!==MIXINS_KEY){var property=spec[name],isAlreadyDefined=proto.hasOwnProperty(name);if(validateMethodOverride(isAlreadyDefined,name),RESERVED_SPEC_KEYS.hasOwnProperty(name))RESERVED_SPEC_KEYS[name](Constructor,property);else{var isReactClassMethod=ReactClassInterface.hasOwnProperty(name),isFunction="function"==typeof property,shouldAutoBind=isFunction&&!isReactClassMethod&&!isAlreadyDefined&&!1!==spec.autobind;if(shouldAutoBind)autoBindPairs.push(name,property),proto[name]=property;else if(isAlreadyDefined){var specPolicy=ReactClassInterface[name];_invariant(isReactClassMethod&&("DEFINE_MANY_MERGED"===specPolicy||"DEFINE_MANY"===specPolicy),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",specPolicy,name),"DEFINE_MANY_MERGED"===specPolicy?proto[name]=createMergedResultFunction(proto[name],property):"DEFINE_MANY"===specPolicy&&(proto[name]=createChainedFunction(proto[name],property))}else proto[name]=property}}}else;}function mixStaticSpecIntoComponent(Constructor,statics){if(statics)for(var name in statics){var property=statics[name];if(statics.hasOwnProperty(name)){var isReserved=name in RESERVED_SPEC_KEYS;_invariant(!isReserved,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',name);var isAlreadyDefined=name in Constructor;if(isAlreadyDefined){var specPolicy=ReactClassStaticInterface.hasOwnProperty(name)?ReactClassStaticInterface[name]:null;return _invariant("DEFINE_MANY_MERGED"===specPolicy,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",name),void(Constructor[name]=createMergedResultFunction(Constructor[name],property))}Constructor[name]=property}}}function mergeIntoWithNoDuplicateKeys(one,two){_invariant(one&&two&&"object"==typeof one&&"object"==typeof two,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var key in two)two.hasOwnProperty(key)&&(_invariant(void 0===one[key],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",key),one[key]=two[key]);return one}function createMergedResultFunction(one,two){return function(){var a=one.apply(this,arguments),b=two.apply(this,arguments);if(null==a)return b;if(null==b)return a;var c={};return mergeIntoWithNoDuplicateKeys(c,a),mergeIntoWithNoDuplicateKeys(c,b),c}}function createChainedFunction(one,two){return function(){one.apply(this,arguments),two.apply(this,arguments)}}function bindAutoBindMethod(component,method){var boundMethod=method.bind(component);return boundMethod}function bindAutoBindMethods(component){for(var pairs=component.__reactAutoBindPairs,i=0;i<pairs.length;i+=2){var autoBindKey=pairs[i],method=pairs[i+1];component[autoBindKey]=bindAutoBindMethod(component,method)}}function createClass(spec){var Constructor=identity(function(props,context,updater){this.__reactAutoBindPairs.length&&bindAutoBindMethods(this),this.props=props,this.context=context,this.refs=emptyObject,this.updater=updater||ReactNoopUpdateQueue,this.state=null;var initialState=this.getInitialState?this.getInitialState():null;_invariant("object"==typeof initialState&&!Array.isArray(initialState),"%s.getInitialState(): must return an object or null",Constructor.displayName||"ReactCompositeComponent"),this.state=initialState});Constructor.prototype=new ReactClassComponent,Constructor.prototype.constructor=Constructor,Constructor.prototype.__reactAutoBindPairs=[],injectedMixins.forEach(mixSpecIntoComponent.bind(null,Constructor)),mixSpecIntoComponent(Constructor,IsMountedPreMixin),mixSpecIntoComponent(Constructor,spec),mixSpecIntoComponent(Constructor,IsMountedPostMixin),Constructor.getDefaultProps&&(Constructor.defaultProps=Constructor.getDefaultProps()),_invariant(Constructor.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var methodName in ReactClassInterface)Constructor.prototype[methodName]||(Constructor.prototype[methodName]=null);return Constructor}var injectedMixins=[],ReactClassInterface={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},ReactClassStaticInterface={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},RESERVED_SPEC_KEYS={displayName:function(Constructor,displayName){Constructor.displayName=displayName},mixins:function(Constructor,mixins){if(mixins)for(var i=0;i<mixins.length;i++)mixSpecIntoComponent(Constructor,mixins[i])},childContextTypes:function(Constructor,childContextTypes){Constructor.childContextTypes=_assign({},Constructor.childContextTypes,childContextTypes)},contextTypes:function(Constructor,contextTypes){Constructor.contextTypes=_assign({},Constructor.contextTypes,contextTypes)},getDefaultProps:function(Constructor,getDefaultProps){Constructor.getDefaultProps?Constructor.getDefaultProps=createMergedResultFunction(Constructor.getDefaultProps,getDefaultProps):Constructor.getDefaultProps=getDefaultProps},propTypes:function(Constructor,propTypes){Constructor.propTypes=_assign({},Constructor.propTypes,propTypes)},statics:function(Constructor,statics){mixStaticSpecIntoComponent(Constructor,statics)},autobind:function(){}},IsMountedPreMixin={componentDidMount:function(){this.__isMounted=!0}},IsMountedPostMixin={componentWillUnmount:function(){this.__isMounted=!1}},ReactClassMixin={replaceState:function(newState,callback){this.updater.enqueueReplaceState(this,newState,callback)},isMounted:function(){return!!this.__isMounted}},ReactClassComponent=function(){};return _assign(ReactClassComponent.prototype,ReactComponent.prototype,ReactClassMixin),createClass}var _assign=__webpack_require__(9),emptyObject=__webpack_require__(28),_invariant=__webpack_require__(8),MIXINS_KEY="mixins";module.exports=factory},function(module,exports,__webpack_require__){"use strict";function getStatics(component){return ReactIs.isMemo(component)?MEMO_STATICS:TYPE_STATICS[component.$$typeof]||REACT_STATICS}function hoistNonReactStatics(targetComponent,sourceComponent,blacklist){if("string"!=typeof sourceComponent){if(objectPrototype){var inheritedComponent=getPrototypeOf(sourceComponent);inheritedComponent&&inheritedComponent!==objectPrototype&&hoistNonReactStatics(targetComponent,inheritedComponent,blacklist)}var keys=getOwnPropertyNames(sourceComponent);getOwnPropertySymbols&&(keys=keys.concat(getOwnPropertySymbols(sourceComponent)));for(var targetStatics=getStatics(targetComponent),sourceStatics=getStatics(sourceComponent),i=0;i<keys.length;++i){var key=keys[i];if(!(KNOWN_STATICS[key]||blacklist&&blacklist[key]||sourceStatics&&sourceStatics[key]||targetStatics&&targetStatics[key])){var descriptor=getOwnPropertyDescriptor(sourceComponent,key);try{defineProperty(targetComponent,key,descriptor)}catch(e){}}}return targetComponent}return targetComponent}var ReactIs=__webpack_require__(34),REACT_STATICS={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},KNOWN_STATICS={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[ReactIs.ForwardRef]=FORWARD_REF_STATICS;var defineProperty=Object.defineProperty,getOwnPropertyNames=Object.getOwnPropertyNames,getOwnPropertySymbols=Object.getOwnPropertySymbols,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,getPrototypeOf=Object.getPrototypeOf,objectPrototype=Object.prototype;module.exports=hoistNonReactStatics},function(module,exports,__webpack_require__){"use strict";var invariant=function(condition,format,a,b,c,d,e,f){if(!condition){var error;if(void 0===format)error=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var args=[a,b,c,d,e,f],argIndex=0;error=new Error(format.replace(/%s/g,function(){return args[argIndex++]})),error.name="Invariant Violation"}throw error.framesToPop=1,error}};module.exports=invariant},function(module,__webpack_exports__,__webpack_require__){"use strict";function baseGetTag(value){return null==value?void 0===value?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(value)?__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__getRawTag_js__.a)(value):__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__objectToString_js__.a)(value)}var __WEBPACK_IMPORTED_MODULE_0__Symbol_js__=__webpack_require__(29),__WEBPACK_IMPORTED_MODULE_1__getRawTag_js__=__webpack_require__(110),__WEBPACK_IMPORTED_MODULE_2__objectToString_js__=__webpack_require__(111),nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=__WEBPACK_IMPORTED_MODULE_0__Symbol_js__.a?__WEBPACK_IMPORTED_MODULE_0__Symbol_js__.a.toStringTag:void 0;__webpack_exports__.a=baseGetTag},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global){var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global;__webpack_exports__.a=freeGlobal}).call(__webpack_exports__,__webpack_require__(18))},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__overArg_js__=__webpack_require__(112),getPrototype=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__overArg_js__.a)(Object.getPrototypeOf,Object);__webpack_exports__.a=getPrototype},function(module,__webpack_exports__,__webpack_require__){"use strict";function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=void 0;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}var __WEBPACK_IMPORTED_MODULE_0__Symbol_js__=__webpack_require__(29),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=__WEBPACK_IMPORTED_MODULE_0__Symbol_js__.a?__WEBPACK_IMPORTED_MODULE_0__Symbol_js__.a.toStringTag:void 0;__webpack_exports__.a=getRawTag},function(module,__webpack_exports__,__webpack_require__){"use strict";function objectToString(value){return nativeObjectToString.call(value)}var objectProto=Object.prototype,nativeObjectToString=objectProto.toString;__webpack_exports__.a=objectToString},function(module,__webpack_exports__,__webpack_require__){"use strict";function overArg(func,transform){return function(arg){return func(transform(arg))}}__webpack_exports__.a=overArg},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__freeGlobal_js__=__webpack_require__(108),freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=__WEBPACK_IMPORTED_MODULE_0__freeGlobal_js__.a||freeSelf||Function("return this")();__webpack_exports__.a=root},function(module,__webpack_exports__,__webpack_require__){"use strict";function isObjectLike(value){return null!=value&&"object"==typeof value}__webpack_exports__.a=isObjectLike},function(module,exports,__webpack_require__){function baseGetTag(value){return null==value?void 0===value?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}var Symbol=__webpack_require__(31),getRawTag=__webpack_require__(118),objectToString=__webpack_require__(119),nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol?Symbol.toStringTag:void 0;module.exports=baseGetTag},function(module,exports,__webpack_require__){(function(global){var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global;module.exports=freeGlobal}).call(exports,__webpack_require__(18))},function(module,exports,__webpack_require__){var overArg=__webpack_require__(120),getPrototype=overArg(Object.getPrototypeOf,Object);module.exports=getPrototype},function(module,exports,__webpack_require__){function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=void 0;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}var Symbol=__webpack_require__(31),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=Symbol?Symbol.toStringTag:void 0;module.exports=getRawTag},function(module,exports){function objectToString(value){return nativeObjectToString.call(value)}var objectProto=Object.prototype,nativeObjectToString=objectProto.toString;module.exports=objectToString},function(module,exports){function overArg(func,transform){return function(arg){return func(transform(arg))}}module.exports=overArg},function(module,exports,__webpack_require__){var freeGlobal=__webpack_require__(116),freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();module.exports=root},function(module,exports){function isObjectLike(value){return null!=value&&"object"==typeof value}module.exports=isObjectLike},function(module,exports,__webpack_require__){function isPlainObject(value){if(!isObjectLike(value)||baseGetTag(value)!=objectTag)return!1;var proto=getPrototype(value);if(null===proto)return!0;var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}var baseGetTag=__webpack_require__(115),getPrototype=__webpack_require__(117),isObjectLike=__webpack_require__(122),objectTag="[object Object]",funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectCtorString=funcToString.call(Object);module.exports=isPlainObject},function(module,exports,__webpack_require__){"use strict";function checkPropTypes(typeSpecs,values,location,componentName,getStack){}checkPropTypes.resetWarningCache=function(){},module.exports=checkPropTypes},function(module,exports,__webpack_require__){"use strict";var factory=__webpack_require__(127);module.exports=function(isValidElement){return factory(isValidElement,!1)}},function(module,exports,__webpack_require__){"use strict";function emptyFunction(){}function emptyFunctionWithReset(){}var ReactPropTypesSecret=__webpack_require__(33);emptyFunctionWithReset.resetWarningCache=emptyFunction,module.exports=function(){function shim(props,propName,componentName,location,propFullName,secret){if(secret!==ReactPropTypesSecret){var err=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw err.name="Invariant Violation",err}}function getShim(){return shim}shim.isRequired=shim;var ReactPropTypes={array:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return ReactPropTypes.PropTypes=ReactPropTypes,ReactPropTypes}},function(module,exports,__webpack_require__){"use strict";function emptyFunctionThatReturnsNull(){return null}var ReactIs=__webpack_require__(34),assign=__webpack_require__(9),ReactPropTypesSecret=__webpack_require__(33),checkPropTypes=__webpack_require__(124),has=Function.call.bind(Object.prototype.hasOwnProperty),printWarning=function(){};module.exports=function(isValidElement,throwOnDirectAccess){function getIteratorFn(maybeIterable){var iteratorFn=maybeIterable&&(ITERATOR_SYMBOL&&maybeIterable[ITERATOR_SYMBOL]||maybeIterable[FAUX_ITERATOR_SYMBOL]);if("function"==typeof iteratorFn)return iteratorFn}function is(x,y){return x===y?0!==x||1/x==1/y:x!==x&&y!==y}function PropTypeError(message){this.message=message,this.stack=""}function createChainableTypeChecker(validate){function checkType(isRequired,props,propName,componentName,location,propFullName,secret){if(componentName=componentName||ANONYMOUS,propFullName=propFullName||propName,secret!==ReactPropTypesSecret){if(throwOnDirectAccess){var err=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw err.name="Invariant Violation",err}}return null==props[propName]?isRequired?new PropTypeError(null===props[propName]?"The "+location+" `"+propFullName+"` is marked as required in `"+componentName+"`, but its value is `null`.":"The "+location+" `"+propFullName+"` is marked as required in `"+componentName+"`, but its value is `undefined`."):null:validate(props,propName,componentName,location,propFullName)}var chainedCheckType=checkType.bind(null,!1);return chainedCheckType.isRequired=checkType.bind(null,!0),chainedCheckType}function createPrimitiveTypeChecker(expectedType){function validate(props,propName,componentName,location,propFullName,secret){var propValue=props[propName];if(getPropType(propValue)!==expectedType)return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+getPreciseType(propValue)+"` supplied to `"+componentName+"`, expected `"+expectedType+"`.");return null}return createChainableTypeChecker(validate)}function createArrayOfTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){if("function"!=typeof typeChecker)return new PropTypeError("Property `"+propFullName+"` of component `"+componentName+"` has invalid PropType notation inside arrayOf.");var propValue=props[propName];if(!Array.isArray(propValue)){return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+getPropType(propValue)+"` supplied to `"+componentName+"`, expected an array.")}for(var i=0;i<propValue.length;i++){var error=typeChecker(propValue,i,componentName,location,propFullName+"["+i+"]",ReactPropTypesSecret);if(error instanceof Error)return error}return null}return createChainableTypeChecker(validate)}function createInstanceTypeChecker(expectedClass){function validate(props,propName,componentName,location,propFullName){if(!(props[propName]instanceof expectedClass)){var expectedClassName=expectedClass.name||ANONYMOUS;return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+getClassName(props[propName])+"` supplied to `"+componentName+"`, expected instance of `"+expectedClassName+"`.")}return null}return createChainableTypeChecker(validate)}function createEnumTypeChecker(expectedValues){function validate(props,propName,componentName,location,propFullName){for(var propValue=props[propName],i=0;i<expectedValues.length;i++)if(is(propValue,expectedValues[i]))return null;var valuesString=JSON.stringify(expectedValues,function(key,value){return"symbol"===getPreciseType(value)?String(value):value});return new PropTypeError("Invalid "+location+" `"+propFullName+"` of value `"+String(propValue)+"` supplied to `"+componentName+"`, expected one of "+valuesString+".")}return Array.isArray(expectedValues)?createChainableTypeChecker(validate):emptyFunctionThatReturnsNull}function createObjectOfTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){if("function"!=typeof typeChecker)return new PropTypeError("Property `"+propFullName+"` of component `"+componentName+"` has invalid PropType notation inside objectOf.");var propValue=props[propName],propType=getPropType(propValue);if("object"!==propType)return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+propType+"` supplied to `"+componentName+"`, expected an object.");for(var key in propValue)if(has(propValue,key)){var error=typeChecker(propValue,key,componentName,location,propFullName+"."+key,ReactPropTypesSecret);if(error instanceof Error)return error}return null}return createChainableTypeChecker(validate)}function createUnionTypeChecker(arrayOfTypeCheckers){function validate(props,propName,componentName,location,propFullName){for(var i=0;i<arrayOfTypeCheckers.length;i++){if(null==(0,arrayOfTypeCheckers[i])(props,propName,componentName,location,propFullName,ReactPropTypesSecret))return null}return new PropTypeError("Invalid "+location+" `"+propFullName+"` supplied to `"+componentName+"`.")}if(!Array.isArray(arrayOfTypeCheckers))return emptyFunctionThatReturnsNull;for(var i=0;i<arrayOfTypeCheckers.length;i++){var checker=arrayOfTypeCheckers[i];if("function"!=typeof checker)return printWarning("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+getPostfixForTypeWarning(checker)+" at index "+i+"."),emptyFunctionThatReturnsNull}return createChainableTypeChecker(validate)}function createShapeTypeChecker(shapeTypes){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName],propType=getPropType(propValue);if("object"!==propType)return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+propType+"` supplied to `"+componentName+"`, expected `object`.");for(var key in shapeTypes){var checker=shapeTypes[key];if(checker){var error=checker(propValue,key,componentName,location,propFullName+"."+key,ReactPropTypesSecret);if(error)return error}}return null}return createChainableTypeChecker(validate)}function createStrictShapeTypeChecker(shapeTypes){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName],propType=getPropType(propValue);if("object"!==propType)return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+propType+"` supplied to `"+componentName+"`, expected `object`.");var allKeys=assign({},props[propName],shapeTypes);for(var key in allKeys){var checker=shapeTypes[key];if(!checker)return new PropTypeError("Invalid "+location+" `"+propFullName+"` key `"+key+"` supplied to `"+componentName+"`.\nBad object: "+JSON.stringify(props[propName],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(shapeTypes),null,"  "));var error=checker(propValue,key,componentName,location,propFullName+"."+key,ReactPropTypesSecret);if(error)return error}return null}return createChainableTypeChecker(validate)}function isNode(propValue){switch(typeof propValue){case"number":case"string":case"undefined":return!0;case"boolean":return!propValue;case"object":if(Array.isArray(propValue))return propValue.every(isNode);if(null===propValue||isValidElement(propValue))return!0;var iteratorFn=getIteratorFn(propValue);if(!iteratorFn)return!1;var step,iterator=iteratorFn.call(propValue);if(iteratorFn!==propValue.entries){for(;!(step=iterator.next()).done;)if(!isNode(step.value))return!1}else for(;!(step=iterator.next()).done;){var entry=step.value;if(entry&&!isNode(entry[1]))return!1}return!0;default:return!1}}function isSymbol(propType,propValue){return"symbol"===propType||!!propValue&&("Symbol"===propValue["@@toStringTag"]||"function"==typeof Symbol&&propValue instanceof Symbol)}function getPropType(propValue){var propType=typeof propValue;return Array.isArray(propValue)?"array":propValue instanceof RegExp?"object":isSymbol(propType,propValue)?"symbol":propType}function getPreciseType(propValue){if(void 0===propValue||null===propValue)return""+propValue;var propType=getPropType(propValue);if("object"===propType){if(propValue instanceof Date)return"date";if(propValue instanceof RegExp)return"regexp"}return propType}function getPostfixForTypeWarning(value){var type=getPreciseType(value);switch(type){case"array":case"object":return"an "+type;case"boolean":case"date":case"regexp":return"a "+type;default:return type}}function getClassName(propValue){return propValue.constructor&&propValue.constructor.name?propValue.constructor.name:ANONYMOUS}var ITERATOR_SYMBOL="function"==typeof Symbol&&Symbol.iterator,FAUX_ITERATOR_SYMBOL="@@iterator",ANONYMOUS="<<anonymous>>",ReactPropTypes={array:createPrimitiveTypeChecker("array"),bool:createPrimitiveTypeChecker("boolean"),func:createPrimitiveTypeChecker("function"),number:createPrimitiveTypeChecker("number"),object:createPrimitiveTypeChecker("object"),string:createPrimitiveTypeChecker("string"),symbol:createPrimitiveTypeChecker("symbol"),any:function(){return createChainableTypeChecker(emptyFunctionThatReturnsNull)}(),arrayOf:createArrayOfTypeChecker,element:function(){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];if(!isValidElement(propValue)){return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+getPropType(propValue)+"` supplied to `"+componentName+"`, expected a single ReactElement.")}return null}return createChainableTypeChecker(validate)}(),elementType:function(){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];if(!ReactIs.isValidElementType(propValue)){return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+getPropType(propValue)+"` supplied to `"+componentName+"`, expected a single ReactElement type.")}return null}return createChainableTypeChecker(validate)}(),instanceOf:createInstanceTypeChecker,node:function(){function validate(props,propName,componentName,location,propFullName){return isNode(props[propName])?null:new PropTypeError("Invalid "+location+" `"+propFullName+"` supplied to `"+componentName+"`, expected a ReactNode.")}return createChainableTypeChecker(validate)}(),objectOf:createObjectOfTypeChecker,oneOf:createEnumTypeChecker,oneOfType:createUnionTypeChecker,shape:createShapeTypeChecker,exact:createStrictShapeTypeChecker};return PropTypeError.prototype=Error.prototype,ReactPropTypes.checkPropTypes=checkPropTypes,ReactPropTypes.resetWarningCache=checkPropTypes.resetWarningCache,ReactPropTypes.PropTypes=ReactPropTypes,ReactPropTypes}},function(module,exports,__webpack_require__){"use strict";function t(a){if("object"==typeof a&&null!==a){var u=a.$$typeof;switch(u){case c:switch(a=a.type){case l:case m:case e:case g:case f:case p:return a;default:switch(a=a&&a.$$typeof){case k:case n:case h:return a;default:return u}}case r:case q:case d:return u}}}function v(a){return t(a)===m}/** @license React v16.8.6
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
Object.defineProperty(exports,"__esModule",{value:!0});var b="function"==typeof Symbol&&Symbol.for,c=b?Symbol.for("react.element"):60103,d=b?Symbol.for("react.portal"):60106,e=b?Symbol.for("react.fragment"):60107,f=b?Symbol.for("react.strict_mode"):60108,g=b?Symbol.for("react.profiler"):60114,h=b?Symbol.for("react.provider"):60109,k=b?Symbol.for("react.context"):60110,l=b?Symbol.for("react.async_mode"):60111,m=b?Symbol.for("react.concurrent_mode"):60111,n=b?Symbol.for("react.forward_ref"):60112,p=b?Symbol.for("react.suspense"):60113,q=b?Symbol.for("react.memo"):60115,r=b?Symbol.for("react.lazy"):60116;exports.typeOf=t,exports.AsyncMode=l,exports.ConcurrentMode=m,exports.ContextConsumer=k,exports.ContextProvider=h,exports.Element=c,exports.ForwardRef=n,exports.Fragment=e,exports.Lazy=r,exports.Memo=q,exports.Portal=d,exports.Profiler=g,exports.StrictMode=f,exports.Suspense=p,exports.isValidElementType=function(a){return"string"==typeof a||"function"==typeof a||a===e||a===m||a===g||a===f||a===p||"object"==typeof a&&null!==a&&(a.$$typeof===r||a.$$typeof===q||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n)},exports.isAsyncMode=function(a){return v(a)||t(a)===l},exports.isConcurrentMode=v,exports.isContextConsumer=function(a){return t(a)===k},exports.isContextProvider=function(a){return t(a)===h},exports.isElement=function(a){return"object"==typeof a&&null!==a&&a.$$typeof===c},exports.isForwardRef=function(a){return t(a)===n},exports.isFragment=function(a){return t(a)===e},exports.isLazy=function(a){return t(a)===r},exports.isMemo=function(a){return t(a)===q},exports.isPortal=function(a){return t(a)===d},exports.isProfiler=function(a){return t(a)===g},exports.isStrictMode=function(a){return t(a)===f},exports.isSuspense=function(a){return t(a)===p}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports.default=void 0;var _react=__webpack_require__(42),_propTypes=__webpack_require__(32),_propTypes2=_interopRequireDefault(_propTypes),_storeShape=__webpack_require__(35),_storeShape2=_interopRequireDefault(_storeShape),_warning=__webpack_require__(36),Provider=(_interopRequireDefault(_warning),function(_Component){function Provider(props,context){_classCallCheck(this,Provider);var _this=_possibleConstructorReturn(this,_Component.call(this,props,context));return _this.store=props.store,_this}return _inherits(Provider,_Component),Provider.prototype.getChildContext=function(){return{store:this.store}},Provider.prototype.render=function(){return _react.Children.only(this.props.children)},Provider}(_react.Component));exports.default=Provider,Provider.propTypes={store:_storeShape2.default.isRequired,children:_propTypes2.default.element.isRequired},Provider.childContextTypes={store:_storeShape2.default.isRequired}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function getDisplayName(WrappedComponent){return WrappedComponent.displayName||WrappedComponent.name||"Component"}function tryCatch(fn,ctx){try{return fn.apply(ctx)}catch(e){return errorObject.value=e,errorObject}}function connect(mapStateToProps,mapDispatchToProps,mergeProps){var options=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},shouldSubscribe=Boolean(mapStateToProps),mapState=mapStateToProps||defaultMapStateToProps,mapDispatch=void 0;mapDispatch="function"==typeof mapDispatchToProps?mapDispatchToProps:mapDispatchToProps?(0,_wrapActionCreators2.default)(mapDispatchToProps):defaultMapDispatchToProps;var finalMergeProps=mergeProps||defaultMergeProps,_options$pure=options.pure,pure=void 0===_options$pure||_options$pure,_options$withRef=options.withRef,withRef=void 0!==_options$withRef&&_options$withRef,checkMergedEquals=pure&&finalMergeProps!==defaultMergeProps,version=nextVersion++;return function(WrappedComponent){function computeMergedProps(stateProps,dispatchProps,parentProps){var mergedProps=finalMergeProps(stateProps,dispatchProps,parentProps);return mergedProps}var connectDisplayName="Connect("+getDisplayName(WrappedComponent)+")",Connect=function(_Component){function Connect(props,context){_classCallCheck(this,Connect);var _this=_possibleConstructorReturn(this,_Component.call(this,props,context));_this.version=version,_this.store=props.store||context.store,(0,_invariant2.default)(_this.store,'Could not find "store" in either the context or props of "'+connectDisplayName+'". Either wrap the root component in a <Provider>, or explicitly pass "store" as a prop to "'+connectDisplayName+'".');var storeState=_this.store.getState();return _this.state={storeState:storeState},_this.clearCache(),_this}return _inherits(Connect,_Component),Connect.prototype.shouldComponentUpdate=function(){return!pure||this.haveOwnPropsChanged||this.hasStoreStateChanged},Connect.prototype.computeStateProps=function(store,props){if(!this.finalMapStateToProps)return this.configureFinalMapState(store,props);var state=store.getState(),stateProps=this.doStatePropsDependOnOwnProps?this.finalMapStateToProps(state,props):this.finalMapStateToProps(state);return stateProps},Connect.prototype.configureFinalMapState=function(store,props){var mappedState=mapState(store.getState(),props),isFactory="function"==typeof mappedState;return this.finalMapStateToProps=isFactory?mappedState:mapState,this.doStatePropsDependOnOwnProps=1!==this.finalMapStateToProps.length,isFactory?this.computeStateProps(store,props):mappedState},Connect.prototype.computeDispatchProps=function(store,props){if(!this.finalMapDispatchToProps)return this.configureFinalMapDispatch(store,props);var dispatch=store.dispatch,dispatchProps=this.doDispatchPropsDependOnOwnProps?this.finalMapDispatchToProps(dispatch,props):this.finalMapDispatchToProps(dispatch);return dispatchProps},Connect.prototype.configureFinalMapDispatch=function(store,props){var mappedDispatch=mapDispatch(store.dispatch,props),isFactory="function"==typeof mappedDispatch;return this.finalMapDispatchToProps=isFactory?mappedDispatch:mapDispatch,this.doDispatchPropsDependOnOwnProps=1!==this.finalMapDispatchToProps.length,isFactory?this.computeDispatchProps(store,props):mappedDispatch},Connect.prototype.updateStatePropsIfNeeded=function(){var nextStateProps=this.computeStateProps(this.store,this.props);return(!this.stateProps||!(0,_shallowEqual2.default)(nextStateProps,this.stateProps))&&(this.stateProps=nextStateProps,!0)},Connect.prototype.updateDispatchPropsIfNeeded=function(){var nextDispatchProps=this.computeDispatchProps(this.store,this.props);return(!this.dispatchProps||!(0,_shallowEqual2.default)(nextDispatchProps,this.dispatchProps))&&(this.dispatchProps=nextDispatchProps,!0)},Connect.prototype.updateMergedPropsIfNeeded=function(){var nextMergedProps=computeMergedProps(this.stateProps,this.dispatchProps,this.props);return!(this.mergedProps&&checkMergedEquals&&(0,_shallowEqual2.default)(nextMergedProps,this.mergedProps))&&(this.mergedProps=nextMergedProps,!0)},Connect.prototype.isSubscribed=function(){return"function"==typeof this.unsubscribe},Connect.prototype.trySubscribe=function(){shouldSubscribe&&!this.unsubscribe&&(this.unsubscribe=this.store.subscribe(this.handleChange.bind(this)),this.handleChange())},Connect.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)},Connect.prototype.componentDidMount=function(){this.trySubscribe()},Connect.prototype.componentWillReceiveProps=function(nextProps){pure&&(0,_shallowEqual2.default)(nextProps,this.props)||(this.haveOwnPropsChanged=!0)},Connect.prototype.componentWillUnmount=function(){this.tryUnsubscribe(),this.clearCache()},Connect.prototype.clearCache=function(){this.dispatchProps=null,this.stateProps=null,this.mergedProps=null,this.haveOwnPropsChanged=!0,this.hasStoreStateChanged=!0,this.haveStatePropsBeenPrecalculated=!1,this.statePropsPrecalculationError=null,this.renderedElement=null,this.finalMapDispatchToProps=null,this.finalMapStateToProps=null},Connect.prototype.handleChange=function(){if(this.unsubscribe){var storeState=this.store.getState(),prevStoreState=this.state.storeState;if(!pure||prevStoreState!==storeState){if(pure&&!this.doStatePropsDependOnOwnProps){var haveStatePropsChanged=tryCatch(this.updateStatePropsIfNeeded,this);if(!haveStatePropsChanged)return;haveStatePropsChanged===errorObject&&(this.statePropsPrecalculationError=errorObject.value),this.haveStatePropsBeenPrecalculated=!0}this.hasStoreStateChanged=!0,this.setState({storeState:storeState})}}},Connect.prototype.getWrappedInstance=function(){return(0,_invariant2.default)(withRef,"To access the wrapped instance, you need to specify { withRef: true } as the fourth argument of the connect() call."),this.refs.wrappedInstance},Connect.prototype.render=function(){var haveOwnPropsChanged=this.haveOwnPropsChanged,hasStoreStateChanged=this.hasStoreStateChanged,haveStatePropsBeenPrecalculated=this.haveStatePropsBeenPrecalculated,statePropsPrecalculationError=this.statePropsPrecalculationError,renderedElement=this.renderedElement;if(this.haveOwnPropsChanged=!1,this.hasStoreStateChanged=!1,this.haveStatePropsBeenPrecalculated=!1,this.statePropsPrecalculationError=null,statePropsPrecalculationError)throw statePropsPrecalculationError;var shouldUpdateStateProps=!0,shouldUpdateDispatchProps=!0;pure&&renderedElement&&(shouldUpdateStateProps=hasStoreStateChanged||haveOwnPropsChanged&&this.doStatePropsDependOnOwnProps,shouldUpdateDispatchProps=haveOwnPropsChanged&&this.doDispatchPropsDependOnOwnProps);var haveStatePropsChanged=!1,haveDispatchPropsChanged=!1;haveStatePropsBeenPrecalculated?haveStatePropsChanged=!0:shouldUpdateStateProps&&(haveStatePropsChanged=this.updateStatePropsIfNeeded()),shouldUpdateDispatchProps&&(haveDispatchPropsChanged=this.updateDispatchPropsIfNeeded());return!(!!(haveStatePropsChanged||haveDispatchPropsChanged||haveOwnPropsChanged)&&this.updateMergedPropsIfNeeded())&&renderedElement?renderedElement:(this.renderedElement=withRef?(0,_react.createElement)(WrappedComponent,_extends({},this.mergedProps,{ref:"wrappedInstance"})):(0,_react.createElement)(WrappedComponent,this.mergedProps),this.renderedElement)},Connect}(_react.Component);return Connect.displayName=connectDisplayName,Connect.WrappedComponent=WrappedComponent,Connect.contextTypes={store:_storeShape2.default},Connect.propTypes={store:_storeShape2.default},(0,_hoistNonReactStatics2.default)(Connect,WrappedComponent)}}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.default=connect;var _react=__webpack_require__(42),_storeShape=__webpack_require__(35),_storeShape2=_interopRequireDefault(_storeShape),_shallowEqual=__webpack_require__(131),_shallowEqual2=_interopRequireDefault(_shallowEqual),_wrapActionCreators=__webpack_require__(132),_wrapActionCreators2=_interopRequireDefault(_wrapActionCreators),_warning=__webpack_require__(36),_isPlainObject=(_interopRequireDefault(_warning),__webpack_require__(123)),_hoistNonReactStatics=(_interopRequireDefault(_isPlainObject),__webpack_require__(105)),_hoistNonReactStatics2=_interopRequireDefault(_hoistNonReactStatics),_invariant=__webpack_require__(106),_invariant2=_interopRequireDefault(_invariant),defaultMapStateToProps=function(state){return{}},defaultMapDispatchToProps=function(dispatch){return{dispatch:dispatch}},defaultMergeProps=function(stateProps,dispatchProps,parentProps){return _extends({},parentProps,stateProps,dispatchProps)},errorObject={value:null},nextVersion=0},function(module,exports,__webpack_require__){"use strict";function shallowEqual(objA,objB){if(objA===objB)return!0;var keysA=Object.keys(objA),keysB=Object.keys(objB);if(keysA.length!==keysB.length)return!1;for(var hasOwn=Object.prototype.hasOwnProperty,i=0;i<keysA.length;i++)if(!hasOwn.call(objB,keysA[i])||objA[keysA[i]]!==objB[keysA[i]])return!1;return!0}exports.__esModule=!0,exports.default=shallowEqual},function(module,exports,__webpack_require__){"use strict";function wrapActionCreators(actionCreators){return function(dispatch){return(0,_redux.bindActionCreators)(actionCreators,dispatch)}}exports.__esModule=!0,exports.default=wrapActionCreators;var _redux=__webpack_require__(45)},function(module,exports,__webpack_require__){"use strict";function escape(key){var escaperLookup={"=":"=0",":":"=2"};return"$"+(""+key).replace(/[=:]/g,function(match){return escaperLookup[match]})}function unescape(key){var unescapeRegex=/(=0|=2)/g,unescaperLookup={"=0":"=","=2":":"};return(""+("."===key[0]&&"$"===key[1]?key.substring(2):key.substring(1))).replace(unescapeRegex,function(match){return unescaperLookup[match]})}var KeyEscapeUtils={escape:escape,unescape:unescape};module.exports=KeyEscapeUtils},function(module,exports,__webpack_require__){"use strict";var _prodInvariant=__webpack_require__(12),oneArgumentPooler=(__webpack_require__(8),function(copyFieldsFrom){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();return Klass.call(instance,copyFieldsFrom),instance}return new Klass(copyFieldsFrom)}),twoArgumentPooler=function(a1,a2){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();return Klass.call(instance,a1,a2),instance}return new Klass(a1,a2)},threeArgumentPooler=function(a1,a2,a3){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();return Klass.call(instance,a1,a2,a3),instance}return new Klass(a1,a2,a3)},fourArgumentPooler=function(a1,a2,a3,a4){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();return Klass.call(instance,a1,a2,a3,a4),instance}return new Klass(a1,a2,a3,a4)},standardReleaser=function(instance){var Klass=this;instance instanceof Klass||_prodInvariant("25"),instance.destructor(),Klass.instancePool.length<Klass.poolSize&&Klass.instancePool.push(instance)},DEFAULT_POOLER=oneArgumentPooler,addPoolingTo=function(CopyConstructor,pooler){var NewKlass=CopyConstructor;return NewKlass.instancePool=[],NewKlass.getPooled=pooler||DEFAULT_POOLER,NewKlass.poolSize||(NewKlass.poolSize=10),NewKlass.release=standardReleaser,NewKlass},PooledClass={addPoolingTo:addPoolingTo,oneArgumentPooler:oneArgumentPooler,twoArgumentPooler:twoArgumentPooler,threeArgumentPooler:threeArgumentPooler,fourArgumentPooler:fourArgumentPooler};module.exports=PooledClass},function(module,exports,__webpack_require__){"use strict";var _assign=__webpack_require__(9),ReactBaseClasses=__webpack_require__(37),ReactChildren=__webpack_require__(136),ReactDOMFactories=__webpack_require__(137),ReactElement=__webpack_require__(5),ReactPropTypes=__webpack_require__(138),ReactVersion=__webpack_require__(139),createReactClass=__webpack_require__(140),onlyChild=__webpack_require__(143),createElement=ReactElement.createElement,createFactory=ReactElement.createFactory,cloneElement=ReactElement.cloneElement,__spread=_assign,createMixin=function(mixin){return mixin},React={Children:{map:ReactChildren.map,forEach:ReactChildren.forEach,count:ReactChildren.count,toArray:ReactChildren.toArray,only:onlyChild},Component:ReactBaseClasses.Component,PureComponent:ReactBaseClasses.PureComponent,createElement:createElement,cloneElement:cloneElement,isValidElement:ReactElement.isValidElement,PropTypes:ReactPropTypes,createClass:createReactClass,createFactory:createFactory,createMixin:createMixin,DOM:ReactDOMFactories,version:ReactVersion,__spread:__spread};module.exports=React},function(module,exports,__webpack_require__){"use strict";function escapeUserProvidedKey(text){return(""+text).replace(userProvidedKeyEscapeRegex,"$&/")}function ForEachBookKeeping(forEachFunction,forEachContext){this.func=forEachFunction,this.context=forEachContext,this.count=0}function forEachSingleChild(bookKeeping,child,name){var func=bookKeeping.func,context=bookKeeping.context;func.call(context,child,bookKeeping.count++)}function forEachChildren(children,forEachFunc,forEachContext){if(null==children)return children;var traverseContext=ForEachBookKeeping.getPooled(forEachFunc,forEachContext);traverseAllChildren(children,forEachSingleChild,traverseContext),ForEachBookKeeping.release(traverseContext)}function MapBookKeeping(mapResult,keyPrefix,mapFunction,mapContext){this.result=mapResult,this.keyPrefix=keyPrefix,this.func=mapFunction,this.context=mapContext,this.count=0}function mapSingleChildIntoContext(bookKeeping,child,childKey){var result=bookKeeping.result,keyPrefix=bookKeeping.keyPrefix,func=bookKeeping.func,context=bookKeeping.context,mappedChild=func.call(context,child,bookKeeping.count++);Array.isArray(mappedChild)?mapIntoWithKeyPrefixInternal(mappedChild,result,childKey,emptyFunction.thatReturnsArgument):null!=mappedChild&&(ReactElement.isValidElement(mappedChild)&&(mappedChild=ReactElement.cloneAndReplaceKey(mappedChild,keyPrefix+(!mappedChild.key||child&&child.key===mappedChild.key?"":escapeUserProvidedKey(mappedChild.key)+"/")+childKey)),result.push(mappedChild))}function mapIntoWithKeyPrefixInternal(children,array,prefix,func,context){var escapedPrefix="";null!=prefix&&(escapedPrefix=escapeUserProvidedKey(prefix)+"/");var traverseContext=MapBookKeeping.getPooled(array,escapedPrefix,func,context);traverseAllChildren(children,mapSingleChildIntoContext,traverseContext),MapBookKeeping.release(traverseContext)}function mapChildren(children,func,context){if(null==children)return children;var result=[];return mapIntoWithKeyPrefixInternal(children,result,null,func,context),result}function forEachSingleChildDummy(traverseContext,child,name){return null}function countChildren(children,context){return traverseAllChildren(children,forEachSingleChildDummy,null)}function toArray(children){var result=[];return mapIntoWithKeyPrefixInternal(children,result,null,emptyFunction.thatReturnsArgument),result}var PooledClass=__webpack_require__(134),ReactElement=__webpack_require__(5),emptyFunction=__webpack_require__(27),traverseAllChildren=__webpack_require__(144),twoArgumentPooler=PooledClass.twoArgumentPooler,fourArgumentPooler=PooledClass.fourArgumentPooler,userProvidedKeyEscapeRegex=/\/+/g;ForEachBookKeeping.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},PooledClass.addPoolingTo(ForEachBookKeeping,twoArgumentPooler),MapBookKeeping.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},PooledClass.addPoolingTo(MapBookKeeping,fourArgumentPooler);var ReactChildren={forEach:forEachChildren,map:mapChildren,mapIntoWithKeyPrefixInternal:mapIntoWithKeyPrefixInternal,count:countChildren,toArray:toArray};module.exports=ReactChildren},function(module,exports,__webpack_require__){"use strict";var ReactElement=__webpack_require__(5),createDOMFactory=ReactElement.createFactory,ReactDOMFactories={a:createDOMFactory("a"),abbr:createDOMFactory("abbr"),address:createDOMFactory("address"),area:createDOMFactory("area"),article:createDOMFactory("article"),aside:createDOMFactory("aside"),audio:createDOMFactory("audio"),b:createDOMFactory("b"),base:createDOMFactory("base"),bdi:createDOMFactory("bdi"),bdo:createDOMFactory("bdo"),big:createDOMFactory("big"),blockquote:createDOMFactory("blockquote"),body:createDOMFactory("body"),br:createDOMFactory("br"),button:createDOMFactory("button"),canvas:createDOMFactory("canvas"),caption:createDOMFactory("caption"),cite:createDOMFactory("cite"),code:createDOMFactory("code"),col:createDOMFactory("col"),colgroup:createDOMFactory("colgroup"),data:createDOMFactory("data"),datalist:createDOMFactory("datalist"),dd:createDOMFactory("dd"),del:createDOMFactory("del"),details:createDOMFactory("details"),dfn:createDOMFactory("dfn"),dialog:createDOMFactory("dialog"),div:createDOMFactory("div"),dl:createDOMFactory("dl"),dt:createDOMFactory("dt"),em:createDOMFactory("em"),embed:createDOMFactory("embed"),fieldset:createDOMFactory("fieldset"),figcaption:createDOMFactory("figcaption"),figure:createDOMFactory("figure"),footer:createDOMFactory("footer"),form:createDOMFactory("form"),h1:createDOMFactory("h1"),h2:createDOMFactory("h2"),h3:createDOMFactory("h3"),h4:createDOMFactory("h4"),h5:createDOMFactory("h5"),h6:createDOMFactory("h6"),head:createDOMFactory("head"),header:createDOMFactory("header"),hgroup:createDOMFactory("hgroup"),hr:createDOMFactory("hr"),html:createDOMFactory("html"),i:createDOMFactory("i"),iframe:createDOMFactory("iframe"),img:createDOMFactory("img"),input:createDOMFactory("input"),ins:createDOMFactory("ins"),kbd:createDOMFactory("kbd"),keygen:createDOMFactory("keygen"),label:createDOMFactory("label"),legend:createDOMFactory("legend"),li:createDOMFactory("li"),link:createDOMFactory("link"),main:createDOMFactory("main"),map:createDOMFactory("map"),mark:createDOMFactory("mark"),menu:createDOMFactory("menu"),menuitem:createDOMFactory("menuitem"),meta:createDOMFactory("meta"),meter:createDOMFactory("meter"),nav:createDOMFactory("nav"),noscript:createDOMFactory("noscript"),object:createDOMFactory("object"),ol:createDOMFactory("ol"),optgroup:createDOMFactory("optgroup"),option:createDOMFactory("option"),output:createDOMFactory("output"),p:createDOMFactory("p"),param:createDOMFactory("param"),picture:createDOMFactory("picture"),pre:createDOMFactory("pre"),progress:createDOMFactory("progress"),q:createDOMFactory("q"),rp:createDOMFactory("rp"),rt:createDOMFactory("rt"),ruby:createDOMFactory("ruby"),s:createDOMFactory("s"),samp:createDOMFactory("samp"),script:createDOMFactory("script"),section:createDOMFactory("section"),select:createDOMFactory("select"),small:createDOMFactory("small"),source:createDOMFactory("source"),span:createDOMFactory("span"),strong:createDOMFactory("strong"),style:createDOMFactory("style"),sub:createDOMFactory("sub"),summary:createDOMFactory("summary"),sup:createDOMFactory("sup"),table:createDOMFactory("table"),tbody:createDOMFactory("tbody"),td:createDOMFactory("td"),textarea:createDOMFactory("textarea"),tfoot:createDOMFactory("tfoot"),th:createDOMFactory("th"),thead:createDOMFactory("thead"),time:createDOMFactory("time"),title:createDOMFactory("title"),tr:createDOMFactory("tr"),track:createDOMFactory("track"),u:createDOMFactory("u"),ul:createDOMFactory("ul"),var:createDOMFactory("var"),video:createDOMFactory("video"),wbr:createDOMFactory("wbr"),circle:createDOMFactory("circle"),clipPath:createDOMFactory("clipPath"),defs:createDOMFactory("defs"),ellipse:createDOMFactory("ellipse"),g:createDOMFactory("g"),image:createDOMFactory("image"),line:createDOMFactory("line"),linearGradient:createDOMFactory("linearGradient"),mask:createDOMFactory("mask"),path:createDOMFactory("path"),pattern:createDOMFactory("pattern"),polygon:createDOMFactory("polygon"),polyline:createDOMFactory("polyline"),radialGradient:createDOMFactory("radialGradient"),rect:createDOMFactory("rect"),stop:createDOMFactory("stop"),svg:createDOMFactory("svg"),text:createDOMFactory("text"),tspan:createDOMFactory("tspan")};module.exports=ReactDOMFactories},function(module,exports,__webpack_require__){"use strict";var _require=__webpack_require__(5),isValidElement=_require.isValidElement,factory=__webpack_require__(125);module.exports=factory(isValidElement)},function(module,exports,__webpack_require__){"use strict";module.exports="15.6.2"},function(module,exports,__webpack_require__){"use strict";var _require=__webpack_require__(37),Component=_require.Component,_require2=__webpack_require__(5),isValidElement=_require2.isValidElement,ReactNoopUpdateQueue=__webpack_require__(40),factory=__webpack_require__(104);module.exports=factory(Component,isValidElement,ReactNoopUpdateQueue)},function(module,exports,__webpack_require__){"use strict";function getIteratorFn(maybeIterable){var iteratorFn=maybeIterable&&(ITERATOR_SYMBOL&&maybeIterable[ITERATOR_SYMBOL]||maybeIterable[FAUX_ITERATOR_SYMBOL]);if("function"==typeof iteratorFn)return iteratorFn}var ITERATOR_SYMBOL="function"==typeof Symbol&&Symbol.iterator,FAUX_ITERATOR_SYMBOL="@@iterator";module.exports=getIteratorFn},function(module,exports,__webpack_require__){"use strict";var lowPriorityWarning=function(){};module.exports=lowPriorityWarning},function(module,exports,__webpack_require__){"use strict";function onlyChild(children){return ReactElement.isValidElement(children)||_prodInvariant("143"),children}var _prodInvariant=__webpack_require__(12),ReactElement=__webpack_require__(5);__webpack_require__(8);module.exports=onlyChild},function(module,exports,__webpack_require__){"use strict";function getComponentKey(component,index){return component&&"object"==typeof component&&null!=component.key?KeyEscapeUtils.escape(component.key):index.toString(36)}function traverseAllChildrenImpl(children,nameSoFar,callback,traverseContext){var type=typeof children;if("undefined"!==type&&"boolean"!==type||(children=null),null===children||"string"===type||"number"===type||"object"===type&&children.$$typeof===REACT_ELEMENT_TYPE)return callback(traverseContext,children,""===nameSoFar?SEPARATOR+getComponentKey(children,0):nameSoFar),1;var child,nextName,subtreeCount=0,nextNamePrefix=""===nameSoFar?SEPARATOR:nameSoFar+SUBSEPARATOR;if(Array.isArray(children))for(var i=0;i<children.length;i++)child=children[i],nextName=nextNamePrefix+getComponentKey(child,i),subtreeCount+=traverseAllChildrenImpl(child,nextName,callback,traverseContext);else{var iteratorFn=getIteratorFn(children);if(iteratorFn){var step,iterator=iteratorFn.call(children);if(iteratorFn!==children.entries)for(var ii=0;!(step=iterator.next()).done;)child=step.value,nextName=nextNamePrefix+getComponentKey(child,ii++),subtreeCount+=traverseAllChildrenImpl(child,nextName,callback,traverseContext);else for(;!(step=iterator.next()).done;){var entry=step.value;entry&&(child=entry[1],nextName=nextNamePrefix+KeyEscapeUtils.escape(entry[0])+SUBSEPARATOR+getComponentKey(child,0),subtreeCount+=traverseAllChildrenImpl(child,nextName,callback,traverseContext))}}else if("object"===type){var addendum="",childrenString=String(children);_prodInvariant("31","[object Object]"===childrenString?"object with keys {"+Object.keys(children).join(", ")+"}":childrenString,addendum)}}return subtreeCount}function traverseAllChildren(children,callback,traverseContext){return null==children?0:traverseAllChildrenImpl(children,"",callback,traverseContext)}var _prodInvariant=__webpack_require__(12),REACT_ELEMENT_TYPE=(__webpack_require__(38),__webpack_require__(39)),getIteratorFn=__webpack_require__(141),KeyEscapeUtils=(__webpack_require__(8),__webpack_require__(133)),SEPARATOR=(__webpack_require__(16),"."),SUBSEPARATOR=":";module.exports=traverseAllChildren},function(module,__webpack_exports__,__webpack_require__){"use strict";function applyMiddleware(){for(var _len=arguments.length,middlewares=Array(_len),_key=0;_key<_len;_key++)middlewares[_key]=arguments[_key];return function(createStore){return function(reducer,preloadedState,enhancer){var store=createStore(reducer,preloadedState,enhancer),_dispatch=store.dispatch,chain=[],middlewareAPI={getState:store.getState,dispatch:function(action){return _dispatch(action)}};return chain=middlewares.map(function(middleware){return middleware(middlewareAPI)}),_dispatch=__WEBPACK_IMPORTED_MODULE_0__compose__.a.apply(void 0,chain)(store.dispatch),_extends({},store,{dispatch:_dispatch})}}}__webpack_exports__.a=applyMiddleware;var __WEBPACK_IMPORTED_MODULE_0__compose__=__webpack_require__(43),_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}},function(module,__webpack_exports__,__webpack_require__){"use strict";function bindActionCreator(actionCreator,dispatch){return function(){return dispatch(actionCreator.apply(void 0,arguments))}}function bindActionCreators(actionCreators,dispatch){if("function"==typeof actionCreators)return bindActionCreator(actionCreators,dispatch);if("object"!=typeof actionCreators||null===actionCreators)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===actionCreators?"null":typeof actionCreators)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var keys=Object.keys(actionCreators),boundActionCreators={},i=0;i<keys.length;i++){var key=keys[i],actionCreator=actionCreators[key];"function"==typeof actionCreator&&(boundActionCreators[key]=bindActionCreator(actionCreator,dispatch))}return boundActionCreators}__webpack_exports__.a=bindActionCreators},function(module,__webpack_exports__,__webpack_require__){"use strict";function getUndefinedStateErrorMessage(key,action){var actionType=action&&action.type;return"Given action "+(actionType&&'"'+actionType.toString()+'"'||"an action")+', reducer "'+key+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function assertReducerShape(reducers){Object.keys(reducers).forEach(function(key){var reducer=reducers[key];if(void 0===reducer(void 0,{type:__WEBPACK_IMPORTED_MODULE_0__createStore__.b.INIT}))throw new Error('Reducer "'+key+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===reducer(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+key+"\" returned undefined when probed with a random type. Don't try to handle "+__WEBPACK_IMPORTED_MODULE_0__createStore__.b.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}function combineReducers(reducers){for(var reducerKeys=Object.keys(reducers),finalReducers={},i=0;i<reducerKeys.length;i++){var key=reducerKeys[i];"function"==typeof reducers[key]&&(finalReducers[key]=reducers[key])}var finalReducerKeys=Object.keys(finalReducers),shapeAssertionError=void 0;try{assertReducerShape(finalReducers)}catch(e){shapeAssertionError=e}return function(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments[1];if(shapeAssertionError)throw shapeAssertionError;for(var hasChanged=!1,nextState={},_i=0;_i<finalReducerKeys.length;_i++){var _key=finalReducerKeys[_i],reducer=finalReducers[_key],previousStateForKey=state[_key],nextStateForKey=reducer(previousStateForKey,action);if(void 0===nextStateForKey){var errorMessage=getUndefinedStateErrorMessage(_key,action);throw new Error(errorMessage)}nextState[_key]=nextStateForKey,hasChanged=hasChanged||nextStateForKey!==previousStateForKey}return hasChanged?nextState:state}}__webpack_exports__.a=combineReducers;var __WEBPACK_IMPORTED_MODULE_0__createStore__=__webpack_require__(44);__webpack_require__(30),__webpack_require__(46)},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global,module){var root,__WEBPACK_IMPORTED_MODULE_0__ponyfill_js__=__webpack_require__(149);root="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==global?global:module;var result=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__ponyfill_js__.a)(root);__webpack_exports__.a=result}).call(__webpack_exports__,__webpack_require__(18),__webpack_require__(150)(module))},function(module,__webpack_exports__,__webpack_require__){"use strict";function symbolObservablePonyfill(root){var result,Symbol=root.Symbol;return"function"==typeof Symbol?Symbol.observable?result=Symbol.observable:(result=Symbol("observable"),Symbol.observable=result):result="@@observable",result}__webpack_exports__.a=symbolObservablePonyfill},function(module,exports){module.exports=function(originalModule){if(!originalModule.webpackPolyfill){var module=Object.create(originalModule);module.children||(module.children=[]),Object.defineProperty(module,"loaded",{enumerable:!0,get:function(){return module.l}}),Object.defineProperty(module,"id",{enumerable:!0,get:function(){return module.i}}),Object.defineProperty(module,"exports",{enumerable:!0}),module.webpackPolyfill=1}return module}},function(module,exports,__webpack_require__){__webpack_require__(48),module.exports=__webpack_require__(47)}]);